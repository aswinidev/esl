{"version":3,"sources":["webpack:///./src/common/test-media-source.ts","webpack:///./src/common/test-media.ts","webpack:///../src/modules/draft/esl-carousel/all.ts","webpack:///../src/modules/draft/esl-carousel/core/esl-carousel-slide.ts","webpack:///../src/modules/draft/esl-carousel/core/esl-carousel.ts","webpack:///../src/modules/draft/esl-carousel/core/view/esl-carousel-view.ts","webpack:///../src/modules/draft/esl-carousel/core/view/esl-multi-carousel-view.ts","webpack:///../src/modules/draft/esl-carousel/core/view/esl-single-carousel-view.ts","webpack:///../src/modules/draft/esl-carousel/plugin/esl-carousel-autoplay.plugin.ts","webpack:///../src/modules/draft/esl-carousel/plugin/esl-carousel-dots.plugin.ts","webpack:///../src/modules/draft/esl-carousel/plugin/esl-carousel-link.plugin.ts","webpack:///../src/modules/draft/esl-carousel/plugin/esl-carousel-plugin.ts","webpack:///../src/modules/draft/esl-carousel/plugin/esl-carousel-touch.plugin.ts","webpack:///../src/modules/esl-a11y-group/core/esl-a11y-group.ts","webpack:///../src/modules/esl-alert/core/esl-alert.ts","webpack:///../src/modules/esl-base-element/core/esl-base-element.ts","webpack:///../src/modules/esl-base-element/decorators/attr.ts","webpack:///../src/modules/esl-base-element/decorators/bool-attr.ts","webpack:///../src/modules/esl-base-element/decorators/json-attr.ts","webpack:///../src/modules/esl-forms/esl-select-list/core/esl-select-item.ts","webpack:///../src/modules/esl-forms/esl-select-list/core/esl-select-list.ts","webpack:///../src/modules/esl-forms/esl-select-list/core/esl-select-wrapper.ts","webpack:///../src/modules/esl-forms/esl-select/core/esl-select-dropdown.ts","webpack:///../src/modules/esl-forms/esl-select/core/esl-select-renderer.ts","webpack:///../src/modules/esl-forms/esl-select/core/esl-select.ts","webpack:///../src/modules/esl-image/core/esl-image-iobserver.ts","webpack:///../src/modules/esl-image/core/esl-image-strategies.ts","webpack:///../src/modules/esl-image/core/esl-image.ts","webpack:///../src/modules/esl-media-query/core/esl-media-breakpoints.ts","webpack:///../src/modules/esl-media-query/core/esl-media-query.ts","webpack:///../src/modules/esl-media-query/core/esl-media-rule-list.ts","webpack:///../src/modules/esl-media-query/core/esl-media-rule.ts","webpack:///../src/modules/esl-media/core/esl-media-iobserver.ts","webpack:///../src/modules/esl-media/core/esl-media-manager.ts","webpack:///../src/modules/esl-media/core/esl-media-provider.ts","webpack:///../src/modules/esl-media/core/esl-media-registry.ts","webpack:///../src/modules/esl-media/core/esl-media.ts","webpack:///../src/modules/esl-media/providers/brightcove-provider.ts","webpack:///../src/modules/esl-media/providers/html5/audio-provider.ts","webpack:///../src/modules/esl-media/providers/html5/media-provider.ts","webpack:///../src/modules/esl-media/providers/html5/video-provider.ts","webpack:///../src/modules/esl-media/providers/iframe-provider.ts","webpack:///../src/modules/esl-media/providers/youtube-provider.ts","webpack:///../src/modules/esl-panel/core/esl-panel-group.ts","webpack:///../src/modules/esl-panel/core/esl-panel.ts","webpack:///../src/modules/esl-popup/core/esl-popup.ts","webpack:///../src/modules/esl-scrollbar/core/esl-scrollbar.ts","webpack:///../src/modules/esl-tab/core/esl-tab.ts","webpack:///../src/modules/esl-tab/core/esl-tabs.ts","webpack:///../src/modules/esl-toggleable/core/esl-toggleable-dispatcher.ts","webpack:///../src/modules/esl-toggleable/core/esl-toggleable.ts","webpack:///../src/modules/esl-traversing-query/core/esl-traversing-query.ts","webpack:///../src/modules/esl-trigger/core/esl-trigger.ts","webpack:///../src/modules/esl-utils/abstract/observable.ts","webpack:///../src/modules/esl-utils/async/debounce.ts","webpack:///../src/modules/esl-utils/async/delayed-task.ts","webpack:///../src/modules/esl-utils/async/promise.ts","webpack:///../src/modules/esl-utils/async/raf.ts","webpack:///../src/modules/esl-utils/decorators/bind.ts","webpack:///../src/modules/esl-utils/decorators/memoize.ts","webpack:///../src/modules/esl-utils/decorators/prop.ts","webpack:///../src/modules/esl-utils/decorators/ready.ts","webpack:///../src/modules/esl-utils/dom/class.ts","webpack:///../src/modules/esl-utils/dom/events.ts","webpack:///../src/modules/esl-utils/dom/keys.ts","webpack:///../src/modules/esl-utils/dom/ready.ts","webpack:///../src/modules/esl-utils/dom/rtl.ts","webpack:///../src/modules/esl-utils/dom/script.ts","webpack:///../src/modules/esl-utils/dom/scroll.ts","webpack:///../src/modules/esl-utils/dom/traversing.ts","webpack:///../src/modules/esl-utils/environment/device-detector.ts","webpack:///../src/modules/esl-utils/environment/export-ns.ts","webpack:///../src/modules/esl-utils/fixes/ie-fixes.ts","webpack:///../src/modules/esl-utils/misc/array.ts","webpack:///../src/modules/esl-utils/misc/format.ts","webpack:///../src/modules/esl-utils/misc/memoize.ts","webpack:///../src/modules/esl-utils/misc/object.ts","webpack:///../src/modules/esl-utils/misc/uid.ts","webpack:///../src/modules/lib.ts","webpack:///../src/polyfills/es5-target-shim.ts","webpack:///../src/polyfills/list/dom.element.toggleAttribute.ts","webpack:///../src/polyfills/list/dom.keyboard.key.ts","webpack:///../src/polyfills/list/dom.node.isConnected.ts","webpack:///../src/polyfills/polyfills.es6.ts","webpack:///../src/polyfills/polyfills.validate.ts","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./src/localdev.ts"],"names":[],"mappings":"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","file":"localdev.js","sourcesContent":["import {debounce} from '../../../src/modules/esl-utils/async/debounce';\n\nclass TestMediaSource extends HTMLElement {\n  get target() {\n    const targetSel = this.getAttribute('target');\n    return document.querySelector(targetSel || '');\n  }\n\n  private render() {\n    const form = document.createElement('form');\n    form.innerHTML = `\n      <fieldset>\n        <legend>Video Settings:</legend>\n          <div class=\"input-group mb-2 mr-sm-2\">\n          <select class=\"form-control\" name=\"media-type\">\n            <option value=\"auto\">- Auto -</option>\n            <option value=\"audio\">HTML Audio</option>\n            <option value=\"video\">HTML Video</option>\n            <option value=\"youtube\">Youtube</option>\n            <option value=\"brightcove\">Brightcove</option>\n            <option value=\"iframe\">Iframe</option>\n          </select>\n        </div>\n        <div class=\"input-group mb-2 mr-sm-2\">\n          <input type=\"text\" class=\"form-control\" placeholder=\"Media src\" name=\"media-src\" autocomplete=\"on\"/>\n        </div>\n        <div class=\"input-group mb-2 mr-sm-2\">\n          <input type=\"text\" class=\"form-control\" placeholder=\"Media id\" name=\"media-id\" autocomplete=\"on\"/>\n        </div>\n        <div class=\"input-group mb-2 mr-sm-2\">\n          <input type=\"text\" class=\"form-control\" placeholder=\"Player id\" name=\"player-id\" autocomplete=\"on\"/>\n        </div>\n        <div class=\"input-group mb-2 mr-sm-2\">\n          <input type=\"text\" class=\"form-control\" placeholder=\"Player account\" name=\"player-account\" autocomplete=\"on\"/>\n        </div>\n\n        <div class=\"form-group\">\n          <div class=\"form-check form-check-inline\">\n            <label class=\"form-check-label\"><input type=\"checkbox\" name=\"muted\" class=\"form-check-input\"/> Muted</label>\n          </div>\n          <div class=\"form-check form-check-inline\">\n            <label class=\"form-check-label\"><input type=\"checkbox\" name=\"autoplay\" class=\"form-check-input\"/> Autoplay</label>\n          </div>\n          <div class=\"form-check form-check-inline\">\n            <label class=\"form-check-label\"><input type=\"checkbox\" name=\"disabled\" class=\"form-check-input\"/> Disabled</label>\n          </div>\n        </div>\n      </fieldset>\n    `;\n    form.action = 'javascript: void 0;';\n    this.innerHTML = '';\n    this.appendChild(form);\n  }\n\n  private onChange() {\n    const target = this.target;\n    const inputs = this.querySelectorAll('input[name], select[name]');\n    Array.from(inputs).forEach((input: HTMLInputElement | HTMLSelectElement) => {\n      if (!target) return;\n      if (input instanceof HTMLInputElement && input.type === 'checkbox') {\n        target.toggleAttribute(input.name, input.checked);\n      } else {\n        target.setAttribute(input.name, input.value);\n      }\n    });\n  }\n\n  protected connectedCallback() {\n    this.render();\n    this.addEventListener('change', debounce(() => this.onChange(), 750));\n    this.onChange();\n  }\n}\n\ncustomElements.define('test-media-source', TestMediaSource);\n","interface MediaTarget {\n  play(): any;\n  pause(): any;\n  stop(): any;\n}\n\ninterface TestMediaAction {\n  title: string;\n  action: (target: MediaTarget, actionName: string, action: TestMediaAction) => void;\n  render: (actionName: string, action: TestMediaAction) => HTMLElement;\n}\n\nclass TestMediaControls extends HTMLElement {\n\n  public static ACTIONS: { [key: string]: TestMediaAction } = {\n    play: {\n      title: 'Play',\n      action: (target: any) => target.play(),\n      render: renderButton\n    },\n    pause: {\n      title: 'Pause',\n      action: (target: any) => target.pause(),\n      render: renderButton\n    },\n    stop: {\n      title: 'Stop',\n      action: (target: any) => target.stop(),\n      render: renderButton\n    }\n  };\n  public static ACTIONS_ALL = Object.keys(TestMediaControls.ACTIONS).join(',');\n\n  get target() {\n    const targetSel = this.getAttribute('target');\n    return targetSel ? Array.from(document.querySelectorAll(targetSel)) : [];\n  }\n\n  get actions() {\n    return this.getAttribute('actions') || TestMediaControls.ACTIONS_ALL;\n  }\n\n  private render() {\n    const actionList = this.actions.split(',');\n\n    this.innerHTML = '';\n    for (const actionName of actionList) {\n      const action: TestMediaAction = TestMediaControls.ACTIONS[actionName];\n      if (!action) return;\n      this.appendChild(action.render(actionName, action));\n    }\n  }\n\n  private onClick(e: Event) {\n    const target = e.target as HTMLElement;\n    const actionName = target.dataset.action;\n    if (actionName && TestMediaControls.ACTIONS[actionName]) {\n      const actionDesc = TestMediaControls.ACTIONS[actionName];\n      const actionFn = actionDesc.action;\n      this.target.forEach(($el) => actionFn.call($el, $el, actionName, actionDesc));\n    }\n  }\n\n  protected connectedCallback() {\n    this.render();\n    this.addEventListener('click', this.onClick.bind(this));\n  }\n}\n\nfunction renderButton(actionName: string, action: TestMediaAction) {\n  const btn = document.createElement('button');\n  btn.className = 'btn btn-primary';\n  btn.dataset.action = actionName;\n  btn.textContent = action.title;\n  return btn;\n}\n\ncustomElements.define('test-media-controls', TestMediaControls);\n","// Views\nimport './core/view/esl-single-carousel-view';\nimport './core/view/esl-multi-carousel-view';\n\nexport * from './core/esl-carousel';\n\n// Plugins\nimport {ESLCarouselDotsPlugin} from './plugin/esl-carousel-dots.plugin';\nimport {ESLCarouselLinkPlugin} from './plugin/esl-carousel-link.plugin';\nimport {ESLCarouselTouchPlugin} from './plugin/esl-carousel-touch.plugin';\nimport {ESLCarouselAutoplayPlugin} from './plugin/esl-carousel-autoplay.plugin';\n\n// TODO: ??\nexport const ESLCarouselPlugins = {\n  Dots: ESLCarouselDotsPlugin,\n  Link: ESLCarouselLinkPlugin,\n  Touch: ESLCarouselTouchPlugin,\n  Autoplay: ESLCarouselAutoplayPlugin\n};\n","/**\n * Slide controller\n * @author Julia Murashko\n */\nimport {ESLBaseElement} from '../../../esl-base-element/core';\n\nexport class ESLCarouselSlide extends ESLBaseElement {\n  // TODO: refactor (check type of Element)\n  public get index(): number {\n    if (!this.parentNode) return -1;\n    return Array.prototype.indexOf.call(this.parentNode.children, this);\n  }\n\n  public get active(): boolean {\n    return this.hasAttribute('active');\n  }\n  public _setActive(active: boolean) {\n    this.toggleAttribute('active', active);\n  }\n\n  public get first(): boolean {\n    return this.hasAttribute('first');\n  }\n  public _setFirst(first: boolean) {\n    this.toggleAttribute('first', first);\n  }\n}\n","import {ExportNs} from '../../../esl-utils/environment/export-ns';\nimport {ESLBaseElement, attr} from '../../../esl-base-element/core';\nimport {deepCompare} from '../../../esl-utils/misc/object';\nimport {ESLMediaRuleList} from '../../../esl-media-query/core';\nimport {ESLCarouselSlide} from './esl-carousel-slide';\nimport {ESLCarouselViewRegistry} from './view/esl-carousel-view';\n\nimport type {ESLCarouselView} from './view/esl-carousel-view';\nimport type {ESLCarouselPlugin} from '../plugin/esl-carousel-plugin';\n\ninterface CarouselConfig { // Registry\n  view?: string;\n  count?: number;\n  className?: string;\n}\n\n// TODO: add ability to choose the number of an active slide\n@ExportNs('Carousel')\nexport class ESLCarousel extends ESLBaseElement {\n  public static Slide = ESLCarouselSlide;\n\n  public static is = 'esl-carousel';\n\n  static get observedAttributes() {\n    return ['config'];\n  }\n\n  @attr() public config: string;\n\n  private _configRules: ESLMediaRuleList<CarouselConfig | null>;\n  private _currentConfig: CarouselConfig = {};\n  private _view: ESLCarouselView | null;\n  private readonly _plugins = new Map<string, ESLCarouselPlugin>();\n\n  private readonly _onMatchChange: () => void;\n\n  constructor() {\n    super();\n    this._onMatchChange = this.update.bind(this, false);\n    this._onRegistryChange = this._onRegistryChange.bind(this);\n  }\n\n  get $slidesArea(): HTMLElement | null {\n    return this.querySelector('[data-slides-area]');\n  }\n\n  get $slides(): ESLCarouselSlide[] {\n    // TODO cache\n    const els = this.$slidesArea && this.$slidesArea.querySelectorAll(ESLCarouselSlide.is);\n    return els ? Array.from(els) as ESLCarouselSlide[] : [];\n  }\n\n  get count(): number {\n    return this.$slides.length || 0;\n  }\n\n  get activeIndexes(): number[] {\n    return this.$slides.reduce((activeIndexes: number[], el, index) => {\n      if (el.active) {\n        activeIndexes.push(index);\n      }\n      return activeIndexes;\n    }, []);\n  }\n\n  get activeCount(): number {\n    return this.activeConfig.count || 0;\n  }\n\n  /**\n   * @returns {number} first active index\n   */\n  get firstIndex(): number {\n    const index = this.$slides.findIndex((slide) => {\n      return slide.first;\n    });\n    return Math.max(index, 0);\n  }\n\n  get activeConfig(): CarouselConfig {\n    return this._currentConfig;\n  }\n\n  set activeConfig(config) {\n    this._currentConfig = Object.assign({}, config);\n  }\n\n  // eslint-disable-next-line sonarjs/cognitive-complexity\n  public goTo(nextIndex: number, direction?: string, force: boolean = false) {\n    if (this.dataset.isAnimated) {\n      return;\n    }\n\n    if (nextIndex < 0) {\n      nextIndex = 0;\n    }\n\n    if (this.firstIndex === nextIndex && !force) {\n      return;\n    }\n\n    if (!direction) {\n      // calculate and compare how much slides we have to go due to direction (left or right)\n      // choose less\n      // TODO: optimize\n      if (nextIndex > this.firstIndex) {\n        direction = nextIndex - this.firstIndex > (this.firstIndex - nextIndex + this.count) % this.count ? 'left' : 'right';\n      } else {\n        direction = this.firstIndex - nextIndex >= (nextIndex - this.firstIndex - nextIndex + this.count) % this.count ? 'right' : 'left';\n      }\n    }\n\n    const eventDetails = { // Todo change info\n      bubbles: true,\n      detail: {\n        direction\n      }\n    };\n\n    const approved = this.$$fire('slide:change', eventDetails);\n\n    if (this._view && approved && this.firstIndex !== nextIndex) {\n      this._view.goTo(nextIndex, direction);\n    }\n    if (this._view && approved) {\n      let i = 0;\n      this.$slides.forEach((el, index) => {\n        el._setActive(((nextIndex + this.count) % this.count <= index) && (index < (nextIndex + this.activeCount + this.count) % this.count));\n      });\n\n      while (i < this.activeCount) {\n        const computedIndex = (nextIndex + i + this.count) % this.count;\n        this.$slides[computedIndex]._setActive(true);\n        ++i;\n      }\n\n      if (this.activeConfig.view === 'multiple') {\n        this.$slides[this.firstIndex]._setFirst(false);\n        this.$slides[nextIndex]._setFirst(true);\n      }\n    }\n\n    this.$$fire('slide:changed', eventDetails);\n  }\n\n  public prev() {\n    // const nextGroup = this.getNextGroup(-1);\n    this.goTo((this.firstIndex - this.activeCount + this.count) % this.count, 'left');\n  }\n\n  public next() {\n    // const nextGroup = this.getNextGroup(1);\n    this.goTo((this.firstIndex + this.activeCount + this.count) % this.count, 'right');\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n\n    this.update(true);\n    this.goTo(this.firstIndex, '', true);\n    this._bindEvents();\n\n    ESLCarouselViewRegistry.instance.addListener(this._onRegistryChange);\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this._unbindEvents();\n\n    ESLCarouselViewRegistry.instance.removeListener(this._onRegistryChange);\n  }\n\n  private attributeChangedCallback(attrName: string, oldVal: string, newVal: string) {\n    // TODO: change observed attributes\n    if (attrName === 'config') {\n      this.configRules = ESLMediaRuleList.parse<CarouselConfig>(this.config, ESLMediaRuleList.OBJECT_PARSER);\n      this.update(true);\n    }\n  }\n\n  protected _bindEvents() {\n    this.addEventListener('click', this._onClick, false);\n  }\n\n  protected _unbindEvents() {\n    this.removeEventListener('click', this._onClick, false);\n  }\n\n  get configRules() {\n    if (!this._configRules) {\n      this.configRules = ESLMediaRuleList.parse<CarouselConfig>(this.config, ESLMediaRuleList.OBJECT_PARSER);\n    }\n    return this._configRules;\n  }\n\n  set configRules(rules: ESLMediaRuleList<CarouselConfig | null>) {\n    if (this._configRules) {\n      this._configRules.removeListener(this._onMatchChange);\n    }\n    this._configRules = rules;\n    this._configRules.addListener(this._onMatchChange);\n  }\n\n  private update(force: boolean = false) {\n    const config: CarouselConfig = Object.assign(\n      {view: 'multiple', count: 1},\n      this.configRules.activeValue\n    );\n\n    if (!force && deepCompare(this.activeConfig, config)) {\n      return;\n    }\n    this.activeConfig = config;\n\n    const viewType = this.activeConfig.view;\n    if (!viewType) return;\n\n    // TODO: somehow compare active view & selected view\n    // this._view && this._view.unbind();\n    this._view = ESLCarouselViewRegistry.instance.createViewInstance(viewType, this);\n    // this._view && this._view.bind();\n\n    if (force || this.activeIndexes.length !== this.activeConfig.count) {\n      this._view && this._view.draw();\n      // this.goTo(this.firstIndex, '', true);\n    }\n  }\n\n  private getNextGroup(shiftGroupsCount: number) {\n    // get number of group of current active slides by last index of this group\n    const lastIndex = this.activeIndexes.length - 1;\n    const currentGroup = Math.floor(this.activeIndexes[lastIndex] / this.activeCount);\n    // get count of groups of slides\n    const countGroups = Math.ceil(this.count / this.activeCount);\n    // get number of group of next active slides\n    return (currentGroup + shiftGroupsCount + countGroups) % countGroups;\n  }\n\n  // move to core plugin\n  protected _onClick(event: MouseEvent) {\n    const eventTarget: HTMLElement = event.target as HTMLElement;\n    const markedTarget: HTMLElement | null = eventTarget.closest('[data-slide-target]');\n    if (markedTarget && markedTarget.dataset.slideTarget) {\n      const target = markedTarget.dataset.slideTarget;\n      if ('prev' === target) {\n        this.prev();\n      } else if ('next' === target) {\n        this.next();\n      } else if ('g' === target[0]) {\n        const group = +(target.substr(1)) - 1;\n        const lastGroup = Math.floor(this.count / this.activeCount);\n        this.goTo(group === lastGroup ? this.count - this.activeCount : this.activeCount * group);\n      } else {\n        this.goTo(+target - 1);\n      }\n    }\n  }\n\n  protected _onRegistryChange() {\n    if (!this._view) this.update(true);\n  }\n\n  // Plugin management\n  public addPlugin(plugin: ESLCarouselPlugin) {\n    if (plugin.carousel) return;\n    this.appendChild(plugin);\n  }\n\n  public removePlugin(plugin: ESLCarouselPlugin | string | undefined) {\n    if (typeof plugin === 'string') plugin = this._plugins.get(plugin);\n    if (!plugin || plugin.carousel !== this) return;\n    plugin.parentNode && plugin.parentNode.removeChild(plugin);\n  }\n\n  public _addPlugin(plugin: ESLCarouselPlugin) {\n    if (this._plugins.has(plugin.key)) return;\n    this._plugins.set(plugin.key, plugin);\n    if (this.isConnected) plugin.bind();\n  }\n\n  public _removePlugin(plugin: ESLCarouselPlugin) {\n    if (!this._plugins.has(plugin.key)) return;\n    plugin.unbind();\n    this._plugins.delete(plugin.key);\n  }\n\n  public static register(tagName?: string) {\n    ESLCarouselSlide.register((tagName || ESLCarousel.is) + '-slide');\n    customElements.whenDefined(ESLCarouselSlide.is).then(() => super.register.call(this, tagName));\n  }\n}\n","import {Observable} from '../../../../esl-utils/abstract/observable';\n\nimport type {ESLCarousel} from '../esl-carousel';\n\nexport abstract class ESLCarouselView {\n  protected readonly carousel: ESLCarousel;\n\n  protected constructor(carousel: ESLCarousel) {\n    this.carousel = carousel; // TODO: unsafe while lifecycle is not clear\n  }\n\n  public abstract bind(): void;\n\n  public abstract draw(): void;\n\n  public abstract goTo(nextIndex: number, direction: string): void;\n\n  public abstract unbind(): void;\n}\n\nexport type ESLCarouselViewConstructor = new(carousel: ESLCarousel) => ESLCarouselView;\n\nlet eslRegistryInstance: ESLCarouselViewRegistry | null = null;\nexport class ESLCarouselViewRegistry extends Observable {\n  private registry = new Map<string, ESLCarouselViewConstructor>();\n\n  public static get instance() {\n    if (eslRegistryInstance === null) {\n      eslRegistryInstance = new ESLCarouselViewRegistry();\n    }\n    return eslRegistryInstance;\n  }\n\n  public createViewInstance(name: string, carousel: ESLCarousel): ESLCarouselView | null {\n    const View = this.registry.get(name);\n    return View ? new View(carousel) : null;\n  }\n\n  public registerView(name: string, view: ESLCarouselViewConstructor) {\n    if (this.registry.has(name)) {\n      throw new Error(`View with name ${name} already defined`);\n    }\n    this.registry.set(name, view);\n    this.fire(name, view);\n  }\n}\n","import {ESLCarouselView, ESLCarouselViewRegistry} from './esl-carousel-view';\n\nimport type {ESLCarousel} from '../esl-carousel';\n\nclass ESLMultiCarouselView extends ESLCarouselView {\n  constructor(carousel: ESLCarousel) {\n    super(carousel);\n  }\n\n  // tslint:disable-next-line:no-empty\n  public bind() {\n  }\n\n  public draw() {\n    const {$slides, $slidesArea} = this.carousel;\n    if (!$slidesArea || !$slides.length) return;\n\n    const slideStyles = getComputedStyle($slides[this.carousel.firstIndex]);\n    const currentTrans = slideStyles.transform !== 'none' ? parseFloat(slideStyles.transform.split(',')[4]) : 0;\n    const slidesAreaStyles = getComputedStyle($slidesArea);\n\n    const slideWidth = parseFloat(slidesAreaStyles.width) / this.carousel.activeCount\n      - parseFloat(slideStyles.marginLeft) - parseFloat(slideStyles.marginRight);\n    const computedLeft = this.carousel.firstIndex === 0 ?\n      -currentTrans :\n      -(parseFloat(slidesAreaStyles.width) / this.carousel.activeCount * this.carousel.firstIndex) - currentTrans;\n\n\n    $slides.forEach((slide) => {\n      slide.style.minWidth = slideWidth + 'px';\n      slide.style.left = computedLeft + 'px';\n    });\n  }\n\n  // eslint-disable-next-line sonarjs/cognitive-complexity\n  public goTo(nextIndex: number, direction: string) {\n    const slideIndex = direction === 'right' ? this.carousel.activeIndexes[0] : this.carousel.firstIndex;\n    const slideStyles = getComputedStyle(this.carousel.$slides[slideIndex]);\n    const slideWidth = parseFloat(slideStyles.width) +\n      parseFloat(slideStyles.marginLeft) +\n      parseFloat(slideStyles.marginRight);\n    const areaWidth = slideWidth * this.carousel.$slides.length;\n\n    const transitionDuration = parseFloat(slideStyles.transitionDuration) * 1000; // ms\n    const currentLeft = parseFloat(slideStyles.left);\n    const currentTrans = parseFloat(slideStyles.transform.split(',')[4]) || 0;\n\n    if (this.carousel.firstIndex === nextIndex) {\n      return 0;\n    }\n\n    let shiftCount = 0;\n    if (direction === 'left') {\n      shiftCount = (this.carousel.firstIndex - nextIndex + this.carousel.count) % this.carousel.count;\n    } else if (direction === 'right') {\n      shiftCount = (this.carousel.count - this.carousel.firstIndex + nextIndex) % this.carousel.count;\n    }\n    const direct = direction === 'left' ? -1 : 1;\n    const trans = currentTrans - (shiftCount * slideWidth) * direct;\n\n    const nextActiveIndexes: number[] = [];\n    for (let i = 0; i < this.carousel.activeCount; ++i) {\n      nextActiveIndexes.push((nextIndex + i + this.carousel.count) % this.carousel.count);\n    }\n\n    const intersectionArr = nextActiveIndexes.filter(\n      (index: number) => this.carousel.activeIndexes.includes(index)\n    );\n\n    let left = 0;\n    const animatedCount = shiftCount < this.carousel.activeCount ? this.carousel.activeCount : shiftCount;\n    for (let i = 0; i < animatedCount; ++i) {\n      const computedIndex = (nextIndex + i + this.carousel.count) % this.carousel.count;\n      const minActive = Math.min(...this.carousel.activeIndexes);\n      // make next active slides be in one line\n      if (computedIndex >= this.carousel.firstIndex && direction === 'left') {\n        left = currentLeft - areaWidth;\n      } else if (computedIndex <= minActive && direction === 'right') {\n        left = currentLeft + areaWidth;\n      } else {\n        left = currentLeft;\n      }\n\n      // exclude slides that are active now and have to be active then\n      if (!intersectionArr.includes(computedIndex)) {\n        this.carousel.$slides[computedIndex].style.left = left + 'px';\n      }\n\n      // handle slides that are active now and have to be active then\n      if (intersectionArr.includes(computedIndex)) {\n        const orderIndex = nextActiveIndexes.indexOf(computedIndex);\n        const time = (direction === 'right') ?\n          (transitionDuration / this.carousel.activeCount) * orderIndex :\n          (transitionDuration / this.carousel.activeCount) * (this.carousel.activeCount - orderIndex - 1);\n        const copyLeft = left;\n        setTimeout(() => {\n          this.carousel.$slides[computedIndex].style.left = copyLeft + 'px';\n        }, time);\n      }\n\n    }\n\n    this.carousel.$slides.forEach((slide) => {\n      // exclude slides that are active now and have to be active then\n\n      slide.style.transform = `translateX(${trans}px)`;\n\n      // handle slides that are active now and have to be active then\n      const sIndex = slide.index;\n      if (intersectionArr.includes(sIndex)) {\n        const orderIndex = nextActiveIndexes.indexOf(sIndex);\n        const time = (direction === 'right') ?\n          (transitionDuration / this.carousel.activeCount) * orderIndex :\n          (transitionDuration / this.carousel.activeCount) * (this.carousel.activeCount - orderIndex - 1);\n        setTimeout(() => {\n          this.carousel.$slides[sIndex].style.transform = `translateX(${trans}px)`;\n        }, time);\n      }\n    });\n\n    this.carousel.setAttribute('data-is-animated', 'true');\n\n    setTimeout(() => {\n      this.carousel.removeAttribute('data-is-animated');\n    }, transitionDuration);\n\n  }\n\n  public unbind() {\n    this.carousel.$slides.forEach((el) => {\n      el.style.transform = 'none';\n      el.style.left = 'none';\n    });\n  }\n}\n\nESLCarouselViewRegistry.instance.registerView('multiple', ESLMultiCarouselView);\n","import {ESLCarouselView, ESLCarouselViewRegistry} from './esl-carousel-view';\n\nimport type {ESLCarousel} from '../esl-carousel';\n\nclass ESLSingleCarouselView extends ESLCarouselView {\n\n  constructor(carousel: ESLCarousel) {\n    super(carousel);\n  }\n\n  public bind() {}\n\n  // TODO: check\n  public draw() {\n    const {$slides, $slidesArea} = this.carousel;\n    if (!$slidesArea || !$slides.length) return;\n\n    const slideStyles = getComputedStyle($slides[this.carousel.firstIndex]);\n    const slidesAreaStyles = getComputedStyle($slidesArea);\n\n    const slideWidth = parseFloat(slidesAreaStyles.width) - parseFloat(slideStyles.marginLeft) - parseFloat(slideStyles.marginRight);\n    const computedLeft = -(parseFloat(slidesAreaStyles.width) / this.carousel.firstIndex);\n\n    $slides.forEach((slide) => {\n      slide.style.minWidth = slideWidth + 'px';\n      slide.style.left = computedLeft + 'px';\n    });\n  }\n\n  public goTo(nextIndex: number, direction: string) {\n    if (this.carousel.firstIndex === nextIndex) {\n      return;\n    }\n\n    this.carousel.setAttribute('data-is-animated', 'true');\n    this.carousel.setAttribute('direction', direction);\n\n    const activeSlide = this.carousel.$slides[this.carousel.firstIndex];\n    const nextSlide = this.carousel.$slides[nextIndex];\n\n    activeSlide.classList.add(direction);\n    nextSlide.classList.add(direction);\n\n    activeSlide.classList.add('prev');\n\n    activeSlide.addEventListener('animationend', (e) => this._cleanAnimation(e));\n    nextSlide.addEventListener('animationend', (e) => this._cleanAnimation(e));\n  }\n\n  private _cleanAnimation(event: Event) {\n    const target = event.target as HTMLElement;\n    const direction = this.carousel.getAttribute('direction');\n\n    direction && target.classList.remove(direction);\n    target.classList.remove('prev');\n\n    this.carousel.removeAttribute('data-is-animated');\n  }\n\n  // tslint:disable-next-line:no-empty\n  public unbind() {\n  }\n}\n\nESLCarouselViewRegistry.instance.registerView('single', ESLSingleCarouselView);\n","import {ExportNs} from '../../../esl-utils/environment/export-ns';\nimport {attr} from '../../../esl-base-element/core';\nimport {ESLCarouselPlugin} from './esl-carousel-plugin';\n\n/**\n * Slide Carousel Autoplay (Auto-Advance) plugin\n * Automatically switch slides by timeout\n *\n * @author Alexey Stsefanovich (ala'n)\n */\n@ExportNs('CarouselPlugins.Autoplay')\nexport class ESLCarouselAutoplayPlugin extends ESLCarouselPlugin {\n  public static is = 'esl-carousel-autoplay-plugin';\n\n  @attr({defaultValue: 'next'}) public direction: string;\n  @attr({defaultValue: '5000'}) public timeout: number;\n\n  private _active: boolean;\n  private _timeout: number | null = null;\n\n  constructor() {\n    super();\n    this._onInterval = this._onInterval.bind(this);\n    this._onInteract = this._onInteract.bind(this);\n  }\n\n  public get active() {\n    return this._active;\n  }\n\n  public bind(): void {\n    this.carousel.addEventListener('mouseover', this._onInteract);\n    this.carousel.addEventListener('mouseout', this._onInteract);\n    this.carousel.addEventListener('focusin', this._onInteract);\n    this.carousel.addEventListener('focusout', this._onInteract);\n    this.carousel.addEventListener('esl:slide:changed', this._onInteract);\n    this.start();\n    // console.log('Auto-advance plugin attached successfully to ', this.carousel);\n  }\n  public unbind(): void {\n    this.carousel.removeEventListener('mouseover', this._onInteract);\n    this.carousel.removeEventListener('mouseout', this._onInteract);\n    this.carousel.removeEventListener('focusin', this._onInteract);\n    this.carousel.removeEventListener('focusout', this._onInteract);\n    this.carousel.removeEventListener('esl:slide:changed', this._onInteract);\n    this.stop();\n    // console.log('Auto-advance plugin detached successfully from ', this.carousel);\n  }\n\n  public start() {\n    this._active = true;\n    this.reset();\n  }\n  public stop() {\n    this._active = false;\n    this.reset();\n  }\n\n  public reset() {\n    if (typeof this._timeout === 'number') clearTimeout(this._timeout);\n    this._timeout = this._active ? window.setTimeout(this._onInterval, this.timeout) : null;\n  }\n\n  protected _onInterval() {\n    if (!this._active) return;\n    switch (this.direction) {\n      case 'next':\n        this.carousel.next();\n        return;\n      case 'prev':\n        this.carousel.prev();\n        return;\n    }\n    this.reset();\n  }\n\n  protected _onInteract(e: Event) {\n    switch (e.type) {\n      case 'mouseover':\n      case 'focusin':\n        this.stop();\n        return;\n      case 'mouseout':\n      case 'focusout':\n        this.start();\n        return;\n      case 'esl:slide:changed':\n        this.reset();\n        return;\n    }\n  }\n}\n","import {ExportNs} from '../../../esl-utils/environment/export-ns';\nimport {ESLCarouselPlugin} from './esl-carousel-plugin';\n\n/**\n * Slide Carousel Dots plugin\n * Dots plugin renders carousel dots navigation\n *\n * @author Julia Murashko\n */\n@ExportNs('CarouselPlugins.Dots')\nexport class ESLCarouselDotsPlugin extends ESLCarouselPlugin {\n  public static is = 'esl-carousel-dots';\n  public static freePlacement = true;\n\n  private _onUpdate = () => this.rerender();\n\n  public bind() {\n    this.rerender();\n    this.carousel.addEventListener('esl:slide:changed', this._onUpdate);\n  }\n\n  public unbind() {\n    this.innerHTML = '';\n    this.carousel.removeEventListener('esl:slide:changed', this._onUpdate);\n  }\n\n  public rerender() {\n    let html = '';\n    const activeDot = Math.floor(this.carousel.activeIndexes[this.carousel.activeCount - 1] / this.carousel.activeCount);\n    for (let i = 0; i < Math.ceil(this.carousel.count / this.carousel.activeCount); ++i) {\n      html += this.buildDot(i, i === activeDot);\n    }\n    this.innerHTML = html;\n  }\n\n  public buildDot(index: number, isActive: boolean) {\n    return `<button role=\"button\" class=\"carousel-dot ${isActive ? 'active-dot' : ''}\" data-slide-target=\"g${index + 1}\"></button>`;\n  }\n}\n","import {ExportNs} from '../../../esl-utils/environment/export-ns';\nimport {attr} from '../../../esl-base-element/core';\nimport {ESLCarousel} from '../core/esl-carousel';\nimport {ESLCarouselPlugin} from './esl-carousel-plugin';\n\n/**\n * Slide Carousel Link plugin. Allows to bind carousel positions.\n */\n@ExportNs('CarouselPlugins.Link')\nexport class ESLCarouselLinkPlugin extends ESLCarouselPlugin {\n  public static is = 'esl-carousel-link-plugin';\n\n  public static get observedAttributes() {\n    return ['to', 'direction'];\n  }\n\n  @attr() public to: string;\n  @attr({defaultValue: 'both'}) public direction: string;\n\n  private _target: ESLCarousel | null;\n\n  constructor() {\n    super();\n    this._onSlideChange = this._onSlideChange.bind(this);\n  }\n\n  public bind() {\n    if (!this.target) {\n      this.target = document.querySelector(this.to);\n    }\n    if (!(this.target instanceof ESLCarousel)) return;\n\n    if (this.direction === 'both' || this.direction === 'reverse') {\n      this.target.addEventListener('esl:slide:changed', this._onSlideChange);\n    }\n    if (this.direction === 'both' || this.direction === 'target') {\n      this.carousel.addEventListener('esl:slide:changed', this._onSlideChange);\n    }\n  }\n\n  public unbind() {\n    this.target && this.target.removeEventListener('esl:slide:changed', this._onSlideChange);\n    this.carousel && this.carousel.removeEventListener('esl:slide:changed', this._onSlideChange);\n  }\n\n  protected _onSlideChange(e: CustomEvent) {\n    if (!this.target || !this.carousel) return;\n    const $target = e.target === this.carousel ? this.target : this.carousel;\n    const $source = e.target === this.carousel ? this.carousel : this.target;\n    $target.goTo($source.firstIndex, e.detail.direction);\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string, newVal: string) {\n    if (this.carousel && oldVal !== newVal) {\n      this.unbind();\n      if (attrName === 'to') {\n        this._target = null;\n      }\n      this.bind();\n    }\n  }\n\n  get target() {\n    return this._target;\n  }\n  set target(target) {\n    this._target = target;\n  }\n}\n","import {ESLBaseElement} from '../../../esl-base-element/core';\nimport {ESLCarousel} from '../core/esl-carousel';\n\n/**\n * {@link ESLCarousel} Plugin base class.\n * The ESL Carousel Plugin should have the dom representation so it's {@extends HTMLElement}.\n * Use the attributes to path the plugin options, the same as with any custom elements.\n * @abstract\n */\nexport abstract class ESLCarouselPlugin extends ESLBaseElement {\n  /**\n   * {boolean} freePlacement marker define the restriction for the plugin placement.\n   * If freePlacement is false - plugin element should be child of ESLCarousel element.\n   * If freePlacement is true - plugin can be placed anywhere inside of carousel.\n   */\n  public static freePlacement = false;\n\n  /**\n   * @returns carousel owner of the plugin\n   */\n  protected findCarouselOwner(): ESLCarousel | null {\n    if ((this.constructor as typeof ESLCarouselPlugin).freePlacement) {\n      return this.closest(ESLCarousel.is);\n    } else {\n      return this.parentNode as ESLCarousel;\n    }\n  }\n\n  private _carousel?: ESLCarousel;\n\n  /**\n   * @returns {string} plugin unique key, ESLCarousel can not own more then one plugin with the same key\n   */\n  public get key() {\n    return this.nodeName.toLowerCase();\n  }\n  /**\n   * @returns {ESLCarousel} owner of plugin\n   */\n  public get carousel(): ESLCarousel {\n    return this._carousel as ESLCarousel;\n  }\n\n  protected connectedCallback() {\n    const carousel = this.findCarouselOwner();\n    if (carousel instanceof ESLCarousel) {\n      this._carousel = carousel;\n      this._carousel._addPlugin(this);\n    } else {\n      throw new Error('Invalid esl-carousel-plugin placement: plugin element should be placed under the esl-carousel node');\n    }\n  }\n  protected disconnectedCallback() {\n    if (this.carousel) {\n      this.carousel._removePlugin(this);\n      delete this._carousel;\n    }\n  }\n\n  /**\n   * Define the plugin bind lifecycle hook.\n   * Unlike {@link connectedCallback}, bind is called by owner ESL Carousel when the plugin can be attached.\n   */\n  public abstract bind(): void;\n\n  /**\n   * Define the plugin unbind lifecycle hook.\n   * Unlike {@link disconnectedCallback}, unbind is called by owner ESL Carousel when the plugin should be detached.\n   */\n  public abstract unbind(): void;\n\n  public static register(tagName?: string) {\n    customElements.whenDefined(ESLCarousel.is).then(() => super.register.call(this, tagName));\n  }\n}\n","import {ExportNs} from '../../../esl-utils/environment/export-ns';\nimport {DeviceDetector} from '../../../esl-utils/environment/device-detector';\nimport {EventUtils} from '../../../esl-utils/dom/events';\nimport {ESLCarouselPlugin} from './esl-carousel-plugin';\n\nimport type {Point} from '../../../esl-utils/dom/events';\n\n/**\n * Slide Carousel Touch plugin\n */\n@ExportNs('CarouselPlugins.Touch')\nexport class ESLCarouselTouchPlugin extends ESLCarouselPlugin {\n  public static is = 'esl-carousel-touch-plugin';\n\n  private isTouchStarted = false;\n  private startPoint: Point = {x: 0, y: 0};\n\n  public bind() {\n    const events = DeviceDetector.TOUCH_EVENTS;\n\n    this.carousel.addEventListener(events.START, this.onTouchStart);\n    this.carousel.addEventListener(events.MOVE, this.onTouchMove);\n    this.carousel.addEventListener(events.END, this.onTouchEnd);\n  }\n\n  public unbind() {\n    const events = DeviceDetector.TOUCH_EVENTS;\n\n    this.carousel.removeEventListener(events.START, this.onTouchStart);\n    this.carousel.removeEventListener(events.MOVE, this.onTouchMove);\n    this.carousel.removeEventListener(events.END, this.onTouchEnd);\n  }\n\n  onTouchStart = (event: TouchEvent | PointerEvent) => {\n    // TODO: precondition for focused element ?\n    if ((event instanceof TouchEvent && event.touches.length !== 1) ||\n      (event instanceof PointerEvent && event.pointerType !== 'touch')) {\n      this.isTouchStarted = false;\n      return;\n    }\n    this.isTouchStarted = true;\n    this.startPoint = EventUtils.normalizeTouchPoint(event);\n  };\n\n  onTouchMove = (event: TouchEvent | PointerEvent) => {\n    if (!this.isTouchStarted) return;\n    // const point = EventUtils.normalizeTouchPoint(event);\n    // const offset = {\n    // \tx: point.x - this.startPoint.x,\n    // \ty: point.y - this.startPoint.y\n    // };\n  };\n\n  onTouchEnd = (event: TouchEvent | PointerEvent) => {\n    if (!this.isTouchStarted) return;\n    const point = EventUtils.normalizeTouchPoint(event);\n    const offset = {\n      x: point.x - this.startPoint.x,\n      y: point.y - this.startPoint.y\n    };\n    this.isTouchStarted = false;\n\n    // TODO: temporary, update according final implementation\n    if (Math.abs(offset.x) < Math.abs(offset.y)) return; // Direction\n    if (Math.abs(offset.x) < 100) return; // Tolerance\n\n    // Swipe gesture example\n    if (offset.x < 0) {\n      this.carousel.next();\n    } else {\n      this.carousel.prev();\n    }\n    event.preventDefault();\n    event.stopPropagation();\n  };\n}\n","import {ExportNs} from '../../esl-utils/environment/export-ns';\nimport {ESLBaseElement, attr, boolAttr} from '../../esl-base-element/core';\nimport {TraversingQuery} from '../../esl-traversing-query/core';\nimport {bind} from '../../esl-utils/decorators/bind';\nimport {ARROW_DOWN, ARROW_LEFT, ARROW_RIGHT, ARROW_UP} from '../../esl-utils/dom/keys';\n\n/** Relative targeting type definition */\nexport type GroupTarget = 'next' | 'prev' | 'current';\n\n/**\n * ESLA11yGroup component\n * @author Julia Murashko\n *\n * ESLA11yGroup - helper custom element that adds a11y group behavior to targets.\n */\n@ExportNs('A11yGroup')\nexport class ESLA11yGroup extends ESLBaseElement {\n  public static is = 'esl-a11y-group';\n\n  /** Target elements multiple selector ({@link TraversingQuery} syntax) */\n  @attr({defaultValue: '::child'}) public targets: string;\n  /** Activate target (via click event) on selection */\n  @boolAttr({}) public activateSelected: boolean;\n\n  /** @returns {HTMLElement} root element of the group */\n  public get $root(): HTMLElement {\n    return this.parentElement as HTMLElement;\n  }\n  /** @returns {HTMLElement[]} targets of the group */\n  public get $targets(): HTMLElement[] {\n    return TraversingQuery.all(this.targets, this.$root) as [];\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.bindEvents();\n  }\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.unbindEvents();\n  }\n\n  protected bindEvents() {\n    this.$root.addEventListener('keydown', this._onKeydown);\n  }\n  protected unbindEvents() {\n    this.$root.removeEventListener('keydown', this._onKeydown);\n  }\n\n  @bind\n  protected _onKeydown(e: KeyboardEvent) {\n    const target = e.target as HTMLElement;\n\n    if (!this.$targets.includes(target)) return;\n\n    if ([ARROW_UP, ARROW_LEFT].includes(e.key)) {\n      this.goTo('prev', target);\n      e.preventDefault();\n    }\n\n    if ([ARROW_DOWN, ARROW_RIGHT].includes(e.key)) {\n      this.goTo('next', target);\n      e.preventDefault();\n    }\n  }\n\n  /** Go to the target from the passed element or currently focused target by default */\n  public goTo(target: GroupTarget, from: HTMLElement | null = this.current()) {\n    if (!from) return;\n    const targetEl = this[target](from);\n    if (!targetEl) return;\n    targetEl.focus();\n    this.activateSelected && targetEl.click();\n  }\n\n  /** @returns {HTMLElement} next target fot trigger */\n  public next(trigger: HTMLElement) {\n    const triggers = this.$targets;\n    const index = triggers.indexOf(trigger);\n    return triggers[(index + 1) % triggers.length];\n  }\n\n  /** @returns {HTMLElement} previous target fot trigger */\n  public prev(trigger: HTMLElement): HTMLElement | undefined {\n    const triggers = this.$targets;\n    const index = triggers.indexOf(trigger);\n    return triggers[(index - 1 + triggers.length) % triggers.length];\n  }\n\n  /** @returns {HTMLElement} currently focused element from targets */\n  public current(): HTMLElement | null {\n    const $active = document.activeElement as HTMLElement;\n    return this.$targets.includes($active) ? $active : null;\n  }\n}\n","import {ExportNs} from '../../esl-utils/environment/export-ns';\nimport {bind} from '../../esl-utils/decorators/bind';\nimport {attr, jsonAttr} from '../../esl-base-element/core';\nimport {ESLToggleable} from '../../esl-toggleable/core';\nimport {DeviceDetector} from '../../esl-utils/environment/device-detector';\nimport {CSSClassUtils} from '../../esl-utils/dom/class';\nimport {createZIndexIframe} from '../../esl-utils/fixes/ie-fixes';\nimport {TraversingQuery} from '../../esl-traversing-query/core';\n\nimport type {ToggleableActionParams} from '../../esl-toggleable/core';\n\nexport interface AlertActionParams extends ToggleableActionParams {\n  /** text to be shown; pass empty string or null to hide */\n  text?: string;\n  /** html content */\n  html?: string;\n  /** classes to add to alert element */\n  cls?: string;\n  /** timeout to clear classes */\n  hideTime?: number;\n}\n\n/**\n * ESLAlert component\n *\n * @author Julia Murashko\n *\n * ESLAlert is a component to show small notifications on your pages. ESLAlert can have multiple instances on the page.\n */\n@ExportNs('Alert')\nexport class ESLAlert extends ESLToggleable {\n  static is = 'esl-alert';\n  static eventNs = 'esl:alert';\n\n  static get observedAttributes() {\n    return ['target'];\n  }\n\n  /** Default show/hide params for all ESLAlert instances */\n  static defaultConfig: AlertActionParams = {\n    hideTime: 300,\n    hideDelay: 2500\n  };\n\n  /** Define the scope (using {@link TraversingQuery} syntax) element to listen to activation event. Parent element by default */\n  @attr({defaultValue: '::parent'}) public target: string;\n\n  /** Default show/hide params for current ESLAlert instance */\n  @jsonAttr<AlertActionParams>()\n  public defaultParams: AlertActionParams;\n\n  protected $content: HTMLElement;\n  protected activeCls?: string;\n\n  private _$target: EventTarget;\n  private _clearTimeout: number;\n\n  /** Create global alert instance (using body element as a base) */\n  public static init() {\n    if (document.querySelector(`body > ${ESLAlert.is}`)) return;\n    const alert = document.createElement(ESLAlert.is) as ESLAlert;\n    document.body.appendChild(alert);\n  }\n\n  protected mergeDefaultParams(params?: ToggleableActionParams): ToggleableActionParams {\n    const type = this.constructor as typeof ESLAlert;\n    return Object.assign({}, type.defaultConfig, this.defaultParams || {}, params || {});\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string, newVal: string) {\n    if (!this.connected) return;\n    if (attrName === 'target') {\n      this.$target = TraversingQuery.first(this.target) as EventTarget;\n    }\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.setAttribute('role', this.getAttribute('role') || 'alert');\n    this.$content = document.createElement('div');\n    this.$content.className = 'esl-alert-content';\n    this.innerHTML = '';\n    this.appendChild(this.$content);\n    if (DeviceDetector.isIE) this.appendChild(createZIndexIframe());\n    if (this.target) {\n      this.$target = TraversingQuery.first(this.target, this) as EventTarget;\n    }\n  }\n\n  protected unbindEvents() {\n    super.unbindEvents();\n    this.unbindTargetEvents();\n  }\n\n  /** Target element to listen to activation events */\n  public get $target() {\n    return this._$target;\n  }\n  public set $target($el: EventTarget) {\n    this.unbindTargetEvents();\n    this._$target = $el;\n    this.bindTargetEvents();\n  }\n\n  protected bindTargetEvents() {\n    if (!this.$target || !this.connected) return;\n    this.$target.addEventListener(`${ESLAlert.eventNs}:show`, this._onTargetEvent);\n    this.$target.addEventListener(`${ESLAlert.eventNs}:hide`, this._onTargetEvent);\n  }\n  protected unbindTargetEvents() {\n    if (!this.$target) return;\n    this.$target.removeEventListener(`${ESLAlert.eventNs}:show`, this._onTargetEvent);\n    this.$target.removeEventListener(`${ESLAlert.eventNs}:hide`, this._onTargetEvent);\n  }\n\n  protected onShow(params: AlertActionParams) {\n    if (this._clearTimeout) window.clearTimeout(this._clearTimeout);\n    if (params.html || params.text) {\n      this.render(params);\n      super.onShow(params);\n    }\n    this.hide(params);\n  }\n  protected onHide(params: AlertActionParams) {\n    super.onHide(params);\n    this._clearTimeout = window.setTimeout(() => this.clear(), params.hideTime);\n  }\n\n  protected render({text, html, cls}: AlertActionParams) {\n    CSSClassUtils.remove(this, this.activeCls);\n    CSSClassUtils.add(this, this.activeCls = cls);\n    if (html) this.$content.innerHTML = html;\n    if (text) this.$content.textContent = text;\n  }\n  protected clear() {\n    this.$content.innerHTML = '';\n    CSSClassUtils.remove(this, this.activeCls);\n  }\n\n  @bind\n  protected _onTargetEvent(e: CustomEvent) {\n    if (e.type === `${ESLAlert.eventNs}:show`) {\n      const params = Object.assign({}, e.detail, {force: true});\n      this.show(params);\n    }\n    if (e.type === `${ESLAlert.eventNs}:hide`) {\n      const params = Object.assign({}, {hideDelay: 0}, e.detail, {force: true});\n      this.hide(params);\n    }\n    e.stopPropagation();\n  }\n}\n","import {EventUtils} from '../../esl-utils/dom/events';\n\n/**\n * Base class for ESL custom elements.\n * Allows to define custom element with the optional custom tag name.\n */\nexport abstract class ESLBaseElement extends HTMLElement {\n  /** Custom element tag name */\n  public static is = '';\n\n  protected _connected: boolean = false;\n\n  protected connectedCallback() {\n    this._connected = true;\n    this.classList.add((this.constructor as typeof ESLBaseElement).is);\n  }\n  protected disconnectedCallback() {\n    this._connected = false;\n  }\n\n  /** Check that the element is connected and `connectedCallback` has been executed */\n  public get connected() {\n    return this._connected;\n  }\n\n  /**\n   * Dispatch component custom event.\n   * Uses 'esl:' prefix for event name, overridable to customize event namespaces.\n   * @param eventName - event name\n   * @param [eventInit] - custom event init. See {@link CustomEventInit}\n   */\n  public $$fire(eventName: string, eventInit?: CustomEventInit): boolean {\n    return EventUtils.dispatch(this, 'esl:' + eventName, eventInit);\n  }\n\n  /**\n   * Register component in the {@link customElements} registry\n   * @param [tagName] - custom tag name to register custom element\n   */\n  public static register(this: typeof ESLBaseElement, tagName?: string) {\n    tagName = tagName || this.is;\n    if (!tagName) throw new Error('Can not define custom element');\n    const constructor = customElements.get(tagName);\n    if (constructor) {\n      if (constructor.is !== tagName) throw new Error('Element declaration tag inconsistency');\n      return;\n    }\n    if (this.is !== tagName) {\n      this.is = tagName;\n    }\n    customElements.define(tagName, this as any as CustomElementConstructor);\n  }\n\n  public static get registered() {\n    return customElements.whenDefined(this.is);\n  }\n}\n","import {toKebabCase} from '../../esl-utils/misc/format';\nimport type {ESLBaseElement} from '../core/esl-base-element';\n\n/** HTML attribute mapping configuration */\ntype AttrDescriptor = {\n  /** HTML attribute name. Uses kebab-cased variable name by default */\n  name?: string;\n  /** Create getter only */\n  readonly?: boolean;\n  /** Use data-* attribute */\n  dataAttr?: boolean;\n  /** Default property value. Used if no attribute is present on the element. Empty string by default. */\n  defaultValue?: string | boolean | null;\n};\n\nfunction buildSimpleDescriptor(attrName: string, readOnly: boolean, defaultValue: string | boolean | null | undefined) {\n  function get() {\n    const value = this.getAttribute(attrName);\n    return typeof value === 'string' ? value : defaultValue;\n  }\n\n  function set(value: string | boolean | null | undefined) {\n    if (value === undefined || value === null || value === false) {\n      this.removeAttribute(attrName);\n    } else {\n      this.setAttribute(attrName, value === true ? '' : value);\n    }\n  }\n\n  return readOnly ? {get} : {get, set};\n}\n\nconst buildAttrName =\n  (propName: string, dataAttr: boolean) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n\n/**\n * Decorator to map current property to element attribute value.\n * Maps string type property.\n * @param [config] - mapping configuration. See {@link AttrDescriptor}\n */\nexport const attr = (config: AttrDescriptor = {}) => {\n  config = Object.assign({defaultValue: ''}, config);\n  return (target: ESLBaseElement, propName: string) => {\n    const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n    Object.defineProperty(target, propName, buildSimpleDescriptor(attrName, !!config.readonly, config.defaultValue));\n  };\n};\n","import {toKebabCase} from '../../esl-utils/misc/format';\nimport type {ESLBaseElement} from '../core/esl-base-element';\n\n/** HTML boolean (marker) attribute mapping configuration */\ntype BoolAttrDescriptor = {\n  /** HTML attribute name. Uses kebab-cased variable name by default */\n  name?: string;\n  /** Create getter only */\n  readonly?: boolean;\n  /** Use data-* attribute */\n  dataAttr?: boolean;\n};\n\nfunction buildConditionalDescriptor(attrName: string, readOnly: boolean) {\n  function get() {\n    return this.hasAttribute(attrName);\n  }\n\n  function set(value: boolean) {\n    this.toggleAttribute(attrName, value);\n  }\n\n  return readOnly ? {get} : {get, set};\n}\n\nconst buildAttrName =\n  (propName: string, dataAttr: boolean) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n\n/**\n * Decorator to map current property to element boolean (marker) attribute state.\n * Maps boolean type property.\n * @param [config] - mapping configuration. See {@link BoolAttrDescriptor}\n */\nexport const boolAttr = (config: BoolAttrDescriptor = {}) => {\n  return (target: ESLBaseElement, propName: string) => {\n    const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n    Object.defineProperty(target, propName, buildConditionalDescriptor(attrName, !!config.readonly));\n  };\n};\n","import {toKebabCase, evaluate} from '../../esl-utils/misc/format';\nimport type {ESLBaseElement} from '../core/esl-base-element';\n\n/** HTML attribute to object property mapping configuration */\ninterface JsonAttrDescriptor<T> {\n  /** HTML attribute name. Uses kebab-cased variable name by default */\n  name?: string;\n  /** Create getter only */\n  readonly?: boolean;\n  /** Use data-* attribute */\n  dataAttr?: boolean;\n  /** Default property value. Used if no attribute is present on the element. Empty string by default. */\n  defaultValue?: T;\n}\n\nfunction buildJsonAttrDescriptor<T>(attrName: string, readOnly: boolean, defaultValue: T | null) {\n  function get() {\n    const attrContent = (this.getAttribute(attrName) || '').trim();\n    return evaluate(attrContent, defaultValue);\n  }\n\n  function set(value: any) {\n    if (typeof value !== 'object') {\n      console.error('Can not set json value: value should be object');\n    }\n    try {\n      if (value) {\n        const serializedValue = JSON.stringify(value);\n        this.setAttribute(attrName, serializedValue);\n      } else {\n        this.removeAttribute(attrName);\n      }\n    } catch (e) {\n      console.error('[ESL] jsonAttr: Can not set json value ', e);\n    }\n  }\n\n  return readOnly ? {get} : {get, set};\n}\n\nconst buildAttrName =\n  (propName: string, dataAttr: boolean) => dataAttr ? `data-${toKebabCase(propName)}` : toKebabCase(propName);\n\n/**\n * Decorator to map current property to element attribute value using JSON (de-)serialization rules.\n * Maps object type property.\n * @param [config] - mapping configuration. See {@link JsonAttrDescriptor}\n */\nexport const jsonAttr = <T>(config: JsonAttrDescriptor<T> = {}) => {\n  config = Object.assign({defaultValue: {}}, config);\n  return (target: ESLBaseElement, propName: string) => {\n    const attrName = buildAttrName(config.name || propName, !!config.dataAttr);\n    Object.defineProperty(target, propName, buildJsonAttrDescriptor(attrName, !!config.readonly, config.defaultValue));\n  };\n};\n","import {attr, boolAttr, ESLBaseElement} from '../../../esl-base-element/core';\nimport {ExportNs} from '../../../esl-utils/environment/export-ns';\n\nimport type {ESLSelectOption} from './esl-select-wrapper';\n\n/**\n * ESLSelectItem component\n * @author Alexey Stsefanovich (ala'n)\n *\n * ESLSelectItem - inner component to render an option\n */\n@ExportNs('SelectItem')\nexport class ESLSelectItem extends ESLBaseElement {\n  public static readonly is: string = 'esl-select-item';\n\n  public static get observedAttributes() {\n    return ['selected', 'disabled'];\n  }\n\n  /** Option value */\n  @attr() public value: string;\n  /** Selected state marker */\n  @boolAttr() public selected: boolean;\n  /** Disabled state marker */\n  @boolAttr() public disabled: boolean;\n\n  /** Original option */\n  public original: ESLSelectOption;\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.tabIndex = 0;\n    this.setAttribute('role', 'checkbox');\n    this.setAttribute('aria-selected', String(this.selected));\n  }\n\n  protected attributeChangedCallback(attrName: string) {\n    if (attrName === 'selected') {\n      this.setAttribute('aria-selected', String(this.selected));\n    }\n    if (attrName === 'disabled') {\n      this.setAttribute('aria-disabled', String(this.disabled));\n    }\n  }\n\n  public update(option?: ESLSelectOption) {\n    if (option) this.original = option;\n    this.value = this.original.value;\n    this.disabled = this.original.disabled;\n    this.selected = this.original.selected;\n    this.textContent = this.original.text;\n  }\n\n  /** Helper to create an option item */\n  public static build(option: ESLSelectOption) {\n    const item = document.createElement(ESLSelectItem.is) as ESLSelectItem;\n    item.update(option);\n    return item;\n  }\n}\n","import {attr, boolAttr} from '../../../esl-base-element/core';\nimport {bind} from '../../../esl-utils/decorators/bind';\nimport {ARROW_DOWN, ARROW_UP, ENTER, SPACE} from '../../../esl-utils/dom/keys';\nimport {ExportNs} from '../../../esl-utils/environment/export-ns';\nimport {ESLScrollbar} from '../../../esl-scrollbar/core';\nimport {ESLSelectItem} from './esl-select-item';\nimport {ESLSelectWrapper} from './esl-select-wrapper';\n\n/**\n * ESLSelectList component\n * @author Alexey Stsefanovich (ala'n)\n *\n * ESLSelectList is a component to show selectable list of items. Decorates native HTMLSelectElement\n */\n@ExportNs('SelectList')\nexport class ESLSelectList extends ESLSelectWrapper {\n  public static readonly is = 'esl-select-list';\n  public static get observedAttributes() {\n    return ['select-all-label', 'disabled'];\n  }\n\n  public static register() {\n    ESLSelectItem.register();\n    super.register();\n  }\n\n  /** Select all options text */\n  @attr({defaultValue: 'Select All'}) public selectAllLabel: string;\n\n  /** Disabled state marker */\n  @boolAttr() public disabled: boolean;\n  /** Marker for selecting items to be pinned to the top of the list */\n  @boolAttr() public pinSelected: boolean;\n\n  protected $items: ESLSelectItem[];\n  protected $list: HTMLDivElement;\n  protected $scroll: ESLScrollbar;\n  protected $selectAll: ESLSelectItem;\n\n  constructor() {\n    super();\n    this.$list = document.createElement('div');\n    this.$list.setAttribute('role', 'list');\n    this.$list.classList.add('esl-scrollable-content');\n    this.$list.classList.add('esl-select-list-container');\n    this.$scroll = document.createElement(ESLScrollbar.is) as ESLScrollbar;\n    this.$scroll.target = '::prev';\n    this.$selectAll = document.createElement(ESLSelectItem.is) as ESLSelectItem;\n    this.$selectAll.classList.add('esl-select-all-item');\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string, newVal: string) {\n    if (!this.connected || newVal === oldVal) return;\n    if (attrName === 'select-all-label') {\n      this.$selectAll.textContent = newVal;\n    }\n    if (attrName === 'disabled') {\n      this._updateDisabled();\n    }\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n\n    this.appendChild(this.$selectAll);\n    this.appendChild(this.$list);\n    this.appendChild(this.$scroll);\n\n    this.bindSelect();\n    this.bindEvents();\n\n    this._updateDisabled();\n  }\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this.appendChild(this.$selectAll);\n    this.appendChild(this.$list);\n    this.appendChild(this.$scroll);\n\n    this.unbindEvents();\n  }\n\n  protected bindSelect() {\n    const target = this.querySelector('[esl-select-target]') as HTMLSelectElement;\n    if (!target || !(target instanceof HTMLSelectElement)) return;\n    this.$select = target;\n  }\n\n  public bindEvents() {\n    if (!this.$select) return;\n    this.addEventListener('click', this._onClick);\n    this.addEventListener('keydown', this._onKeydown);\n  }\n  public unbindEvents() {\n    if (!this.$select) return;\n    this.removeEventListener('click', this._onClick);\n    this.removeEventListener('keydown', this._onKeydown);\n  }\n\n  protected _renderItems() {\n    if (!this.$select) return;\n    this.$list.innerHTML = '';\n    this.$items = this.options.map(ESLSelectItem.build);\n    if (this.pinSelected) {\n      this._renderGroup(this.$items.filter((option) => option.selected));\n      this._renderGroup(this.$items.filter((option) => !option.selected));\n    } else {\n      this._renderGroup(this.$items);\n    }\n    this.toggleAttribute('multiple', this.multiple);\n  }\n  protected _renderGroup(items: ESLSelectItem[]) {\n    items.forEach((item) => this.$list.appendChild(item));\n    const [last] = items.slice(-1);\n    last && last.classList.add('last-in-group');\n  }\n\n  protected _updateSelectAll() {\n    if (!this.multiple) {\n      this.$selectAll.removeAttribute('tabindex');\n      return;\n    }\n    this.$selectAll.tabIndex = 0;\n    this.$selectAll.selected = this.isAllSelected();\n    this.$selectAll.textContent = this.selectAllLabel;\n  }\n  protected _updateDisabled() {\n    this.setAttribute('aria-disabled', String(this.disabled));\n    if (!this.$select) return;\n    this.$select.disabled = this.disabled;\n  }\n\n  @bind\n  protected _onTargetChange(newTarget: HTMLSelectElement | undefined, oldTarget: HTMLSelectElement | undefined) {\n    super._onTargetChange(newTarget, oldTarget);\n    this._updateSelectAll();\n    this._renderItems();\n\n    this.bindEvents();\n  }\n\n  @bind\n  public _onChange() {\n    this._updateSelectAll();\n    this.$items.forEach((item) => item.update());\n  }\n\n  @bind\n  public _onListChange() {\n    this._renderItems();\n  }\n\n  @bind\n  protected _onClick(e: MouseEvent | KeyboardEvent) {\n    if (this.disabled) return;\n    const target = e.target;\n    if (!target || !(target instanceof ESLSelectItem)) return;\n    if (target.classList.contains('esl-select-all-item')) {\n      this.setAllSelected(!target.selected);\n    } else {\n      this.setSelected(target.value, !target.selected);\n    }\n  }\n\n  @bind\n  protected _onKeydown(e: KeyboardEvent) {\n    if ([ENTER, SPACE].includes(e.key)) {\n      this._onClick(e);\n      e.preventDefault();\n    }\n    if ([ARROW_UP, ARROW_DOWN].includes(e.key)) {\n      const index = this.$items.indexOf(document.activeElement as ESLSelectItem);\n      const count = this.$items.length;\n      const increment = e.key === ARROW_UP ? -1 : 1;\n      if (index === -1) return;\n      this.$items[(index + increment + count) % count].focus();\n      e.preventDefault();\n    }\n  }\n}\n","import {ESLBaseElement} from '../../../esl-base-element/core';\nimport {EventUtils} from '../../../esl-utils/dom/events';\nimport {bind} from '../../../esl-utils/decorators/bind';\n\n/** Interface for option definition */\nexport interface ESLSelectOption {\n  /** Label text of the option */\n  text: string;\n  /** Value of the option */\n  value: string;\n  /** Disabled marker */\n  disabled: boolean;\n  /** Selected marker */\n  selected: boolean;\n  /** Initially selected marker */\n  defaultSelected: boolean;\n}\n\n/** Interface to declare options source for select components */\nexport interface ESLSelectModel {\n  /** Allow multiple items */\n  multiple: boolean;\n  /** Get list of options */\n  options: ESLSelectOption[];\n  /** Get list of selected options */\n  selectedOptions: ESLSelectOption[];\n\n  /** Toggle option with passed value to the state */\n  setSelected(value: string, state: boolean): void;\n  /** Check selected state*/\n  isSelected(value: string): boolean;\n  /** Has selected options */\n  hasSelected(): boolean;\n\n  /** Check that all options are selected */\n  isAllSelected(): boolean;\n  /** Toggle all options to the state */\n  setAllSelected(state: boolean): void;\n}\n\n/**\n * Base class for {@link HTMLSelectElement} wrapper element, implements {@link ESLSelectModel) options source\n */\nexport abstract class ESLSelectWrapper extends ESLBaseElement implements ESLSelectModel {\n  protected static observationConfig: MutationObserverInit = {\n    subtree: true,\n    attributes: true,\n    attributeFilter: ['value', 'selected', 'disabled'],\n    childList: true,\n    characterData: true\n  };\n\n  private _$select: HTMLSelectElement;\n  private _mutationObserver = new MutationObserver(this._onTargetMutation.bind(this));\n\n  /** Native select that is wrapped */\n  public get $select() {\n    return this._$select;\n  }\n  public set $select(select: HTMLSelectElement) {\n    const prev = this._$select;\n    this._$select = select;\n    this._onTargetChange(select, prev);\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.ownerDocument.addEventListener('reset', this._onReset);\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.ownerDocument.removeEventListener('reset', this._onReset);\n    this._mutationObserver.disconnect();\n    this._$select && this._$select.removeEventListener('change', this._onChange);\n  }\n\n  protected _onChange(event?: Event) {}\n  protected _onListChange() {}\n  protected _onTargetChange(newTarget: HTMLSelectElement | undefined,\n                            oldTarget: HTMLSelectElement | undefined) {\n    if (oldTarget) oldTarget.removeEventListener('change', this._onChange);\n    if (newTarget) newTarget.addEventListener('change', this._onChange);\n    this._mutationObserver.disconnect();\n    const type = (this.constructor as typeof ESLSelectWrapper);\n    if (newTarget) this._mutationObserver.observe(newTarget, type.observationConfig);\n  }\n  protected _onTargetMutation(changes: MutationRecord[]) {\n    const isListChange = (change: MutationRecord) => change.addedNodes.length + change.removedNodes.length > 0;\n    changes.some(isListChange) ? this._onListChange() : this._onChange();\n  }\n\n  @bind\n  protected _onReset(event: Event) {\n    if (!event.target || event.target !== this.form) return;\n    setTimeout(() => this._onChange(event));\n  }\n\n  public get multiple() {\n    return this.$select && this.$select.multiple;\n  }\n\n  public get options(): ESLSelectOption[] {\n    return this.$select ? Array.from(this.$select.options) : [];\n  }\n  public get selectedOptions(): ESLSelectOption[] {\n    return this.options.filter((item) => item.selected);\n  }\n\n  protected getOption(value: string): ESLSelectOption | undefined {\n    return this.options.find((item) => item.value === value);\n  }\n\n  public setSelected(value: string, state: boolean) {\n    const option = this.getOption(value);\n    option && (option.selected = state);\n    EventUtils.dispatch(this.$select, 'change');\n  }\n  public isSelected(value: string): boolean {\n    const opt = this.getOption(value);\n    return !!opt && opt.selected;\n  }\n  public hasSelected(): boolean {\n    return this.options.some((item) => item.selected);\n  }\n\n  public isAllSelected(): boolean {\n    return this.options.every((item) => item.selected || item.disabled);\n  }\n\n  public setAllSelected(state: boolean) {\n    if (!this.multiple) return false;\n    this.options.forEach((item: HTMLOptionElement) => item.selected = !item.disabled && state);\n    EventUtils.dispatch(this.$select, 'change');\n  }\n\n  // Proxy select methods and values\n  public get value() {\n    return this.$select?.value;\n  }\n  public get values() {\n    return this.selectedOptions.map((item: HTMLOptionElement) => item.value);\n  }\n\n  public get form(): HTMLFormElement | null {\n    return this.$select?.form;\n  }\n\n  public get name(): string {\n    return this.$select?.name;\n  }\n  public set name(name: string) {\n    this.$select && (this.$select.name = name);\n  }\n\n  public get required(): boolean {\n    return this.$select?.required;\n  }\n  public set required(required: boolean) {\n    this.$select && (this.$select.required = required);\n  }\n\n  // Validation API values\n  public get validity(): ValidityState {\n    return this.$select?.validity;\n  }\n  public get validationMessage(): string {\n    return this.$select?.validationMessage;\n  }\n  public get willValidate(): boolean {\n    return this.$select?.willValidate;\n  }\n\n  // Validation API methods\n  public checkValidity(): boolean {\n    return this.$select?.checkValidity();\n  }\n  public reportValidity(): boolean {\n    return this.$select?.reportValidity();\n  }\n  public setCustomValidity(error: string): void {\n    this.$select?.setCustomValidity(error);\n  }\n}\n","import {ESLToggleable} from '../../../esl-toggleable/core/esl-toggleable';\nimport {bind} from '../../../esl-utils/decorators/bind';\nimport {prop} from '../../../esl-utils/decorators/prop';\nimport {TAB} from '../../../esl-utils/dom/keys';\nimport {rafDecorator} from '../../../esl-utils/async/raf';\nimport {ESLSelectList} from '../../esl-select-list/core';\n\nimport type {ESLSelect} from './esl-select';\nimport type {ToggleableActionParams} from '../../../esl-toggleable/core/esl-toggleable';\n\n/**\n * ESLSelectDropdown component\n * @author Alexey Stsefanovich (ala'n)\n *\n * Auxiliary inner custom component to render {@link ESLSelect) dropdown section\n * Uses {@link ESLSelectList} to render the content\n */\nexport class ESLSelectDropdown extends ESLToggleable {\n  public static readonly is = 'esl-select-dropdown';\n  public static register() {\n    ESLSelectList.register();\n    super.register();\n  }\n\n  /** Owner ESLSelect instance */\n  public $owner: ESLSelect;\n\n  /** Inner ESLSelectList component */\n  protected $list: ESLSelectList;\n  protected _disposeTimeout: number;\n  protected _deferredUpdatePosition = rafDecorator(() => this.updatePosition());\n\n  @prop() public closeOnEsc = true;\n  @prop() public closeOnOutsideAction = true;\n\n  constructor() {\n    super();\n    this.$list = document.createElement(ESLSelectList.is) as ESLSelectList;\n  }\n\n  protected setInitialState() {}\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.appendChild(this.$list);\n  }\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeChild(this.$list);\n  }\n\n  protected bindEvents() {\n    super.bindEvents();\n    window.addEventListener('resize', this._deferredUpdatePosition);\n  }\n  protected unbindEvents() {\n    super.unbindEvents();\n    window.removeEventListener('resize', this._deferredUpdatePosition);\n  }\n\n  protected onShow(params: ToggleableActionParams) {\n    document.body.appendChild(this);\n    this._disposeTimeout && window.clearTimeout(this._disposeTimeout);\n\n    this.$list.pinSelected = this.$owner.pinSelected;\n    this.$list.selectAllLabel = this.$owner.selectAllLabel;\n    this.$list.$select = this.$owner.$select;\n\n    super.onShow(params);\n    const focusable = this.querySelector('[tabindex]') as HTMLElement;\n    focusable && focusable.focus( {preventScroll: true} );\n    this.updatePosition();\n  }\n  protected onHide(params: ToggleableActionParams) {\n    const select = this.activator;\n    super.onHide(params);\n    this._disposeTimeout = window.setTimeout(() => {\n      if (this.parentNode !== document.body) return;\n      document.body.removeChild(this);\n    }, 1000);\n    select && setTimeout(() => select.focus({preventScroll: true}), 0);\n  }\n\n  @bind\n  protected _onKeyboardEvent(e: KeyboardEvent) {\n    super._onKeyboardEvent(e);\n    if (e.key === TAB) this._onTabKey(e);\n  }\n\n  protected _onTabKey(e: KeyboardEvent) {\n    const els = this.querySelectorAll('[tabindex]');\n    const first = els[0] as HTMLElement;\n    const last = els[els.length - 1] as HTMLElement;\n    if (first && e.target === last && !e.shiftKey) first.focus();\n    if (last && e.target === first && e.shiftKey) last.focus();\n  }\n\n  @bind\n  public updatePosition() {\n    if (!this.activator) return;\n    const windowY = window.scrollY || window.pageYOffset;\n    const rect = this.activator.getBoundingClientRect();\n\n    this.style.top = `${windowY + rect.top + rect.height}px`;\n    this.style.left = `${rect.left}px`;\n    this.style.width = `${rect.width}px`;\n  }\n}\n","import {attr, boolAttr, ESLBaseElement} from '../../../esl-base-element/core';\nimport {rafDecorator} from '../../../esl-utils/async/raf';\nimport {bind} from '../../../esl-utils/decorators/bind';\nimport {format} from '../../../esl-utils/misc/format';\n\nimport {ESLSelect} from './esl-select';\n\n/**\n * ESLSelectRenderer component\n * @author Alexey Stsefanovich (ala'n)\n *\n * Auxiliary inner custom element to render {@link ESLSelect} inline field\n */\nexport class ESLSelectRenderer extends ESLBaseElement {\n  public static readonly is = 'esl-select-renderer';\n\n  /** Attribute for empty text value */\n  @attr() public emptyText: string;\n  /** Attribute for more label format */\n  @attr() public moreLabelFormat: string;\n  /** Marker attribute to reflect filled state */\n  @boolAttr() public hasValue: boolean;\n\n  protected $container: HTMLDivElement;\n  protected $rest: HTMLElement;\n  protected $text: HTMLElement;\n  protected $remove: HTMLButtonElement;\n\n  protected _deferredRerender = rafDecorator(() => this.render());\n\n  constructor() {\n    super();\n\n    this.$remove = document.createElement('button');\n    this.$remove.type = 'button';\n    this.$remove.setAttribute('aria-label', 'Clear');\n    this.$remove.classList.add('esl-select-clear-btn');\n    this.$remove.classList.add('icon-nav-close-menu');\n\n    this.$container = document.createElement('div');\n    this.$container.classList.add('esl-select-text-container');\n    this.$text = document.createElement('span');\n    this.$text.classList.add('esl-select-text');\n    this.$container.appendChild(this.$text);\n    this.$rest = document.createElement('span');\n    this.$rest.classList.add('esl-select-text');\n    this.$container.appendChild(this.$rest);\n  }\n\n  /** ESLSelect owner */\n  get owner(): ESLSelect | null {\n    return this.parentElement instanceof ESLSelect ? this.parentElement : null;\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.appendChild(this.$container);\n    this.appendChild(this.$remove);\n    this.bindEvents();\n\n    customElements.whenDefined(ESLSelectRenderer.is).then(() => this.render());\n  }\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeChild(this.$container);\n    this.removeChild(this.$remove);\n    this.unbindEvents();\n  }\n\n  protected bindEvents() {\n    if (!this.owner) return;\n    this.owner.addEventListener('esl:change:value', this.render);\n    this.$remove.addEventListener('click', this._onClear);\n    window.addEventListener('resize', this._deferredRerender);\n  }\n  protected unbindEvents() {\n    if (!this.owner) return;\n    this.owner.removeEventListener('esl:change:value', this.render);\n    this.$remove.removeEventListener('click', this._onClear);\n    window.removeEventListener('resize', this._deferredRerender);\n  }\n\n  /** Rerender component with markers */\n  @bind\n  public render() {\n    if (!this.owner) return;\n    const selected = this.owner.selectedOptions;\n    this.hasValue = !!selected.length;\n    this.toggleAttribute('multiple', this.owner.multiple);\n    this.applyItems(selected.map((item) => item.text));\n  }\n\n  /** Render item with a visible items limit */\n  protected apply(items: string[], limit: number) {\n    const length = items.length;\n    const rest = length - limit;\n    const options = {rest, length, limit};\n    this.$text.textContent = items.slice(0, limit).join(', ');\n    if (rest > 0) {\n      this.$rest.textContent = format(this.moreLabelFormat || '', options);\n    } else {\n      this.$rest.textContent = '';\n    }\n  }\n  /** Render items using adaptive algorithm */\n  protected applyItems(items: string[]) {\n    let size = 0;\n    do {\n      this.apply(items, ++size); // Render with extended limit while it not fits to the container\n    } while (size <= items.length && this.$container.scrollWidth <= this.$container.clientWidth);\n    this.apply(items, size - 1); // Render last limit that fits\n  }\n\n  /** Handle clear button click */\n  @bind\n  protected _onClear(e: MouseEvent) {\n    if (!this.owner) return;\n    this.owner.setAllSelected(false);\n    e.stopPropagation();\n    e.preventDefault();\n  }\n}\n","import {attr, boolAttr} from '../../../esl-base-element/core';\nimport {bind} from '../../../esl-utils/decorators/bind';\nimport {CSSClassUtils} from '../../../esl-utils/dom/class';\nimport {ENTER, SPACE} from '../../../esl-utils/dom/keys';\nimport {ExportNs} from '../../../esl-utils/environment/export-ns';\nimport {EventUtils} from '../../../esl-utils/dom/events';\n\nimport {ESLSelectWrapper} from '../../esl-select-list/core/esl-select-wrapper';\nimport {ESLSelectRenderer} from './esl-select-renderer';\nimport {ESLSelectDropdown} from './esl-select-dropdown';\n\n/**\n * ESLSelect component\n * @author Alexey Stsefanovich (ala'n)\n *\n * ESLSelect is a component on top of native select that brings more customization features.\n * Uses \"select with dropdown\" view. Supports both single and multiple selection.\n */\n@ExportNs('Select')\nexport class ESLSelect extends ESLSelectWrapper {\n  public static readonly is = 'esl-select';\n  public static get observedAttributes() {\n    return ['disabled'];\n  }\n  public static register() {\n    ESLSelectDropdown.register();\n    ESLSelectRenderer.register();\n    super.register();\n  }\n\n  /** Placeholder text property */\n  @attr() public placeholder: string;\n  /** Class(es) to mark not empty state */\n  @attr() public hasValueClass: string;\n  /** Class(es) for focused state. Select is also focused if the dropdown list is opened */\n  @attr() public hasFocusClass: string;\n  /** Select all options text */\n  @attr({defaultValue: 'Select All'}) public selectAllLabel: string;\n\n  /**\n   * Text to add when there is not enough space to show all selected options inline,\n   * Supports `{rest}`, `{length}` and `{limit}` placeholders\n   */\n  @attr({defaultValue: '+ {rest} more...'}) public moreLabelFormat: string;\n\n  /** Dropdown open marker */\n  @boolAttr() public open: boolean;\n  /** Disabled state marker */\n  @boolAttr() public disabled: boolean;\n  /** Marker for selecting items to be pinned to the top of the dropdown */\n  @boolAttr() public pinSelected: boolean;\n\n  protected $renderer: ESLSelectRenderer;\n  protected $dropdown: ESLSelectDropdown;\n\n  constructor() {\n    super();\n\n    this.$renderer = document.createElement(ESLSelectRenderer.is) as ESLSelectRenderer;\n    this.$dropdown = document.createElement(ESLSelectDropdown.is) as ESLSelectDropdown;\n  }\n\n  protected attributeChangedCallback(attrName: string) {\n    if (attrName === 'disabled') this._updateDisabled();\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n\n    this.$select = this.querySelector('[esl-select-target]') as HTMLSelectElement;\n    if (!this.$select) return;\n\n    this._prepare();\n    this._updateDisabled();\n    this.bindEvents();\n    this._onUpdate();\n  }\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.unbindEvents();\n    this._dispose();\n  }\n\n  /** Catches the focus */\n  public focus(options?: FocusOptions) {\n    this.$select.focus(options);\n  }\n  /** Updates select component */\n  public update(valueChanged = true) {\n    this._onUpdate();\n    if (!valueChanged) return;\n    // TODO: silent updates\n    EventUtils.dispatch(this, 'esl:change:value', {detail: {event: null}});\n  }\n\n  protected bindEvents() {\n    this.addEventListener('click', this._onClick);\n    this.addEventListener('keydown', this._onKeydown);\n    this.addEventListener('focusout', this._onUpdate);\n    this.$dropdown.addEventListener('esl:show', this._onPopupStateChange);\n    this.$dropdown.addEventListener('esl:hide', this._onPopupStateChange);\n  }\n  protected unbindEvents() {\n    this.removeEventListener('click', this._onClick);\n    this.removeEventListener('keydown', this._onKeydown);\n    this.removeEventListener('focusout', this._onUpdate);\n    this.$dropdown.removeEventListener('esl:show', this._onPopupStateChange);\n    this.$dropdown.removeEventListener('esl:hide', this._onPopupStateChange);\n  }\n\n  protected _prepare() {\n    this.$renderer.className = this.$select.className;\n    this.$renderer.emptyText = this.placeholder;\n    this.$renderer.moreLabelFormat = this.moreLabelFormat;\n    this.$dropdown.$owner = this;\n    this.appendChild(this.$renderer);\n  }\n  protected _dispose() {\n    this.$select.className = this.$renderer.className;\n    this.removeChild(this.$renderer);\n  }\n\n  protected _updateDisabled() {\n    this.setAttribute('aria-disabled', String(this.disabled));\n    if (!this.$select) return;\n    this.$select.disabled = this.disabled;\n    if (this.disabled && this.open) this.$dropdown.hide();\n  }\n\n  @bind\n  protected _onChange(event: Event) {\n    this._onUpdate();\n    EventUtils.dispatch(this, 'esl:change:value', {detail: {event}});\n  }\n\n  @bind\n  protected _onUpdate() {\n    const hasValue = this.hasSelected();\n    this.toggleAttribute('has-value', hasValue);\n    CSSClassUtils.toggle(this, this.hasValueClass, hasValue);\n\n    const focusEl = document.activeElement;\n    const hasFocus = this.open || (focusEl && this.contains(focusEl));\n    CSSClassUtils.toggle(this, this.hasFocusClass, !!hasFocus);\n  }\n\n  @bind\n  protected _onClick() {\n    if (this.disabled) return;\n    this.$dropdown.toggle(!this.$dropdown.open, {\n      activator: this,\n      initiator: 'select'\n    });\n  }\n\n  @bind\n  protected _onKeydown(e: KeyboardEvent) {\n    if ([ENTER, SPACE].includes(e.key)) {\n      this.click();\n      e.preventDefault();\n    }\n  }\n\n  @bind\n  protected _onPopupStateChange(e: CustomEvent) {\n    if (e.target !== this.$dropdown) return;\n    this.open = this.$dropdown.open;\n    this._onUpdate();\n  }\n}\n","import {DeviceDetector} from '../../esl-utils/environment/device-detector';\nimport {ESLImage} from './esl-image';\n\nlet iObserver: IntersectionObserver;\n\n/** ESL Image lazy loading IntersectionObserver instance */\nexport function getIObserver() {\n  if (!iObserver) {\n    iObserver = new IntersectionObserver(function (entries) {\n      entries.forEach(handleViewport);\n    }, {\n      threshold: [0.01], // 0 + 1 are not correctly handled by all browsers\n      rootMargin: DeviceDetector.isMobile ? '250px' : '500px' // rootMargin value for IntersectionObserver\n    });\n  }\n  return iObserver;\n}\n\nfunction handleViewport(entry: IntersectionObserverEntry) {\n  const {target: image} = entry;\n  if (!(image instanceof ESLImage)) return;\n\n  // Check that entry is going to appear in the viewport area\n  if (entry.isIntersecting || entry.intersectionRatio > 0) {\n    image.triggerLoad();\n  }\n}\n","import {ESLImage} from './esl-image';\n\n/**\n * Describe mods configurations\n */\nexport interface ESLImageRenderStrategy {\n  /** Apply image from shadow loader */\n  apply: (img: ESLImage, shadowImg: HTMLImageElement) => void;\n  /** Clean strategy specific changes from ESLImage */\n  clear: (img: ESLImage) => void;\n}\n\n/**\n * Describes object that contains strategies mapping\n */\nexport interface ESLImageStrategyMap {\n  [mode: string]: ESLImageRenderStrategy;\n}\n\nexport const STRATEGIES: ESLImageStrategyMap = {\n  'cover': {\n    apply(img, shadowImg) {\n      const src = shadowImg.src;\n      const isEmpty = !src || ESLImage.isEmptyImage(src);\n      img.style.backgroundImage = isEmpty ? '' : `url(\"${src}\")`;\n    },\n    clear(img) {\n      img.style.backgroundImage = '';\n    }\n  },\n  'save-ratio': {\n    apply(img, shadowImg) {\n      const src = shadowImg.src;\n      const isEmpty = !src || ESLImage.isEmptyImage(src);\n      img.style.backgroundImage = isEmpty ? '' : `url(\"${src}\")`;\n      if (shadowImg.width === 0) return;\n      img.style.paddingTop = isEmpty ? '' : `${(shadowImg.height * 100 / shadowImg.width)}%`;\n    },\n    clear(img) {\n      img.style.paddingTop = '';\n      img.style.backgroundImage = '';\n    }\n  },\n  'fit': {\n    apply(img, shadowImg) {\n      const innerImg = img.attachInnerImage();\n      innerImg.src = shadowImg.src;\n      innerImg.removeAttribute('width');\n    },\n    clear(img) {\n      img.removeInnerImage();\n    }\n  },\n  'origin': {\n    apply(img, shadowImg) {\n      const innerImg = img.attachInnerImage();\n      innerImg.src = shadowImg.src;\n      innerImg.width = shadowImg.width / window.devicePixelRatio;\n    },\n    clear(img) {\n      img.removeInnerImage();\n    }\n  },\n  'inner-svg': {\n    apply(img, shadowImg) {\n      const request = new XMLHttpRequest();\n      request.open('GET', shadowImg.src, true);\n      request.onreadystatechange = () => {\n        if (request.readyState !== 4 || request.status !== 200) return;\n        const tmp = document.createElement('div');\n        tmp.innerHTML = request.responseText;\n        Array.from(tmp.querySelectorAll('script') || [])\n          .forEach((node: Element) => node.remove());\n        img.innerHTML = tmp.innerHTML;\n      };\n      request.send();\n    },\n    clear(img) {\n      img.innerHTML = '';\n    }\n  }\n};\n","import {ExportNs} from '../../esl-utils/environment/export-ns';\nimport {bind} from '../../esl-utils/decorators/bind';\nimport {CSSClassUtils} from '../../esl-utils/dom/class';\nimport {ESLBaseElement, attr, boolAttr} from '../../esl-base-element/core';\nimport {EventUtils} from '../../esl-utils/dom/events';\nimport {ESLMediaRuleList} from '../../esl-media-query/core';\nimport {TraversingQuery} from '../../esl-traversing-query/core/esl-traversing-query';\n\nimport {getIObserver} from './esl-image-iobserver';\nimport {STRATEGIES} from './esl-image-strategies';\n\nimport type {ESLImageRenderStrategy} from './esl-image-strategies';\n\ntype LoadState = 'error' | 'loaded' | 'ready';\nconst isLoadState = (state: string): state is LoadState => ['error', 'loaded', 'ready'].includes(state);\n\n/**\n * ESL Image\n * @author Alexey Stsefanovich (ala'n), Yuliya Adamskaya\n */\n@ExportNs('Image')\nexport class ESLImage extends ESLBaseElement {\n  public static is = 'esl-image';\n\n  // Default container class value\n  public static DEFAULT_CONTAINER_CLS = 'img-container-loaded';\n\n  public static get STRATEGIES() {\n    return STRATEGIES;\n  }\n\n  static get EMPTY_IMAGE() {\n    return 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n\n  static get observedAttributes() {\n    return ['alt', 'role', 'mode', 'aria-label', 'data-src', 'data-src-base', 'lazy-triggered'];\n  }\n\n  @attr() public alt: string;\n  @attr({defaultValue: 'save-ratio'}) public mode: string;\n  @attr({dataAttr: true}) public src: string;\n  @attr({dataAttr: true}) public srcBase: string;\n\n  @attr({defaultValue: 'none'}) public lazy: 'auto' | 'manual' | 'none' | '';\n  @boolAttr() public lazyTriggered: boolean;\n\n  @boolAttr() public refreshOnUpdate: boolean;\n  @attr({defaultValue: 'inner-image'}) public innerImageClass: string;\n\n  @attr({defaultValue: null}) public containerClass: string | null;\n  @attr({defaultValue: '::parent'}) public containerClassTarget: string;\n  @attr({defaultValue: 'ready'}) public containerClassState: string;\n\n  @boolAttr({readonly: true}) public readonly ready: boolean;\n  @boolAttr({readonly: true}) public readonly loaded: boolean;\n  @boolAttr({readonly: true}) public readonly error: boolean;\n\n  private _strategy: ESLImageRenderStrategy | null;\n  private _innerImg: HTMLImageElement | null;\n  private _srcRules: ESLMediaRuleList<string>;\n  private _currentSrc: string;\n  private _detachLazyTrigger: () => void;\n  private _shadowImageElement: HTMLImageElement;\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.alt =\n      this.alt || this.getAttribute('aria-label') || this.getAttribute('data-alt') || '';\n    this.updateA11y();\n    this.srcRules.addListener(this._onMediaMatchChange);\n    if (this.lazyObservable) {\n      this.removeAttribute('lazy-triggered');\n      getIObserver().observe(this);\n      this._detachLazyTrigger = function () {\n        getIObserver().unobserve(this);\n        this._detachLazyTrigger = null;\n      };\n    }\n    this.refresh();\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this._detachLazyTrigger && this._detachLazyTrigger();\n    if (this._srcRules) {\n      this._srcRules.removeListener(this._onMediaMatchChange);\n    }\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string, newVal: string) {\n    if (!this.connected || oldVal === newVal) return;\n    switch (attrName) {\n      case 'aria-label':\n        this.alt = newVal || '';\n        break;\n      case 'alt':\n      case 'role':\n        this.updateA11y();\n        break;\n      case 'data-src':\n        this.srcRules = ESLMediaRuleList.parse<string>(newVal, ESLMediaRuleList.STRING_PARSER);\n        this.refresh();\n        break;\n      case 'data-src-base':\n        this.refresh();\n        break;\n      case 'mode':\n        this.changeMode(oldVal, newVal);\n        break;\n      case 'lazy-triggered':\n        this.lazyTriggered && this.update();\n        break;\n    }\n  }\n\n  public get srcRules() {\n    if (!this._srcRules) {\n      this.srcRules = ESLMediaRuleList.parse<string>(this.src, ESLMediaRuleList.STRING_PARSER);\n    }\n    return this._srcRules;\n  }\n\n  public set srcRules(rules: ESLMediaRuleList<string>) {\n    if (this._srcRules) {\n      this._srcRules.removeListener(this._onMediaMatchChange);\n    }\n    this._srcRules = rules;\n    this._srcRules.addListener(this._onMediaMatchChange);\n  }\n\n  public get currentSrc() {\n    return this._currentSrc;\n  }\n\n  public get empty() {\n    return !this._currentSrc || ESLImage.isEmptyImage(this._currentSrc);\n  }\n\n  public get canUpdate() {\n    return this.lazyTriggered || this.lazy === 'none';\n  }\n\n  public get lazyObservable() {\n    return this.lazy !== 'none' && this.lazy !== 'manual';\n  }\n\n  public get originalWidth() {\n    return this._shadowImageElement ? this._shadowImageElement.width : 0;\n  }\n\n  public get originalHeight() {\n    return this._shadowImageElement ? this._shadowImageElement.height : 0;\n  }\n\n  public triggerLoad() {\n    this.setAttribute('lazy-triggered', '');\n  }\n\n  protected changeMode(oldVal: string, newVal: string) {\n    oldVal = oldVal || 'save-ratio';\n    newVal = newVal || 'save-ratio';\n    if (oldVal === newVal) return;\n    if (!STRATEGIES[newVal]) {\n      this.mode = oldVal;\n      throw new Error('ESL Image: Unsupported mode: ' + newVal);\n    }\n    this.clearImage();\n    if (this.loaded) this.syncImage();\n  }\n\n  protected update(force: boolean = false) {\n    if (!this.canUpdate) return;\n\n    const src = this.getPath(this.srcRules.activeValue);\n\n    if (this._currentSrc !== src || !this.ready || force) {\n      this._currentSrc = src;\n      this._shadowImg.src = src;\n\n      if (this.refreshOnUpdate || !this.ready) {\n        this.syncImage();\n      }\n\n      if (this._shadowImg.complete) {\n        this._shadowImgError ? this._onError() : this._onLoad();\n      }\n    }\n\n    this._detachLazyTrigger && this._detachLazyTrigger();\n  }\n\n  protected updateA11y() {\n    const role = this.getAttribute('role') || 'img';\n    this.setAttribute('role', role);\n    this.innerImage && (this.innerImage.alt = this.alt);\n    if (role === 'img') this.setAttribute('aria-label', this.alt);\n  }\n\n  protected getPath(src: string | undefined) {\n    if (!src || src === '0' || src === 'none') {\n      return ESLImage.EMPTY_IMAGE;\n    }\n    return this.srcBase + src;\n  }\n\n  public refresh() {\n    this.removeAttribute('loaded');\n    this.removeAttribute('ready');\n    this.updateContainerClasses();\n    this.clearImage();\n    this.update(true);\n  }\n\n  private syncImage() {\n    const strategy = STRATEGIES[this.mode];\n    this._strategy = strategy;\n    strategy && strategy.apply(this, this._shadowImg);\n  }\n\n  private clearImage() {\n    this._strategy && this._strategy.clear(this);\n    this._strategy = null;\n  }\n\n  public get innerImage() {\n    return this._innerImg;\n  }\n\n  public attachInnerImage(): HTMLImageElement {\n    if (!this._innerImg) {\n      this._innerImg = this.querySelector(`img.${this.innerImageClass}`) ||\n        this._shadowImg.cloneNode() as HTMLImageElement;\n      this._innerImg.className = this.innerImageClass;\n    }\n    if (!this._innerImg.parentNode) {\n      this.appendChild(this._innerImg);\n    }\n    this._innerImg.alt = this.alt;\n    return this._innerImg;\n  }\n\n  public removeInnerImage() {\n    if (!this.innerImage) return;\n    this.removeChild(this.innerImage);\n    setTimeout(() => {\n      if (this._innerImg && !this._innerImg.parentNode) {\n        this._innerImg = null;\n      }\n    });\n  }\n\n  protected get _shadowImg() {\n    if (!this._shadowImageElement) {\n      this._shadowImageElement = new Image();\n      this._shadowImageElement.onload = this._onLoad;\n      this._shadowImageElement.onerror = this._onError;\n    }\n    return this._shadowImageElement;\n  }\n\n  protected get _shadowImgError() {\n    if (!this._shadowImg.complete) return false;\n    if (this._shadowImg.src.substr(-4) === '.svg') return false;\n    return this._shadowImg.naturalHeight <= 0;\n  }\n\n  @bind\n  private _onLoad() {\n    this.syncImage();\n    this._onReadyState(true);\n    this.updateContainerClasses();\n  }\n\n  @bind\n  private _onError() {\n    this._onReadyState(false);\n    this.updateContainerClasses();\n  }\n\n  @bind\n  private _onMediaMatchChange() {\n    this.update();\n  }\n\n  private _onReadyState(successful: boolean) {\n    if (this.ready) return;\n    this.toggleAttribute('loaded', successful);\n    this.toggleAttribute('error', !successful);\n    this.toggleAttribute('ready', true);\n    this.$$fire(successful ? 'load' : 'error');\n    this.$$fire('ready');\n  }\n\n  public updateContainerClasses() {\n    if (this.containerClass === null) return;\n    const cls = this.containerClass || (this.constructor as typeof ESLImage).DEFAULT_CONTAINER_CLS;\n    const state = isLoadState(this.containerClassState) && this[this.containerClassState];\n\n    const targetEl = TraversingQuery.first(this.containerClassTarget, this) as HTMLElement;\n    targetEl && CSSClassUtils.toggle(targetEl, cls, state);\n  }\n\n  public $$fire(eventName: string, eventInit: CustomEventInit = {bubbles: false}): boolean {\n    return EventUtils.dispatch(this, eventName, eventInit);\n  }\n\n  public static isEmptyImage(src: string) {\n    return src === ESLImage.EMPTY_IMAGE;\n  }\n}\n","import {ExportNs} from '../../esl-utils/environment/export-ns';\n\n/**\n * ESL Query Breakpoint Registry\n * @author Yuliya Adamskaya\n *\n * Breakpoint Registry is used to provide custom breakpoints for ESL Query\n */\nclass ScreenBreakpoint {\n  public min: number;\n  public max: number;\n\n  constructor(min: number, max: number) {\n    this.min = min;\n    this.max = max;\n  }\n\n  get mediaQuery(): string {\n    return `(min-width: ${this.min}px) and (max-width: ${this.max}px)`;\n  }\n\n  get mediaQueryGE(): string {\n    return `(min-width: ${this.min}px)`;\n  }\n\n  get mediaQueryLE(): string {\n    return `(max-width: ${this.max}px)`;\n  }\n}\n\ninterface BreakpointsMapping {\n  [key: string]: ScreenBreakpoint\n}\n\n// Default breakpoints provided in registry\nconst registry: BreakpointsMapping = {\n  xs: new ScreenBreakpoint(1, 767),\n  sm: new ScreenBreakpoint(768, 991),\n  md: new ScreenBreakpoint(992, 1199),\n  lg: new ScreenBreakpoint(1200, 1599),\n  xl: new ScreenBreakpoint(1600, 999999)\n};\n\nconst BP_NAME_REGEXP = /^[a-z]+/i;\n\n@ExportNs('MediaBreakpoints')\nexport abstract class ESLMediaBreakpoints {\n  /**\n   * Add or replace breakpoint shortcut that could be used inside of ESLMediaQuery\n   * @param name - name of shortcut\n   * @param minWidth - min width for breakpoint\n   * @param maxWidth - max width for breakpoint\n   */\n  public static addCustomBreakpoint(name: string, minWidth: number, maxWidth: number): ScreenBreakpoint {\n    name = name.toLowerCase();\n    if (BP_NAME_REGEXP.test(name)) {\n      const current = registry[name];\n      registry[name] = new ScreenBreakpoint(minWidth, maxWidth);\n      return current;\n    }\n    throw new Error('Shortcut should consist only from Latin characters. Length should be at least one character.');\n  }\n\n  /**\n   * @return known breakpoint shortcut instance\n   */\n  public static getBreakpoint(name: string): ScreenBreakpoint {\n    return registry[(name || '').toLowerCase()];\n  }\n\n  /**\n   * @returns all available breakpoints shortcuts\n   */\n  public static getAllBreakpointsNames() {\n    return Object.keys(registry);\n  }\n\n  /**\n   * Replaces known breakpoints shortcuts to the real media queries\n   * @param query - original query string\n   */\n  public static apply(query: string) {\n    const breakpoints = Object.keys(registry);\n    const breakpointRegex = new RegExp(`@([+-]?)(${breakpoints.join('|')})\\\\b`, 'ig');\n\n    return query.replace(breakpointRegex, (match, sign, bp) => {\n      const shortcut = ESLMediaBreakpoints.getBreakpoint(bp);\n      switch (sign) {\n        case '+':\n          return shortcut.mediaQueryGE;\n        case '-':\n          return shortcut.mediaQueryLE;\n        default:\n          return shortcut.mediaQuery;\n      }\n    });\n  }\n}\n","import {memoize} from '../../esl-utils/decorators/memoize';\nimport {DeviceDetector} from '../../esl-utils/environment/device-detector';\nimport {ExportNs} from '../../esl-utils/environment/export-ns';\n\nimport {ESLMediaBreakpoints} from './esl-media-breakpoints';\n\n/**\n * ESL Media Query\n * Provides special media condition syntax - ESLQuery\n * @author Alexey Stsefanovich (ala'n), Yuliya Adamskaya, Natallia Harshunova\n *\n * Helper class that extends MediaQueryList class\n * Supports\n * - CSS query matching check\n * - DPR display queries (@x1 | @x2 | @x3)\n * - Screen default sizes shortcuts @[-|+](XS|SM|MD|LG|XL)\n * - Query matching change listeners\n * - Mobile / full browser detection (@MOBILE|@DESKTOP)\n * - Exclude upper DPRs for bots\n */\n@ExportNs('MediaQuery')\nexport class ESLMediaQuery {\n  static get BreakpointRegistry() {\n    return ESLMediaBreakpoints;\n  }\n\n  @memoize()\n  static for(query: string) {\n    return new ESLMediaQuery(query);\n  }\n\n  @memoize()\n  static matchMediaCached(query: string) {\n    return matchMedia(query);\n  }\n\n  static buildDprQuery(dpr: number) {\n    if (ESLMediaQuery.ignoreBotsDpr && DeviceDetector.isBot && dpr !== 1) return ESLMediaQuery.NOT_ALL;\n    if (DeviceDetector.isSafari) return `(-webkit-min-device-pixel-ratio: ${dpr})`;\n    return `(min-resolution: ${(96 * dpr).toFixed(1)}dpi)`;\n  }\n\n  static readonly ALL = 'all';\n  static readonly NOT_ALL = 'not all';\n\n  /**\n   * Option to disable DPR images handling for bots\n   */\n  static ignoreBotsDpr = false;\n\n  private readonly _query: MediaQueryList;\n\n  constructor(query: string) {\n    // Applying known breakpoints shortcut\n    query = ESLMediaBreakpoints.apply(query);\n\n    // Applying dpr shortcut\n    query = query.replace(\n      /@(\\d(\\.\\d)?)x/g,\n      (match, ratio) => ESLMediaQuery.buildDprQuery(+ratio)\n    );\n\n    // Applying dpr shortcut for device detection\n    query = query.replace(/(and )?(@MOBILE|@DESKTOP)( and)?/ig, (match, pre, type, post) => {\n      if (DeviceDetector.isMobile !== (type.toUpperCase() === '@MOBILE')) {\n        return ESLMediaQuery.NOT_ALL; // whole query became invalid\n      }\n      return pre && post ? 'and' : '';\n    });\n\n    this._query = ESLMediaQuery.matchMediaCached(query.trim() || ESLMediaQuery.ALL);\n  }\n\n  /** inner MediaQueryList instance */\n  public get query(): MediaQueryList {\n    return this._query;\n  }\n\n  /** true if current environment satisfies query */\n  public get matches(): boolean {\n    return this.query.matches;\n  }\n\n  /** Attach listener to wrapped media query list */\n  public addListener(listener: () => void) {\n    if (typeof this.query.addEventListener === 'function') {\n      this.query.addEventListener('change', listener);\n    } else {\n      this.query.addListener(listener);\n    }\n  }\n\n  /** Detach listener from wrapped media query list */\n  public removeListener(listener: () => void) {\n    if (typeof this.query.removeEventListener === 'function') {\n      this.query.removeEventListener('change', listener);\n    } else {\n      this.query.removeListener(listener);\n    }\n  }\n\n  public toString(): string {\n    return '[ESL MQ] (' + this.query.media + ')';\n  }\n}\n","import {Observable} from '../../esl-utils/abstract/observable';\nimport {evaluate} from '../../esl-utils/misc/format';\nimport {ESLMediaRule} from './esl-media-rule';\nimport {isPrimitive} from '../../esl-utils/misc/object';\n\ntype PayloadParser<T> = (val: string) => T | undefined;\n\n/**\n * ESL Rule List - ESLMediaRule observable collection\n * @author Yuliya Adamskaya\n */\nexport class ESLMediaRuleList<T> extends Observable {\n  private _active: ESLMediaRule<T | undefined>;\n  private readonly _default: ESLMediaRule<T>;\n  private readonly _rules: ESLMediaRule<T>[];\n\n  public static STRING_PARSER = (val: string) => val;\n  public static OBJECT_PARSER = <U>(val: string): U | undefined => evaluate(val);\n\n  private static parseRules<U>(str: string, parser: PayloadParser<U>): ESLMediaRule<U>[] {\n    const parts = str.split('|');\n    const rules: ESLMediaRule<U>[] = [];\n    parts.forEach((_lex: string) => {\n      const lex = _lex.trim();\n      if (!lex) {\n        return;\n      }\n      if (lex.indexOf('=>') === -1) {\n        const value = parser(lex);\n        // Default rule should have lower priority\n        typeof value !== 'undefined' && rules.unshift(ESLMediaRule.all(value));\n      } else {\n        const rule = ESLMediaRule.parse(lex, parser);\n        rule && rules.push(rule);\n      }\n    });\n    return rules;\n  }\n\n  public static parse<U>(query: string, parser: PayloadParser<U>) {\n    return new ESLMediaRuleList<U>(query, parser);\n  }\n\n  private constructor(query: string, parser: PayloadParser<T>) {\n    super();\n    if (typeof query !== 'string') {\n      throw new Error('ESLRuleList require first parameter (query) typeof string');\n    }\n    this._rules = ESLMediaRuleList.parseRules(query, parser);\n    this._rules.forEach((rule) => rule.addListener(this._onMatchChanged));\n    this._default = this._rules.filter((rule) => rule.default)[0];\n  }\n\n  get rules() {\n    return this._rules;\n  }\n\n  get _activeRule(): ESLMediaRule<T | undefined> {\n    const satisfied = this.rules.filter((rule) => rule.matches);\n    return satisfied.length > 0 ? satisfied[satisfied.length - 1] : ESLMediaRule.empty();\n  }\n\n  get active() {\n    if (!this._active) {\n      this._active = this._activeRule;\n    }\n    return this._active;\n  }\n\n  get activeValue(): T | undefined {\n    const value = this.active.payload;\n    if (isPrimitive(value) || !this._default || isPrimitive(this._default.payload)) return value;\n    return Object.assign({}, this._default.payload || {}, value);\n  }\n\n  private _onMatchChanged = () => {\n    const rule = this._activeRule;\n    if (this._active !== rule) {\n      this._active = rule;\n      this.fire(rule);\n    }\n  };\n}\n","import {ESLMediaQuery} from './esl-media-query';\n\ntype PayloadParser<T> = (val: string) => T | undefined;\n\n/**\n * ESL Rule\n * @author Yuliya Adamskaya\n *\n * Helper class that extend provide Observable Rule Handler that resolve payload based on current device configuration.\n * Supports\n * - CSS query matching check\n * - DPR display queries (@x1 | @x2 | @x3)\n * - Screen default sizes shortcuts @[-|+](XS|SM|MD|LG|XL)\n * - Query matching change listeners\n * - Mobile / full browser detection (@MOBILE|@DESKTOP)\n */\nexport class ESLMediaRule<T> extends ESLMediaQuery {\n  private readonly _payload: T;\n  private readonly _default: boolean;\n\n  constructor(payload: T, query: string) {\n    super(query);\n    this._default = !query;\n    this._payload = payload;\n  }\n\n  public toString() {\n    return `${super.toString()} => ${this._payload}`;\n  }\n\n  get payload(): T {\n    return this._payload;\n  }\n  get default(): boolean {\n    return this._default;\n  }\n\n  public static parse<U>(lex: string, parser: PayloadParser<U>) {\n    const [query, payload] = lex.split('=>');\n    const payloadValue = parser(payload.trim());\n    if (typeof payloadValue === 'undefined') return undefined;\n    return new ESLMediaRule<U>(payloadValue, query.trim());\n  }\n\n  public static all<U>(payload: U) {\n    return new ESLMediaRule<U>(payload, 'all');\n  }\n  public static empty(): ESLMediaRule<undefined> {\n    return new ESLMediaRule(undefined, 'all');\n  }\n}\n","import {ESLMedia} from './esl-media';\n\nconst RATIO_TO_ACTIVATE = 0.75; // TODO: customizable, at least global\nconst RATIO_TO_DEACTIVATE = 0.20; // TODO: customizable, at least global\n\nlet iObserver: IntersectionObserver;\n\n/** ESL Media Play-In-Viewport IntersectionObserver instance */\nexport function getIObserver(lazy: boolean = false) {\n  if (!iObserver && !lazy) {\n    iObserver = new IntersectionObserver(function (entries) {\n      entries.forEach(handleViewport);\n    }, {\n      threshold: [RATIO_TO_DEACTIVATE, RATIO_TO_ACTIVATE]\n    });\n  }\n  return iObserver;\n}\n\nfunction handleViewport(entry: IntersectionObserverEntry) {\n  const {target: video} = entry;\n  if (!(video instanceof ESLMedia)) return;\n\n  // Videos that playing and out of min ratio RATIO_TO_DEACTIVATE should be stopped\n  if (video.active && entry.intersectionRatio <= RATIO_TO_DEACTIVATE) {\n    video.pause();\n  }\n  // Play should starts only for inactive and background(muted) videos that are visible more then on RATIO_TO_ACTIVATE\n  if (!video.active && video.autoplay && entry.intersectionRatio >= RATIO_TO_ACTIVATE) {\n    video.play();\n  }\n}\n","import type {ESLMedia} from './esl-media';\n\nconst managerMap = new Map<string, ESLMedia>();\n\n/**\n * Group restriction manager for {@link ESLMedia}\n * Only one media in group can be played\n * Empty group is ignored\n * @author Alexey Stsefanovich (ala'n), Yuliya Adamskaya\n */\nexport class MediaGroupRestrictionManager {\n  /**\n   * @debug info\n   */\n  static get managerMap() {\n    return managerMap;\n  }\n\n  /**\n   * Register instance play state in group\n   */\n  public static registerPlay(instance: ESLMedia) {\n    if (instance.group) {\n      const current = managerMap.get(instance.group);\n      managerMap.set(instance.group, instance);\n      if (!current || current === instance || !current.active) return;\n      if (current.$$fire('mangedpause')) {\n        current.pause();\n      }\n    }\n  }\n\n  /**\n   * Unregister instance\n   */\n  public static unregister(instance: ESLMedia) {\n    if (instance.group) {\n      const reg = managerMap.get(instance.group);\n      if (reg === instance) managerMap.delete(instance.group);\n    }\n  }\n}\n","import {ESLMediaProviderRegistry} from './esl-media-registry';\n\nimport type {ESLMedia} from './esl-media';\n\nexport enum PlayerStates {\n  BUFFERING = 3,\n  ENDED = 0,\n  PAUSED = 2,\n  PLAYING = 1,\n  UNSTARTED = -1,\n  VIDEO_CUED = 5,\n  UNINITIALIZED = -2\n}\n\nexport interface MediaProviderConfig {\n  mediaSrc?: string;\n  mediaId?: string;\n  loop: boolean;\n  muted: boolean;\n  controls: boolean;\n  autoplay: boolean;\n  title: string;\n  preload?: string;\n  playsinline?: boolean;\n}\n\nexport type ProviderType = (new(component: ESLMedia, config: MediaProviderConfig) => BaseProvider) & typeof BaseProvider;\n\nexport type ProviderObservedParams = 'loop' | 'muted' | 'controls';\n\n/**\n * BaseProvider class for media API providers\n * @author Alexey Stsefanovich (ala'n), Yuliya Adamskaya, Natallia Harshunova\n */\nexport abstract class BaseProvider {\n  static readonly providerName: string;\n\n  static parseUrl(url: string): Partial<MediaProviderConfig> | null {\n    return null;\n  }\n  static parseConfig(component: ESLMedia): MediaProviderConfig {\n    const {loop, muted, controls, autoplay, title, preload, playsinline, mediaId, mediaSrc} = component;\n    const config = {loop, muted, controls, autoplay, title, preload, playsinline};\n    if (mediaId) Object.assign(config, {mediaId});\n    if (mediaSrc) Object.assign(config, {mediaSrc});\n    return config;\n  }\n\n  protected config: MediaProviderConfig;\n  protected component: ESLMedia;\n  protected _el: HTMLElement;\n  protected _ready: Promise<any>;\n\n  public constructor(component: ESLMedia, config: MediaProviderConfig) {\n    this.config = config;\n    this.component = component;\n  }\n\n  /**\n   * Wraps _ready promise\n   * @returns {Promise}\n   */\n  get ready() {\n    if (!this._ready) {\n      const res = Promise.reject('Not Initialized');\n      res.catch((e) => console.log('Rejected Media Operation: ', e));\n      return res;\n    }\n    return this._ready;\n  }\n\n  /** Bind the provider instance to the component */\n  public abstract bind(): void;\n\n  /** Unbind the provider instance from the component */\n  public unbind(): void {\n    Array.from(this.component.querySelectorAll('.esl-media-inner'))\n      .forEach((el: Node) => el.parentNode && el.parentNode.removeChild(el));\n  }\n\n  /** Provider name */\n  public get name(): string {\n    return (this.constructor as typeof BaseProvider).providerName;\n  }\n\n  /** @returns {PlayerStates} - current state of the player */\n  public abstract get state(): PlayerStates;\n\n  /** @returns {number} - recommended aspect ratio */\n  public abstract get defaultAspectRatio(): number;\n\n  /** @returns {number} - resource duration */\n  public abstract get duration(): number;\n\n  /** @returns {number} - resource current time */\n  public abstract get currentTime(): number;\n\n  /** Low-level provider 'seek to' method implementation */\n  protected abstract seekTo(pos?: number): void | Promise<any>;\n\n  /** Low-level provider 'play' method implementation */\n  protected abstract play(): void | Promise<any>;\n\n  /** Low-level provider 'pause' method implementation */\n  protected abstract pause(): void | Promise<any>;\n\n  /** Low-level provider 'stop' method implementation */\n  protected abstract stop(): void | Promise<any>;\n\n  /** Set focus to the inner content */\n  public focus() {\n    this._el?.focus();\n  }\n\n  protected onConfigChange(param: ProviderObservedParams, value: boolean) {\n    this.config[param] = value;\n  }\n\n  /** Set size for inner content */\n  public setSize(width: number | 'auto', height: number | 'auto'): void {\n    if (!this._el) return;\n    this._el.style.setProperty('width', width === 'auto' ? null : `${width}px`);\n    this._el.style.setProperty('height', height === 'auto' ? null : `${height}px`);\n  }\n\n  /**\n   * Executes toggle action:\n   * If the player is PAUSED then it starts playing otherwise it pause playing\n   */\n  protected toggle() {\n    if (this.state === PlayerStates.PAUSED) {\n      return this.play();\n    } else {\n      return this.pause();\n    }\n  }\n\n  /**\n   * Executes onConfigChange action when api is ready\n   * @returns Promise\n   */\n  public onSafeConfigChange(param: ProviderObservedParams, value: boolean) {\n    this.ready.then(() => this.onConfigChange(param, value));\n  }\n\n  /**\n   * Executes seekTo action when api is ready\n   * @returns Promise\n   */\n  public safeSeekTo(pos: number): Promise<void> {\n    return this.ready.then(() => this.seekTo(pos));\n  }\n\n  /**\n   * Executes play when api is ready\n   * @returns Promise\n   */\n  public safePlay(): Promise<void> {\n    return this.ready.then(() => this.play());\n  }\n\n  /**\n   * Executes pause when api is ready\n   * @returns Promise\n   */\n  public safePause(): Promise<void> {\n    return this.ready.then(() => this.pause());\n  }\n\n  /**\n   * Executes stop when api is ready\n   * @returns Promise\n   */\n  public safeStop(): Promise<void> {\n    return this.ready.then(() => this.stop());\n  }\n\n  /**\n   * Executes toggle when api is ready\n   * @returns Promise\n   */\n  public safeToggle(): Promise<void> {\n    return this.ready.then(() => this.toggle());\n  }\n\n  /**\n   * Register current provider.\n   * Can be used as a decorator.\n   */\n  public static register(this: ProviderType): void;\n  public static register(this: unknown, provider?: ProviderType): void;\n  public static register(this: any, provider?: ProviderType): void {\n    provider = provider || this;\n    if (provider === BaseProvider) throw new Error('`BaseProvider` can\\'t be registered.');\n    if (!(provider?.prototype instanceof BaseProvider)) throw new Error('Provider should be instanceof `BaseProvider`');\n    ESLMediaProviderRegistry.instance.register(provider);\n  }\n}\n","import {Observable} from '../../esl-utils/abstract/observable';\nimport type {BaseProvider, ProviderType} from './esl-media-provider';\n\nimport type {ESLMedia} from './esl-media';\n\nlet evRegistryInstance: ESLMediaProviderRegistry | null = null;\n/**\n * ESLMediaProviderRegistry class to store media API providers\n * @author Yuliya Adamskaya, Natallia Harshunova\n */\nexport class ESLMediaProviderRegistry extends Observable {\n  private providersMap: Map<string, ProviderType> = new Map();\n\n  public static get instance() {\n    if (!evRegistryInstance) {\n      evRegistryInstance = new ESLMediaProviderRegistry();\n    }\n    return evRegistryInstance;\n  }\n\n  /** List of registered providers */\n  public get providers(): ProviderType[] {\n    const list: ProviderType[] = [];\n    this.providersMap.forEach((provider) => list.push(provider));\n    return list;\n  }\n\n  /** Register provider */\n  public register(provider: ProviderType) {\n    if (!provider.providerName) throw new Error('Provider should have a name');\n    this.providersMap.set(provider.providerName, provider);\n    this.fire(provider.providerName, provider);\n  }\n\n  /** Check that provider is registered for passed name */\n  public has(name: string) {\n    return this.providersMap.has(name);\n  }\n\n  /** Find provider by name */\n  public findByName(name: string) {\n    if (!name || name === 'auto') return null;\n    return this.providersMap.get(name.toLowerCase()) || null;\n  }\n\n  /** Create provider instance for passed ESLMedia instance */\n  public createFor(media: ESLMedia): BaseProvider | null {\n    return this.createByType(media) || this.createBySrc(media);\n  }\n\n  /** Create provider instance for passed ESLMedia instance via provider name */\n  private createByType(media: ESLMedia): BaseProvider | null {\n    const provider = this.findByName(media.mediaType);\n    return provider ? ESLMediaProviderRegistry._create(provider, media) : null;\n  }\n\n  /** Create provider instance for passed ESLMedia instance via url */\n  private createBySrc(media: ESLMedia): BaseProvider | null {\n    for (const provider of this.providers.reverse()) {\n      const cfg = provider.parseUrl(media.mediaSrc);\n      if (cfg) return ESLMediaProviderRegistry._create(provider, media, cfg);\n    }\n    return null;\n  }\n\n  /** Create provider instance for passed configuration */\n  private static _create(provider: ProviderType, media: ESLMedia, cfg = provider.parseUrl(media.mediaSrc)) {\n    const config = Object.assign({}, cfg || {}, provider.parseConfig(media));\n    return new provider(media, config);\n  }\n}\n","import {ExportNs} from '../../esl-utils/environment/export-ns';\nimport {ESLBaseElement, attr, boolAttr} from '../../esl-base-element/core';\nimport {bind} from '../../esl-utils/decorators/bind';\nimport {CSSClassUtils} from '../../esl-utils/dom/class';\nimport {rafDecorator} from '../../esl-utils/async/raf';\nimport {debounce} from '../../esl-utils/async/debounce';\nimport {EventUtils} from '../../esl-utils/dom/events';\nimport {parseAspectRatio} from '../../esl-utils/misc/format';\n\nimport {ESLMediaQuery} from '../../esl-media-query/core';\nimport {TraversingQuery} from '../../esl-traversing-query/core';\n\nimport {getIObserver} from './esl-media-iobserver';\nimport {PlayerStates} from './esl-media-provider';\nimport {ESLMediaProviderRegistry} from './esl-media-registry';\nimport {MediaGroupRestrictionManager} from './esl-media-manager';\n\nimport type {BaseProvider} from './esl-media-provider';\n\nexport type ESLMediaFillMode = 'cover' | 'inscribe' | '';\n\n/**\n * ESL Media\n * @author Alexey Stsefanovich (ala'n), Yuliya Adamskaya\n */\n@ExportNs('Media')\nexport class ESLMedia extends ESLBaseElement {\n  public static is = 'esl-media';\n  public static eventNs = 'esl:media:';\n\n  /** Media resource identifier */\n  @attr() public mediaId: string;\n  /** Media resource src/url path */\n  @attr() public mediaSrc: string;\n  /** Media resource type. 'auto' (auto detection from src) by default */\n  @attr() public mediaType: string;\n\n  /** Media elements group name */\n  @attr() public group: string;\n  /** Media resource rendering strategy relative to the element area: 'cover', 'inscribe' or not defined */\n  @attr() public fillMode: ESLMediaFillMode;\n  /** Strict aspect ratio definition */\n  @attr() public aspectRatio: string;\n\n\n  /** Disabled marker to prevent rendering */\n  @boolAttr() public disabled: boolean;\n  /** Autoplay resource marker */\n  @boolAttr() public autoplay: boolean;\n  /** Autofocus on play marker */\n  @boolAttr() public autofocus: boolean;\n  /** Mute resource marker */\n  @boolAttr() public muted: boolean;\n  /** Loop resource play */\n  @boolAttr() public loop: boolean;\n  /** Marker to show controls for resource player */\n  @boolAttr() public controls: boolean;\n  /** Allow media to play inline (see HTML video/audio spec) */\n  @boolAttr() public playsinline: boolean;\n  /** Allows play resource only in viewport area */\n  @boolAttr() public playInViewport: boolean;\n\n  /** Preload resource */\n  @attr({defaultValue: 'auto'}) public preload: string;\n\n  /** Ready state class/classes */\n  @attr() public readyClass: string;\n  /** Ready state class/classes target */\n  @attr() public readyClassTarget: string;\n\n  /** Class / classes to add when media is accepted */\n  @attr() public loadClsAccepted: string;\n  /** Class / classes to add when media is declined */\n  @attr() public loadClsDeclined: string;\n  /** Target element {@link TraversingQuery} select to add accepted/declined classes */\n  @attr({defaultValue: '::parent'}) public loadClsTarget: string;\n\n  /** @readonly Ready state marker */\n  @boolAttr({readonly: true}) public ready: boolean;\n  /** @readonly Active state marker */\n  @boolAttr({readonly: true}) public active: boolean;\n  /** @readonly Resource played marker */\n  @boolAttr({readonly: true}) public played: boolean;\n  /** @readonly Error state marker */\n  @boolAttr({readonly: true}) public error: boolean;\n\n  private _provider: BaseProvider | null;\n  private _conditionQuery: ESLMediaQuery | null;\n\n  private deferredResize = rafDecorator(() => this._onResize());\n  private deferredReinitialize = debounce(() => this.reinitInstance());\n\n  /**\n   * @enum Map with possible Player States\n   * values: BUFFERING, ENDED, PAUSED, PLAYING, UNSTARTED, VIDEO_CUED, UNINITIALIZED\n   */\n  static get PLAYER_STATES() {\n    return PlayerStates;\n  }\n\n  static get observedAttributes() {\n    return [\n      'disabled',\n      'media-type',\n      'media-id',\n      'media-src',\n      'fill-mode',\n      'aspect-ratio',\n      'play-in-viewport',\n      'muted',\n      'loop',\n      'controls'\n    ];\n  }\n\n  static supports(name: string): boolean {\n    return ESLMediaProviderRegistry.instance.has(name);\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    if (!this.hasAttribute('role')) {\n      this.setAttribute('role', 'application');\n    }\n    this.innerHTML += '<!-- Inner Content, do not modify it manually -->';\n    ESLMediaProviderRegistry.instance.addListener(this._onRegistryStateChange);\n    if (this.conditionQuery) {\n      this.conditionQuery.addListener(this.deferredReinitialize);\n    }\n    if (this.fillModeEnabled) {\n      window.addEventListener('resize', this.deferredResize);\n    }\n    window.addEventListener('esl:refresh', this._onRefresh);\n    this.attachViewportConstraint();\n    this.deferredReinitialize();\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    ESLMediaProviderRegistry.instance.removeListener(this._onRegistryStateChange);\n    if (this.conditionQuery) {\n      this.conditionQuery.removeListener(this.deferredReinitialize);\n    }\n    if (this.fillModeEnabled) {\n      window.removeEventListener('resize', this.deferredResize);\n    }\n    window.removeEventListener('esl:refresh', this._onRefresh);\n    this.detachViewportConstraint();\n    this._provider && this._provider.unbind();\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string, newVal: string) {\n    if (!this.connected || oldVal === newVal) return;\n    switch (attrName) {\n      case 'disabled':\n      case 'media-id':\n      case 'media-src':\n      case 'media-type':\n        this.deferredReinitialize();\n        break;\n      case 'loop':\n      case 'muted':\n      case 'controls':\n        this._provider && this._provider.onSafeConfigChange(attrName, newVal !== null);\n        break;\n      case 'fill-mode':\n      case 'aspect-ratio':\n        this.deferredResize();\n        break;\n      case 'play-in-viewport':\n        this.playInViewport ?\n          this.attachViewportConstraint() :\n          this.detachViewportConstraint();\n        break;\n    }\n  }\n\n  public canActivate() {\n    if (this.disabled) return false;\n    if (this.conditionQuery) return this.conditionQuery.matches;\n    return true;\n  }\n\n  private reinitInstance() {\n    console.debug('[ESL] Media reinitialize ', this);\n    this._provider && this._provider.unbind();\n    this._provider = null;\n\n    if (this.canActivate()) {\n      this._provider = ESLMediaProviderRegistry.instance.createFor(this);\n      if (this._provider) {\n        this._provider.bind();\n        console.debug('[ESL] Media provider bound', this._provider);\n      } else {\n        this._onError();\n      }\n    }\n\n    this.updateContainerMarkers();\n  }\n\n  public updateContainerMarkers() {\n    const targetEl = TraversingQuery.first(this.loadClsTarget, this) as HTMLElement;\n    if (!targetEl) return;\n\n    const active = this.canActivate();\n    CSSClassUtils.toggle(targetEl, this.loadClsAccepted, active);\n    CSSClassUtils.toggle(targetEl, this.loadClsDeclined, !active);\n  }\n\n  /**\n   * Seek to given position of media\n   * @returns {Promise | void}\n   */\n  public seekTo(pos: number) {\n    return this._provider && this._provider.safeSeekTo(pos);\n  }\n\n  /**\n   * Start playing media\n   * @param {boolean} allowActivate\n   * @returns {Promise | void}\n   */\n  public play(allowActivate: boolean = false) {\n    if (this.disabled && allowActivate) {\n      this.disabled = false;\n      this.deferredReinitialize.cancel();\n      this.reinitInstance();\n    }\n    if (!this.canActivate()) return;\n    return this._provider && this._provider.safePlay();\n  }\n\n  /**\n   * Pause playing media\n   * @returns {Promise | void}\n   */\n  public pause() {\n    return this._provider && this._provider.safePause();\n  }\n\n  /**\n   * Stop playing media\n   * @returns {Promise | void}\n   */\n  public stop() {\n    return this._provider && this._provider.safeStop();\n  }\n\n  /**\n   * Toggle play/pause state of the media\n   * @returns {Promise | void}\n   */\n  public toggle() {\n    return this._provider && this._provider.safeToggle();\n  }\n\n  /** @override */\n  public focus() {\n    this._provider && this._provider.focus();\n  }\n\n  // media live-cycle handlers\n  public _onReady() {\n    this.toggleAttribute('ready', true);\n    this.toggleAttribute('error', false);\n    this.updateReadyClass();\n    this.deferredResize();\n    this.$$fire('ready');\n  }\n\n  public _onError(detail?: any, setReadyState = true) {\n    this.toggleAttribute('ready', true);\n    this.toggleAttribute('error', true);\n    this.$$fire('error', {detail});\n    setReadyState && this.$$fire('ready');\n  }\n\n  public _onDetach() {\n    this.removeAttribute('active');\n    this.removeAttribute('ready');\n    this.removeAttribute('played');\n    this.updateReadyClass();\n    this.$$fire('detach');\n  }\n\n  public _onPlay() {\n    if (this.autofocus) this.focus();\n    this.deferredResize();\n    this.setAttribute('active', '');\n    this.setAttribute('played', '');\n    this.$$fire('play');\n    MediaGroupRestrictionManager.registerPlay(this);\n  }\n\n  public _onPaused() {\n    this.removeAttribute('active');\n    this.$$fire('paused');\n    MediaGroupRestrictionManager.unregister(this);\n  }\n\n  public _onEnded() {\n    this.removeAttribute('active');\n    this.$$fire('ended');\n    MediaGroupRestrictionManager.unregister(this);\n  }\n\n  public _onResize() {\n    if (!this._provider) return;\n    if (this.fillModeEnabled && this.actualAspectRatio > 0) {\n      let stretchVertically = this.offsetWidth / this.offsetHeight < this.actualAspectRatio;\n      if (this.fillMode === 'inscribe') stretchVertically = !stretchVertically; // Inscribe behaves inversely\n      stretchVertically ?\n        this._provider.setSize(this.actualAspectRatio * this.offsetHeight, this.offsetHeight) : // h\n        this._provider.setSize(this.offsetWidth, this.offsetWidth / this.actualAspectRatio);   // w\n    } else {\n      this._provider.setSize('auto', 'auto');\n    }\n  }\n\n  @bind\n  protected _onRefresh(e: Event) {\n    const {target} = e;\n    if (target instanceof HTMLElement && target.contains(this)) {\n      this._onResize();\n    }\n  }\n\n  @bind\n  protected _onRegistryStateChange(name: string) {\n    const type = this.mediaType.toLowerCase() || 'auto';\n    if (name === type || (!this.providerType && type === 'auto')) {\n      this.reinitInstance();\n    }\n  }\n\n  /** Update ready class state */\n  protected updateReadyClass() {\n    const target = TraversingQuery.first(this.readyClassTarget, this) as HTMLElement;\n    target && CSSClassUtils.toggle(target, this.readyClass, this.ready);\n  }\n\n  /** Applied provider */\n  public get providerType() {\n    return this._provider ? this._provider.name : '';\n  }\n\n  /** Current player state, see {@link ESLMedia.PLAYER_STATES} values */\n  public get state() {\n    return this._provider ? this._provider.state : PlayerStates.UNINITIALIZED;\n  }\n\n  /** Duration of the media resource */\n  public get duration() {\n    return this._provider ? this._provider.duration : 0;\n  }\n\n  /** Current time of media resource */\n  public get currentTime() {\n    return this._provider ? this._provider.currentTime : 0;\n  }\n\n  /** Set current time of media resource */\n  public set currentTime(time: number) {\n    (this._provider) && this._provider.safeSeekTo(time);\n  }\n\n  /** ESLMediaQuery to limit ESLMedia loading */\n  public get conditionQuery() {\n    if (!this._conditionQuery && this._conditionQuery !== null) {\n      const query = this.getAttribute('load-condition');\n      this._conditionQuery = query ? new ESLMediaQuery(query) : null;\n    }\n    return this._conditionQuery;\n  }\n\n  /** Fill mode should be handled for element */\n  public get fillModeEnabled() {\n    return this.fillMode === 'cover' || this.fillMode === 'inscribe';\n  }\n\n  /** Used resource aspect ratio forced by attribute or returned by provider */\n  public get actualAspectRatio() {\n    if (this.aspectRatio && this.aspectRatio !== 'auto') return parseAspectRatio(this.aspectRatio);\n    return this._provider ? this._provider.defaultAspectRatio : 0;\n  }\n\n  protected attachViewportConstraint() {\n    if (this.playInViewport) {\n      getIObserver().observe(this);\n    }\n  }\n  protected detachViewportConstraint() {\n    const observer = getIObserver(true);\n    observer && observer.unobserve(this);\n  }\n\n  public $$fire(eventName: string, eventInit?: CustomEventInit): boolean {\n    const ns = (this.constructor as typeof ESLMedia).eventNs;\n    return EventUtils.dispatch(this, ns + eventName, eventInit);\n  }\n}\n","import {loadScript} from '../../esl-utils/dom/script';\nimport {BaseProvider, PlayerStates} from '../core/esl-media-provider';\nimport {randUID} from '../../esl-utils/misc/uid';\n\nimport type {ESLMedia} from '../core/esl-media';\nimport type {ProviderObservedParams} from '../core/esl-media-provider';\nimport type {VideoJsPlayer} from 'video.js';\n\nconst API_SCRIPT_ID = 'BC_API_SOURCE';\n\nexport interface BCPlayerAccount {\n  playerId: string | null;\n  accountId: string | null;\n}\n\n/**\n * Brightcove API provider for {@link ESLMedia}\n * @author Julia Murashko\n */\n@BaseProvider.register\nexport class BrightcoveProvider extends BaseProvider {\n  static readonly providerName: string = 'brightcove';\n\n  protected videojsClasses = 'video-js vjs-default-skin video-js-brightcove';\n\n  protected _api: VideoJsPlayer;\n  protected _account: BCPlayerAccount;\n  protected _autoplay: boolean;\n\n  /**\n   * @returns settings, get from element by default\n   */\n  protected static getAccount(el: ESLMedia): BCPlayerAccount {\n    return {\n      playerId: el.getAttribute('player-id'),\n      accountId: el.getAttribute('player-account')\n    };\n  }\n\n  /**\n   * Loads player API according defined settings\n   * */\n  protected static loadAPI(account: BCPlayerAccount): Promise<Event> {\n    const apiSrc =\n      `//players.brightcove.net/${account.accountId}/${account.playerId}_default/index.min.js`;\n    const apiScript = document.getElementById(API_SCRIPT_ID);\n    if (apiScript && apiScript.parentNode && apiScript.getAttribute('src') !== apiSrc) {\n      apiScript.parentNode.removeChild(apiScript);\n    }\n    return loadScript(API_SCRIPT_ID, apiSrc);\n  }\n\n  /**\n   * Build video brightcove element\n   */\n  protected buildVideo() {\n    const el = document.createElement('video-js');\n    el.id = 'esl-media-brightcove-' + randUID();\n    el.className = 'esl-media-inner esl-media-brightcove ' + this.videojsClasses;\n    el.title = this.config.title;\n    el.toggleAttribute('loop', this.config.loop);\n    el.toggleAttribute('muted', this.config.muted);\n    el.toggleAttribute('controls', this.config.controls);\n    el.setAttribute('aria-label', el.title);\n    el.setAttribute('data-embed', 'default');\n    el.setAttribute('data-video-id', `ref:${this.config.mediaId}`);\n    el.toggleAttribute('playsinline', this.config.playsinline);\n    this._account.playerId && el.setAttribute('data-player', this._account.playerId);\n    this._account.accountId && el.setAttribute('data-account', this._account.accountId);\n    return el;\n  }\n\n  /**\n   * Utility method to convert api event to promise\n   */\n  protected $$fromEvent(eventName: string): Promise<void> {\n    if (!this._api) return Promise.reject();\n    return new Promise((resolve, reject) => this._api ? this._api.one(eventName, resolve) : reject());\n  }\n\n  /**\n   * Executes as soon as api script detected or loaded.\n   * @returns {Promise<VideoJsPlayer>} - promise with provided API\n   */\n  protected onAPILoaded(): Promise<void> | void {\n    if (typeof window.bc !== 'function' || typeof window.videojs !== 'function') {\n      throw new Error('Brightcove API is not in the global scope');\n    }\n    console.debug('ESL Media: Brightcove API init for ', this);\n    this._api = window.bc(this._el);\n    return new Promise((resolve, reject) => this._api ? this._api.ready(resolve) : reject());\n  }\n\n  /**\n   * Executes after API ready state resolved\n   * Basic onAPIReady should be called to subscribe to API state\n   * @returns {Promise | void}\n   */\n  protected onAPIReady(): Promise<void> | void {\n    console.debug('ESL Media: Brightcove API is ready ', this);\n    // Set autoplay though js because BC is unresponsive while processing it natively\n    this._api.autoplay(this._autoplay || this.config.autoplay);\n\n    // Listeners to control player state\n    this._api.on('play', () => this.component._onPlay());\n    this._api.on('pause', () => this.component._onPaused());\n    this._api.on('ended', () => this.component._onEnded());\n    this.component._onReady();\n\n    // Can handle query only when loadedmetadata have happened\n    return this.$$fromEvent('loadedmetadata');\n  }\n\n  public bind() {\n    const Provider = (this.constructor as typeof BrightcoveProvider);\n    this._account = Provider.getAccount(this.component);\n    this._el = this.buildVideo();\n    this.component.appendChild(this._el);\n\n    this._ready = Provider.loadAPI(this._account)\n      .then(() => this.onAPILoaded())\n      .then(() => this.onAPIReady())\n      .catch((e) => this.component._onError(e));\n  }\n\n  public unbind() {\n    this.component._onDetach();\n    this._api && this._api.dispose();\n    super.unbind();\n  }\n\n  protected onConfigChange(param: ProviderObservedParams, value: boolean) {\n    super.onConfigChange(param, value);\n    if (typeof this._api[param] === 'function') {\n      this._api[param](value);\n    }\n  }\n\n  public focus() {\n    this._api && this._api.focus();\n  }\n\n  public get state() {\n    if (this._api) {\n      if (this._api.ended()) return PlayerStates.ENDED;\n      if (this._api.paused()) return PlayerStates.PAUSED;\n      if (!this._api.played()) return PlayerStates.UNSTARTED;\n      return PlayerStates.PLAYING;\n    }\n    return PlayerStates.UNINITIALIZED;\n  }\n\n  public get defaultAspectRatio(): number {\n    if (!this._api) return 0;\n    return this._api.videoWidth() / this._api.videoHeight();\n  }\n\n  public get currentTime() {\n    return this._api ? this._api.currentTime() : 0;\n  }\n\n  public get duration() {\n    return this._api ? this._api.duration() : 0;\n  }\n\n  public seekTo(pos: number) {\n    this._api.currentTime(pos);\n  }\n\n  public play() {\n    this._api.play();\n  }\n\n  public pause() {\n    this._api.pause();\n  }\n\n  public stop() {\n    this._api.currentTime(0);\n    this._api.pause();\n  }\n\n  // Overrides to set tech autoplay marker\n  public safePlay() {\n    this._autoplay = true;\n    return super.safePlay();\n  }\n  public safeStop() {\n    this._autoplay = true;\n    return super.safeStop();\n  }\n}\n\n// root typing\ndeclare global {\n  interface Window {\n    bc?: (el: HTMLElement, ...args: any[]) => VideoJsPlayer;\n  }\n}\n","import {BaseProvider} from '../../core/esl-media-provider';\nimport {HTMLMediaProvider} from './media-provider';\n\n/**\n * Simple Audio API provider for {@link ESLMedia}\n * @author Alexey Stsefanovich (ala'n)\n */\n@BaseProvider.register\nexport class AudioProvider extends HTMLMediaProvider {\n  static readonly providerName: string = 'audio';\n  static readonly urlPattern = /\\.(mp3|wav|aac)(\\?|$)/;\n\n  protected _el: HTMLAudioElement;\n\n  protected createElement(): HTMLAudioElement {\n    const el = document.createElement('audio');\n    el.src = this.config.mediaSrc || '';\n    return el;\n  }\n\n  public get defaultAspectRatio(): number {\n    return 0;\n  }\n}\n","import {BaseProvider, PlayerStates} from '../../core/esl-media-provider';\n\nimport type {MediaProviderConfig, ProviderObservedParams} from '../../core/esl-media-provider';\n\n/**\n * Simple Native Media API provider for {@link ESLMedia}\n * @author Yuliya Adamskaya, Alexey Stsefanovich (ala'n)\n */\nexport abstract class HTMLMediaProvider extends BaseProvider {\n  static readonly urlPattern: RegExp;\n\n  static parseUrl(mediaSrc: string) {\n    if (this.urlPattern.test(mediaSrc)) {\n      return {mediaSrc};\n    }\n    return null;\n  }\n\n  protected _el: HTMLMediaElement;\n\n  protected static applyElementSettings(el: HTMLMediaElement, cfg: MediaProviderConfig) {\n    el.classList.add('esl-media-inner');\n    el.autoplay = cfg.autoplay;\n    el.preload = cfg.preload || 'auto';\n    el.loop = cfg.loop;\n    el.muted = cfg.muted;\n    el.controls = cfg.controls;\n    el.tabIndex = 0;\n    el.toggleAttribute('playsinline', cfg.playsinline);\n    return el;\n  }\n\n  protected abstract createElement(): HTMLMediaElement;\n\n  public onConfigChange(param: ProviderObservedParams, value: boolean) {\n    super.onConfigChange(param, value);\n    HTMLMediaProvider.applyElementSettings(this._el, this.config);\n  }\n\n  public bind() {\n    this._el = this.createElement();\n    HTMLMediaProvider.applyElementSettings(this._el, this.config);\n    this.component.appendChild(this._el);\n    this.bindListeners();\n  }\n\n  protected bindListeners() {\n    this._el.addEventListener('loadedmetadata', () => this.component._onReady());\n    this._el.addEventListener('play', () => this.component._onPlay());\n    this._el.addEventListener('pause', () => this.component._onPaused());\n    this._el.addEventListener('ended', () => this.component._onEnded());\n    this._el.addEventListener('error', (e) => this.component._onError(e));\n  }\n\n  public unbind() {\n    this.component._onDetach();\n    super.unbind();\n  }\n\n  get ready() {\n    return Promise.resolve();\n  }\n\n  public get state() {\n    if (!this._el) return PlayerStates.UNINITIALIZED;\n    if (this._el.ended) return PlayerStates.ENDED;\n    if (!this._el.played || !this._el.played.length) return PlayerStates.UNSTARTED;\n    if (this._el.paused) return PlayerStates.PAUSED;\n    return PlayerStates.PLAYING;\n  }\n\n  public get duration() {\n    return this._el ? this._el.duration : 0;\n  }\n\n  public get currentTime() {\n    return this._el ? this._el.currentTime : 0;\n  }\n\n  public seekTo(pos: number) {\n    this._el.currentTime = pos;\n  }\n\n  public play() {\n    return this._el.play();\n  }\n\n  public pause() {\n    return this._el.pause();\n  }\n\n  public stop() {\n    this._el.pause();\n    this._el.currentTime = 0;\n  }\n}\n","import {BaseProvider} from '../../core/esl-media-provider';\nimport {HTMLMediaProvider} from './media-provider';\n\n/**\n * Simple Video API provider for {@link ESLMedia}\n * @author Yuliya Adamskaya\n */\n@BaseProvider.register\nexport class VideoProvider extends HTMLMediaProvider {\n  static readonly providerName: string = 'video';\n  static readonly urlPattern = /\\.(mp4|webm|ogv|mov)(\\?|$)/;\n\n  protected _el: HTMLVideoElement;\n\n  protected createElement(): HTMLVideoElement {\n    const el = document.createElement('video');\n    el.src = this.config.mediaSrc || '';\n    return el;\n  }\n\n  get defaultAspectRatio(): number {\n    return this._el.videoWidth / this._el.videoHeight;\n  }\n}\n","import {BaseProvider, PlayerStates} from '../core/esl-media-provider';\nimport {randUID} from '../../esl-utils/misc/uid';\n\n/**\n * Simple Basic Iframe provider for {@link ESLMedia}\n * @author Alexey Stsefanovich (ala'n)\n */\n@BaseProvider.register\nexport class IframeBasicProvider extends BaseProvider {\n  static readonly providerName: string = 'iframe';\n\n  private _state: PlayerStates = PlayerStates.UNINITIALIZED;\n  protected _el: HTMLIFrameElement;\n\n  static parseUrl(url: string) {\n    try {\n      if (!url) return null;\n      const {protocol} = new URL(url);\n      if (protocol !== 'http:' && protocol !== 'https:') return null;\n      return {mediaSrc: url};\n    } catch {\n      return null;\n    }\n  }\n\n  protected buildIframe() {\n    const el = document.createElement('iframe');\n    el.id = 'esl-media-iframe-' + randUID();\n    el.className = 'esl-media-inner esl-media-iframe';\n    el.title = this.config.title;\n    el.setAttribute('aria-label', this.config.title);\n    el.setAttribute('frameborder', '0');\n    el.setAttribute('tabindex', '0');\n    el.setAttribute('scrolling', 'no');\n    el.setAttribute('allowfullscreen', 'yes');\n    el.toggleAttribute('playsinline', this.config.playsinline);\n    el.src = this.config.mediaSrc || '';\n    return el;\n  }\n\n  public bind() {\n    if (this._state !== PlayerStates.UNINITIALIZED) return;\n    this._ready = new Promise((resolve, reject) => {\n      this._el = this.buildIframe();\n      this._el.onload = () => resolve(this);\n      this._el.onerror = (e) => reject(e);\n      this._state = PlayerStates.UNSTARTED;\n      this.component.appendChild(this._el);\n    });\n    this._ready.then(() => {\n      this._state = PlayerStates.PLAYING;\n      this.component._onReady();\n      this.component._onPlay();\n    });\n    this._ready.catch((e) => this.component._onError(e));\n  }\n\n  public unbind() {\n    this.component._onDetach();\n    this._state = PlayerStates.UNINITIALIZED;\n    super.unbind();\n  }\n\n  get ready() {\n    return Promise.resolve();\n  }\n\n  public focus() {\n    if (this._el && this._el.contentWindow) {\n      this._el.contentWindow.focus();\n    }\n  }\n\n  public get state() {\n    return this._state;\n  }\n\n  public get duration() {\n    return 0;\n  }\n\n  public get currentTime() {\n    return 0;\n  }\n\n  get defaultAspectRatio(): number {\n    return 0;\n  }\n\n  public seekTo(pos: number) {\n    console.error('[ESLMedia] Unsupported action: can not execute seekTo on abstract iframe provider');\n  }\n\n  public play() {\n    if (this.state === PlayerStates.UNINITIALIZED) {\n      this.bind();\n    }\n  }\n\n  public pause() {\n    this.unbind();\n  }\n\n  public stop() {\n    this.unbind();\n  }\n}\n","import {loadScript} from '../../esl-utils/dom/script';\nimport {BaseProvider, PlayerStates} from '../core/esl-media-provider';\nimport {randUID} from '../../esl-utils/misc/uid';\nimport PlayerVars = YT.PlayerVars;\n\nimport type {MediaProviderConfig, ProviderObservedParams} from '../core/esl-media-provider';\n\nconst DEFAULT_ASPECT_RATIO = 16 / 9;\n\n/**\n * Youtube API provider for {@link ESLMedia}\n * @author Alexey Stsefanovich (ala'n), Yuliya Adamskaya\n */\n@BaseProvider.register\nexport class YouTubeProvider extends BaseProvider {\n  static readonly providerName: string = 'youtube';\n  static readonly idRegexp = /(?:v\\/|v=|vi=|vi\\/|e\\/|embed\\/|user\\/.*\\/u\\/\\d+\\/)([_0-9a-zA-Z-]+)/i;\n  static readonly providerRegexp = /^\\s*(?:http(?:s)?:\\/\\/)?(?:www\\.)?(?:youtu\\.be|youtube(-nocookie)?\\.com)/i;\n\n  protected _el: HTMLDivElement | HTMLIFrameElement;\n  protected _api: YT.Player;\n\n  static parseUrl(url: string) {\n    if (this.providerRegexp.test(url)) {\n      const [, id] = url.match(this.idRegexp) || [];\n      return id ? {mediaId: id} : null;\n    }\n    return null;\n  }\n\n  private static _coreApiPromise: Promise<void>;\n  protected static getCoreApi() {\n    if (!YouTubeProvider._coreApiPromise) {\n      YouTubeProvider._coreApiPromise = new Promise((resolve) => {\n        if (window.YT && window.YT.Player) return resolve(window.YT);\n        loadScript('YT_API_SOURCE', '//www.youtube.com/iframe_api');\n        const cbOrigin = window.onYouTubeIframeAPIReady;\n        window.onYouTubeIframeAPIReady = () => {\n          try {\n            (typeof cbOrigin === 'function') && cbOrigin.apply(window);\n          } catch (err) { // eslint-disable-line\n            // Do Nothing\n          }\n          return resolve(window.YT);\n        };\n      });\n    }\n    return YouTubeProvider._coreApiPromise;\n  }\n\n  protected static mapOptions(cfg: MediaProviderConfig): PlayerVars {\n    return {\n      enablejsapi: 1,\n      origin: location.origin,\n      rel: 0,\n      showinfo: 0,\n      iv_load_policy: 0, // eslint-disable-line\n      autoplay: Number(cfg.autoplay),\n      controls: Number(cfg.controls),\n      playsinline: Number(cfg.playsinline),\n      disablekb: Number(!cfg.controls), // TODO: criteria\n      autohide: Number(!cfg.controls) // TODO: criteria\n    };\n  }\n\n  protected static buildIframe(sm: MediaProviderConfig) {\n    const el = document.createElement('div');\n    el.id = 'esl-media-yt-' + randUID();\n    el.className = 'esl-media-inner esl-media-youtube';\n    el.title = sm.title;\n    el.setAttribute('aria-label', el.title);\n    el.setAttribute('frameborder', '0');\n    el.setAttribute('tabindex', '0');\n    el.setAttribute('allowfullscreen', 'yes');\n    return el;\n  }\n\n  public bind() {\n    this._el = YouTubeProvider.buildIframe(this.config);\n    this.component.appendChild(this._el);\n    this._ready = YouTubeProvider.getCoreApi()\n      .then(() => this.onCoreApiReady())\n      .then(() => this.onPlayerReady())\n      .catch((e) => this.component._onError(e));\n  }\n\n  /** Init YT.Player on target element */\n  protected onCoreApiReady() {\n    return new Promise((resolve, reject) => {\n      console.debug('[ESL]: Media Youtube Player initialization for ', this);\n      this._api = new YT.Player(this._el.id, {\n        videoId: this.config.mediaId,\n        events: {\n          onError: (e) => reject(e),\n          onReady: () => resolve(this),\n          onStateChange: (e) => this._onStateChange(e)\n        },\n        playerVars: YouTubeProvider.mapOptions(this.config)\n      });\n    });\n  }\n  /** Post YT.Player init actions */\n  protected onPlayerReady() {\n    console.debug('[ESL]: Media Youtube Player ready ', this);\n    this._el = this._api.getIframe();\n      if (this.config.muted) {\n      this._api.mute();\n    }\n    this.component._onReady();\n  }\n\n  public unbind() {\n    this.component._onDetach();\n    this._api && this._api.destroy();\n    super.unbind();\n  }\n\n  private _onStateChange(event: YT.OnStateChangeEvent) {\n    switch (+event.data) {\n      case PlayerStates.PLAYING:\n        this.component._onPlay();\n        break;\n      case PlayerStates.PAUSED:\n        this.component._onPaused();\n        break;\n      case PlayerStates.ENDED:\n        if (this.config.loop) {\n          this._api.playVideo();\n        } else {\n          this.component._onEnded();\n        }\n        break;\n    }\n  }\n\n  protected onConfigChange(param: ProviderObservedParams, value: boolean) {\n    super.onConfigChange(param, value);\n    if (param === 'muted') {\n      value ? this._api.mute() : this._api.unMute();\n    }\n  }\n\n  public focus() {\n    if (this._el instanceof HTMLIFrameElement && this._el.contentWindow) {\n      this._el.contentWindow.focus();\n    }\n  }\n\n  public get state() {\n    if (this._api && typeof this._api.getPlayerState === 'function') {\n      return this._api.getPlayerState() as number as PlayerStates;\n    }\n    return PlayerStates.UNINITIALIZED;\n  }\n\n  public get duration() {\n    return this._api ? this._api.getDuration() : 0;\n  }\n\n  public get currentTime() {\n    return this._api ? this._api.getCurrentTime() : 0;\n  }\n\n  public get defaultAspectRatio(): number {\n    return DEFAULT_ASPECT_RATIO;\n  }\n\n  public seekTo(pos: number) {\n    this._api.seekTo(pos, false);\n  }\n\n  public play() {\n    if (this.state === PlayerStates.ENDED) {\n      this._api.seekTo(0, false);\n    }\n    this._api.playVideo();\n  }\n\n  public pause() {\n    this._api.pauseVideo();\n  }\n\n  public stop() {\n    this._api.stopVideo();\n  }\n}\n\n// typings\ndeclare global {\n  interface YT extends Promise<void> {\n    Player: YT.Player,\n  }\n\n  interface Window {\n    YT?: YT;\n    onYouTubeIframeAPIReady?: () => void;\n  }\n}\n","import {ExportNs} from '../../esl-utils/environment/export-ns';\nimport {attr, ESLBaseElement} from '../../esl-base-element/core';\nimport {afterNextRender} from '../../esl-utils/async/raf';\nimport {bind} from '../../esl-utils/decorators/bind';\nimport {CSSClassUtils} from '../../esl-utils/dom/class';\nimport {ESLMediaRuleList} from '../../esl-media-query/core';\nimport {TraversingQuery} from '../../esl-traversing-query/core';\nimport {ESLPanel} from './esl-panel';\n\nimport type {PanelActionParams} from './esl-panel';\n\n/**\n * ESLPanelGroup component\n * @author Julia Murashko\n *\n * ESLPanelGroup is a custom element that is used as a container for a group of {@link ESLPanel}s\n */\n@ExportNs('PanelGroup')\nexport class ESLPanelGroup extends ESLBaseElement {\n  public static is = 'esl-panel-group';\n  /** List of supported modes */\n  public static supportedModes = ['tabs', 'accordion', 'open'];\n\n  /** Rendering mode of the component (takes values from the list of supported modes; 'accordion' by default) */\n  @attr({defaultValue: 'accordion'}) public mode: string;\n  /** Element {@link TraversingQuery} selector to add class that identifies the rendering mode (ESLPanelGroup itself by default) */\n  @attr({defaultValue: ''}) public modeClsTarget: string;\n  /** Class(es) to be added during animation ('animate' by default) */\n  @attr({defaultValue: 'animate'}) public animationClass: string;\n  /** Time to clear animation common params (max-height style + classes) ('auto' by default) */\n  @attr({defaultValue: 'auto'}) public fallbackDuration: number | 'auto';\n  /** List of comma-separated \"modes\" to disable collapse/expand animation (for both Group and Panel animations) */\n  @attr() public noCollapse: string;\n\n  private _modeRules: ESLMediaRuleList<string>;\n\n  /** Height of previous active panel */\n  protected _previousHeight: number = 0;\n  /** Fallback setTimeout timer */\n  protected _fallbackTimer: number = 0;\n\n  protected attributeChangedCallback(attrName: string, oldVal: string, newVal: string) {\n    if (!this.connected || oldVal === newVal) return;\n    if (attrName === 'mode') {\n      this.modeRules = ESLMediaRuleList.parse<string>(newVal, ESLMediaRuleList.STRING_PARSER);\n      this.updateMode();\n    }\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.bindEvents();\n\n    this.modeRules.addListener(this._onModeChange);\n    this.updateMode();\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.modeRules.removeListener(this._onModeChange);\n\n    this.unbindEvents();\n  }\n\n  protected bindEvents() {\n    this.addEventListener('esl:before:show', this._onBeforeShow);\n    this.addEventListener('esl:show', this._onShow);\n    this.addEventListener('esl:before:hide', this._onBeforeHide);\n\n    this.addEventListener('transitionend', this._onTransitionEnd);\n  }\n\n  protected unbindEvents() {\n    this.removeEventListener('esl:before:show', this._onBeforeShow);\n    this.removeEventListener('esl:show', this._onShow);\n    this.removeEventListener('esl:before:hide', this._onBeforeHide);\n\n    this.removeEventListener('transitionend', this._onTransitionEnd);\n  }\n\n  /** @returns Panels that are processed by the current panel group */\n  public get $panels(): ESLPanel[] {\n    const els = Array.from(this.querySelectorAll(ESLPanel.is));\n    return els.filter((el) => this.includesPanel(el)) as ESLPanel[];\n  }\n\n  /** @returns Panels that are active */\n  public get $activePanels() {\n    return this.$panels.filter((el: ESLPanel) => el.open);\n  }\n\n  /** Condition-guard to check if the passed target is a Panel that should be controlled by the Group */\n  public includesPanel(target: any): target is ESLPanel {\n    if (!(target instanceof ESLPanel)) return false;\n    return target.$group === this;\n  }\n\n  /** Process {@link ESLPanel} pre-show event */\n  @bind\n  protected _onBeforeShow(e: CustomEvent) {\n    const panel = e.target;\n    if (!this.includesPanel(panel)) return;\n    this.$activePanels.forEach((el) => (el !== panel) && el.hide());\n  }\n\n  /** Process {@link ESLPanel} show event */\n  @bind\n  protected _onShow(e: CustomEvent) {\n    const panel = e.target;\n    if (!this.includesPanel(panel)) return;\n    if (this.currentMode !== 'tabs') return;\n\n    this.beforeAnimate();\n    if (this.shouldCollapse) {\n      this.onAnimate(this._previousHeight, panel.initialHeight);\n    } else {\n      afterNextRender(() => this.afterAnimate());\n    }\n  }\n\n  /** Process {@link ESLPanel} pre-hide event */\n  @bind\n  protected _onBeforeHide(e: CustomEvent) {\n    // TODO: refactor\n    if (this.currentMode === 'open') {\n      e.preventDefault();\n      return;\n    }\n    const panel = e.target;\n    if (!this.includesPanel(panel)) return;\n    this._previousHeight = this.offsetHeight;\n  }\n\n  /** Animate the height of the component */\n  protected onAnimate(from: number, to: number) {\n    const hasCurrent = this.style.height && this.style.height !== 'auto';\n    if (hasCurrent) {\n      this.style.height = `${to}px`;\n      this.fallbackAnimate();\n    } else {\n      // set initial height\n      this.style.height = `${from}px`;\n      // make sure that browser apply initial height to animate\n      afterNextRender(() => {\n        this.style.height = `${to}px`;\n        this.fallbackAnimate();\n      });\n    }\n  }\n\n  /** Pre-processing animation action */\n  protected beforeAnimate() {\n    CSSClassUtils.add(this, this.animationClass);\n  }\n\n  /** Post-processing animation action */\n  protected afterAnimate() {\n    this.style.removeProperty('height');\n    CSSClassUtils.remove(this, this.animationClass);\n  }\n\n  /** Init a fallback timer to call post-animate action */\n  protected fallbackAnimate() {\n    const time = +this.fallbackDuration;\n    if (isNaN(time) || time < 0) return;\n    if (this._fallbackTimer) clearTimeout(this._fallbackTimer);\n    this._fallbackTimer = window.setTimeout(() => this.afterAnimate(), time);\n  }\n\n  /** Catching CSS transition end event to start post-animate processing */\n  @bind\n  protected _onTransitionEnd(e?: TransitionEvent) {\n    if (!e || e.propertyName === 'height') {\n      this.afterAnimate();\n    }\n  }\n\n  /** @returns Whether the collapse/expand animation should be handheld by the group */\n  public get shouldCollapse() {\n    const noCollapseModes = this.noCollapse.split(',').map((mode) => mode.trim());\n    return !noCollapseModes.includes('all') && !noCollapseModes.includes(this.currentMode);\n  }\n\n  /** @returns Action params config that is used by controlled {@link ESLPanel}s */\n  public get panelConfig(): PanelActionParams {\n    return {\n      noCollapse: !this.shouldCollapse || (this.currentMode === 'tabs')\n    };\n  }\n\n  /** ESLMediaRuleList instance of the mode mapping */\n  public get modeRules() {\n    if (!this._modeRules) {\n      this.modeRules = ESLMediaRuleList.parse<string>(this.mode, ESLMediaRuleList.STRING_PARSER);\n    }\n    return this._modeRules;\n  }\n  public set modeRules(rules: ESLMediaRuleList<string>) {\n    if (this._modeRules) {\n      this._modeRules.removeListener(this._onModeChange);\n    }\n    this._modeRules = rules;\n    this._modeRules.addListener(this._onModeChange);\n  }\n\n  /** @returns current mode */\n  public get currentMode(): string {\n    return this.modeRules.activeValue || '';\n  }\n\n  /** Handles mode change */\n  @bind\n  protected _onModeChange() {\n    this.updateMode();\n  }\n\n  /** Update element state according to current mode */\n  protected updateMode() {\n    this.setAttribute('view', this.currentMode);\n    const $target = TraversingQuery.first(this.modeClsTarget, this);\n    if (!$target) return;\n    ESLPanelGroup.supportedModes.forEach((mode) => {\n      $target.classList.toggle(`esl-${mode}-view`, this.currentMode === mode);\n    });\n\n    // TODO: refactor\n    ESLPanel.registered.then(() => {\n      this.$panels.forEach((panel) => {\n        const shouldOpen = this.currentMode === 'open' || panel.initiallyOpened;\n        panel.toggle(shouldOpen, {initiator: 'group', activator: this});\n      });\n    });\n  }\n}\n","import {ExportNs} from '../../esl-utils/environment/export-ns';\nimport {CSSClassUtils} from '../../esl-utils/dom/class';\nimport {bind} from '../../esl-utils/decorators/bind';\nimport {afterNextRender} from '../../esl-utils/async/raf';\nimport {attr, jsonAttr} from '../../esl-base-element/core';\nimport {ESLToggleable} from '../../esl-toggleable/core';\nimport {ESLPanelGroup} from './esl-panel-group';\n\nimport type {ToggleableActionParams} from '../../esl-toggleable/core';\n\n/** {@link ESLPanel} action params interface */\nexport interface PanelActionParams extends ToggleableActionParams {\n  /** Prevents collapsing/expanding animation */\n  noCollapse?: boolean;\n}\n\n/**\n * ESLPanel component\n * @author Julia Murashko\n *\n * ESLPanel is a custom element that is used as a wrapper for content that can be shown or hidden.\n * Can use collapsing/expanding animation (smooth height change).\n * Can be used in conjunction with {@link ESLPanelGroup} to control a group of ESLPopups\n */\n@ExportNs('Panel')\nexport class ESLPanel extends ESLToggleable {\n  public static is = 'esl-panel';\n\n  /** Class(es) to be added for active state ('open' by default) */\n  @attr({defaultValue: 'open'}) public activeClass: string;\n  /** Class(es) to be added during animation ('animate' by default) */\n  @attr({defaultValue: 'animate'}) public animateClass: string;\n  /** Class(es) to be added during animation after next render ('post-animate' by default) */\n  @attr({defaultValue: 'post-animate'}) public postAnimateClass: string;\n  /** Time to clear animation common params (max-height style + classes) ('auto' by default) */\n  @attr({defaultValue: 'auto'}) public fallbackDuration: number | 'auto';\n\n  /** Initial params for current ESLPanel instance */\n  @jsonAttr<PanelActionParams>({defaultValue: {force: true, initiator: 'init'}})\n  public initialParams: ToggleableActionParams;\n\n  /** Inner height state that updates after show/hide actions but before show/hide events triggered */\n  protected _initialHeight: number = 0;\n  /** Inner timer to cleanup animation styles */\n  protected _fallbackTimer: number = 0;\n\n  /** @returns Previous active panel height at the start of the animation */\n  public get initialHeight() {\n    return this._initialHeight;\n  }\n\n  /** @returns Closest panel group or null if not presented */\n  public get $group(): ESLPanelGroup | null {\n    if (this.groupName === 'none' || this.groupName) return null;\n    return this.closest(ESLPanelGroup.is);\n  }\n\n  protected bindEvents() {\n    super.bindEvents();\n    this.addEventListener('transitionend', this._onTransitionEnd);\n  }\n\n  protected unbindEvents() {\n    super.unbindEvents();\n    this.removeEventListener('transitionend', this._onTransitionEnd);\n  }\n\n  /** Process show action */\n  protected onShow(params: PanelActionParams) {\n    super.onShow(params);\n    this.clearAnimation();\n    this._initialHeight = this.offsetHeight;\n\n    this.beforeAnimate();\n    if (params.noCollapse) {\n      afterNextRender(() => this.afterAnimate());\n    } else {\n      this.onAnimate('show');\n    }\n  }\n\n  /** Process hide action */\n  protected onHide(params: PanelActionParams) {\n    this.clearAnimation();\n    this._initialHeight = this.offsetHeight;\n    super.onHide(params);\n\n    this.beforeAnimate();\n    if (params.noCollapse) {\n      afterNextRender(() => this.afterAnimate());\n    } else {\n      this.onAnimate('hide');\n    }\n  }\n\n  /** Pre-processing animation action */\n  protected beforeAnimate() {\n    CSSClassUtils.add(this, this.animateClass);\n    this.postAnimateClass && afterNextRender(() => CSSClassUtils.add(this, this.postAnimateClass));\n  }\n\n  /** Process animation */\n  protected onAnimate(action: string) {\n    // set initial height\n    this.style.setProperty('max-height', `${action === 'hide' ? this._initialHeight : 0}px`);\n    // make sure that browser apply initial height for animation\n    afterNextRender(() => {\n      this.style.setProperty('max-height', `${action === 'hide' ? 0 : this._initialHeight}px`);\n      this.fallbackAnimate();\n    });\n  }\n\n  /** Post-processing animation action */\n  protected afterAnimate() {\n    this.clearAnimation();\n    this.$$fire(this.open ? 'after:show' : 'after:hide');\n  }\n\n  /** Clear animation properties */\n  protected clearAnimation() {\n    this.style.removeProperty('max-height');\n    CSSClassUtils.remove(this, this.animateClass);\n    CSSClassUtils.remove(this, this.postAnimateClass);\n  }\n\n  /** Init a fallback timer to call post-animate action */\n  protected fallbackAnimate() {\n    const time = +this.fallbackDuration;\n    if (isNaN(time) || time < 0) return;\n    if (this._fallbackTimer) clearTimeout(this._fallbackTimer);\n    this._fallbackTimer = window.setTimeout(() => this.afterAnimate(), time);\n  }\n\n  /** Catching CSS transition end event to start post-animate processing */\n  @bind\n  protected _onTransitionEnd(e?: TransitionEvent) {\n    if (!e || e.propertyName === 'max-height') {\n      this.afterAnimate();\n    }\n  }\n\n  /** Merge params that are used by panel group for actions */\n  protected mergeDefaultParams(params?: ToggleableActionParams): ToggleableActionParams {\n    const stackConfig = this.$group?.panelConfig || {};\n    return Object.assign({}, stackConfig, this.defaultParams, params || {});\n  }\n}\n","import {ExportNs} from '../../esl-utils/environment/export-ns';\nimport {attr} from '../../esl-base-element/core';\nimport {ESLToggleable} from '../../esl-toggleable/core';\nimport {ScrollUtils} from '../../esl-utils/dom/scroll';\n\nimport type {ScrollStrategy} from '../../esl-utils/dom/scroll';\nimport type {ToggleableActionParams} from '../../esl-toggleable/core';\n\n@ExportNs('Popup')\nexport class ESLPopup extends ESLToggleable {\n  public static is = 'esl-popup';\n\n  @attr({defaultValue: null}) public disableScroll: ScrollStrategy;\n\n  protected onShow(params: ToggleableActionParams) {\n    super.onShow(params);\n\n    this.disableScroll !== null && ScrollUtils.requestLock(this, this.disableScroll);\n  }\n\n  protected onHide(params: ToggleableActionParams) {\n    super.onHide(params);\n\n    this.disableScroll !== null && ScrollUtils.requestUnlock(this, this.disableScroll);\n  }\n}\n","import {ExportNs} from '../../esl-utils/environment/export-ns';\nimport {ESLBaseElement, attr, boolAttr} from '../../esl-base-element/core';\nimport {bind} from '../../esl-utils/decorators/bind';\nimport {ready} from '../../esl-utils/decorators/ready';\nimport {rafDecorator} from '../../esl-utils/async/raf';\nimport {EventUtils} from '../../esl-utils/dom/events';\nimport {TraversingUtils} from '../../esl-utils/dom/traversing';\nimport {TraversingQuery} from '../../esl-traversing-query/core';\n\n/**\n * ESL Scrollbar component\n * @author Yuliya Adamskaya\n */\n@ExportNs('Scrollbar')\nexport class ESLScrollbar extends ESLBaseElement {\n  public static is = 'esl-scrollbar';\n\n  /** Horizontal scroll orientation marker */\n  @boolAttr() public horizontal: boolean;\n\n  /** Target element {@link TraversingQuery} selector. Parent element by default */\n  @attr({defaultValue: '::parent'}) public target: string;\n  /** Custom class for thumb element. 'scrollbar-thumb' by default */\n  @attr({defaultValue: 'scrollbar-thumb'}) public thumbClass: string;\n  /** Custom class for track element area. 'scrollbar-track' by default */\n  @attr({defaultValue: 'scrollbar-track'}) public trackClass: string;\n\n  /** @readonly Dragging state marker */\n  @boolAttr() protected dragging: boolean;\n  /** @readonly Inactive state marker */\n  @boolAttr({readonly: true}) public inactive: boolean;\n\n  protected $scrollbarThumb: HTMLElement;\n  protected $scrollbarTrack: HTMLElement;\n\n  protected _$target: HTMLElement | null;\n  protected _initialPosition: number;\n  protected _initialMousePosition: number;\n\n  protected deferredRefresh = rafDecorator(() => this.refresh());\n  protected _resizeObserver = new ResizeObserver(this.deferredRefresh);\n  protected _mutationObserver = new MutationObserver((rec) => this.updateContentObserve(rec));\n\n  static get observedAttributes() {\n    return ['target', 'horizontal'];\n  }\n\n  @ready\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.findTarget();\n    this.render();\n    this.bindEvents();\n  }\n\n  @ready\n  protected disconnectedCallback() {\n    this.unbindEvents();\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string, newVal: string) {\n    if (!this.connected && oldVal === newVal) return;\n    if (attrName === 'target') this.findTarget();\n    if (attrName === 'horizontal') this.refresh();\n  }\n\n  protected findTarget() {\n    this.$target = this.target ?\n      TraversingQuery.first(this.target, this) as HTMLElement :\n      null;\n  }\n\n  /** Target element to observe and scroll */\n  public get $target() {\n    return this._$target || null;\n  }\n\n  public set $target(content: HTMLElement | null) {\n    this.unbindTargetEvents();\n    this._$target = content;\n    this.bindTargetEvents();\n    this.deferredRefresh();\n  }\n\n  protected render() {\n    this.innerHTML = '';\n    this.$scrollbarTrack = document.createElement('div');\n    this.$scrollbarTrack.className = this.trackClass;\n    this.$scrollbarThumb = document.createElement('div');\n    this.$scrollbarThumb.className = this.thumbClass;\n\n    this.$scrollbarTrack.appendChild(this.$scrollbarThumb);\n    this.appendChild(this.$scrollbarTrack);\n  }\n\n  protected bindEvents() {\n    this.addEventListener('click', this._onClick);\n    this.$scrollbarThumb.addEventListener('mousedown', this._onMouseDown);\n    window.addEventListener('esl:refresh', this._onRefresh);\n  }\n\n  protected bindTargetEvents() {\n    if (!this.$target) return;\n    if (document.documentElement === this.$target) {\n      window.addEventListener('resize', this._onRefresh, {passive: true});\n      window.addEventListener('scroll', this._onRefresh, {passive: true});\n    } else {\n      this._resizeObserver.observe(this.$target);\n      this._mutationObserver.observe(this.$target, {childList: true});\n      Array.from(this.$target.children).forEach((el) => this._resizeObserver.observe(el));\n      this.$target.addEventListener('scroll', this._onRefresh, {passive: true});\n    }\n  }\n\n  protected updateContentObserve(recs: MutationRecord[] = []) {\n    if (!this.$target) return;\n    const contentChanges = recs.filter((rec) => rec.type === 'childList');\n    contentChanges.forEach((rec) => {\n      Array.from(rec.addedNodes)\n        .filter((el) => el instanceof Element)\n        .forEach((el: Element) => this._resizeObserver.observe(el));\n      Array.from(rec.removedNodes)\n        .filter((el) => el instanceof Element)\n        .forEach((el: Element) => this._resizeObserver.unobserve(el));\n    });\n    if (contentChanges.length) this.deferredRefresh();\n  }\n\n  protected unbindEvents() {\n    this.removeEventListener('click', this._onClick);\n    this.$scrollbarThumb.removeEventListener('mousedown', this._onMouseDown);\n    this.unbindTargetEvents();\n    window.removeEventListener('esl:refresh', this._onRefresh);\n  }\n\n  protected unbindTargetEvents() {\n    if (!this.$target) return;\n    if (document.documentElement === this.$target) {\n      window.removeEventListener('resize', this._onRefresh);\n      window.removeEventListener('scroll', this._onRefresh);\n    } else {\n      this._resizeObserver.disconnect();\n      this._mutationObserver.disconnect();\n      this.$target.removeEventListener('scroll', this._onRefresh);\n    }\n  }\n\n  /** @readonly Scrollable distance size value (px) */\n  public get scrollableSize() {\n    if (!this.$target) return 0;\n    return this.horizontal ?\n      this.$target.scrollWidth - this.$target.clientWidth :\n      this.$target.scrollHeight - this.$target.clientHeight;\n  }\n\n  /** @readonly Track size value (px) */\n  public get trackOffset() {\n    return this.horizontal ? this.$scrollbarTrack.offsetWidth : this.$scrollbarTrack.offsetHeight;\n  }\n\n  /** @readonly Thumb size value (px) */\n  public get thumbOffset() {\n    return this.horizontal ? this.$scrollbarThumb.offsetWidth : this.$scrollbarThumb.offsetHeight;\n  }\n\n  /** @readonly Relative thumb size value (between 0.0 and 1.0) */\n  public get thumbSize() {\n    // behave as native scroll\n    if (!this.$target || !this.$target.scrollWidth || !this.$target.scrollHeight) return 1;\n    const areaSize = this.horizontal ? this.$target.clientWidth : this.$target.clientHeight;\n    const scrollSize = this.horizontal ? this.$target.scrollWidth : this.$target.scrollHeight;\n    return Math.min((areaSize + 1) / scrollSize, 1);\n  }\n\n  /** Relative position value (between 0.0 and 1.0) */\n  public get position() {\n    if (!this.$target) return 0;\n    const scrollOffset = this.horizontal ? this.$target.scrollLeft : this.$target.scrollTop;\n    return this.scrollableSize ? (scrollOffset / this.scrollableSize) : 0;\n  }\n\n  public set position(position) {\n    const normalizedPosition = Math.min(1, Math.max(0, position));\n    this.scrollTargetTo(this.scrollableSize * normalizedPosition);\n    this.update();\n  }\n\n  /** Scroll target element to passed position */\n  protected scrollTargetTo(pos: number) {\n    if (!this.$target) return;\n    this.$target.scrollTo({\n      [this.horizontal ? 'left' : 'top']: pos,\n      behavior: this.dragging ? 'auto' : 'smooth'\n    });\n  }\n\n  /** Update thumb size and position */\n  public update() {\n    if (!this.$scrollbarThumb || !this.$scrollbarTrack) return;\n    const thumbSize = this.trackOffset * this.thumbSize;\n    const thumbPosition = (this.trackOffset - thumbSize) * this.position;\n    const style = {\n      [this.horizontal ? 'left' : 'top']: `${thumbPosition}px`,\n      [this.horizontal ? 'width' : 'height']: `${thumbSize}px`\n    };\n    Object.assign(this.$scrollbarThumb.style, style);\n  }\n\n  /** Update auxiliary markers */\n  public updateMarkers() {\n    this.toggleAttribute('inactive', this.thumbSize >= 1);\n  }\n\n  /** Refresh scroll state and position */\n  public refresh() {\n    this.update();\n    this.updateMarkers();\n  }\n\n  // Event listeners\n  /** `mousedown` event to track thumb drag start */\n  @bind\n  protected _onMouseDown(event: MouseEvent) {\n    this.dragging = true;\n    this._initialPosition = this.position;\n    this._initialMousePosition = this.horizontal ? event.clientX : event.clientY;\n\n    // Attach drag listeners\n    window.addEventListener('mousemove', this._onMouseMove);\n    window.addEventListener('mouseup', this._onMouseUp);\n    window.addEventListener('click', this._onBodyClick, {capture: true});\n\n    // Prevents default text selection, etc.\n    event.preventDefault();\n  }\n\n  /** Set position on drug */\n  protected _dragToCoordinate(mousePosition: number) {\n    const positionChange = mousePosition - this._initialMousePosition;\n    const scrollableAreaHeight = this.trackOffset - this.thumbOffset;\n    const absChange = scrollableAreaHeight ? (positionChange / scrollableAreaHeight) : 0;\n    this.position = this._initialPosition + absChange;\n  }\n  protected _deferredDragToCoordinate = rafDecorator(this._dragToCoordinate);\n\n  /** `mousemove` document handler for thumb drag event. Active only if drag action is active */\n  @bind\n  protected _onMouseMove(event: MouseEvent) {\n    if (!this.dragging) return;\n\n    // Request position update\n    this._deferredDragToCoordinate(this.horizontal ? event.clientX : event.clientY);\n\n    // Prevents default text selection, etc.\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  /** `mouseup` short-time document handler for drag end action */\n  @bind\n  protected _onMouseUp() {\n    this.dragging = false;\n\n    // Unbind drag listeners\n    window.removeEventListener('mousemove', this._onMouseMove);\n    window.removeEventListener('mouseup', this._onMouseUp);\n  }\n\n  /** Body `click` short-time handler to prevent clicks event on thumb drag. Handles capture phase */\n  @bind\n  protected _onBodyClick(event: MouseEvent) {\n    event.stopImmediatePropagation();\n\n    window.removeEventListener('click', this._onBodyClick, {capture: true});\n  }\n\n  /** Handler for track clicks. Move scroll to selected position */\n  @bind\n  protected _onClick(event: MouseEvent) {\n    if (event.target !== this.$scrollbarTrack && event.target !== this) return;\n    const clickCoordinates = EventUtils.normalizeCoordinates(event, this.$scrollbarTrack);\n    const clickPosition = this.horizontal ? clickCoordinates.x : clickCoordinates.y;\n\n    const freeTrackArea = this.trackOffset - this.thumbOffset; // px\n    const clickPositionNoOffset = clickPosition - this.thumbOffset / 2;\n    const newPosition = clickPositionNoOffset / freeTrackArea;  // abs % to track\n\n    this.position = Math.min(this.position + this.thumbSize,\n      Math.max(this.position - this.thumbSize, newPosition));\n  }\n\n  /**\n   * Handler for refresh events to update the scroll.\n   * @param event - instance of 'resize' or 'scroll' or 'esl:refresh' event.\n   */\n  @bind\n  protected _onRefresh(event: Event) {\n    const target = event.target as HTMLElement;\n    if (event.type === 'scroll' && this.dragging) return;\n    if (event.type === 'esl:refresh' && !TraversingUtils.isRelative(target.parentNode, this.$target)) return;\n    this.deferredRefresh();\n  }\n}\n","import {ExportNs} from '../../esl-utils/environment/export-ns';\nimport {ESLTrigger} from '../../esl-trigger/core';\nimport {attr} from '../../esl-base-element/decorators/attr';\n\n/**\n * ESlTab component\n * @author Julia Murashko\n *\n * Tab trigger item, usually used in conjunction with a {@link ESLTabs}.\n * Can control any {@link ESLToggleable} instance but is usually used in conjunction with {@link ESLPanel}\n */\n@ExportNs('Tab')\nexport class ESLTab extends ESLTrigger {\n  public static is = 'esl-tab';\n\n  @attr({defaultValue: 'show'}) public mode: string;\n  @attr({defaultValue: 'active'}) public activeClass: string;\n\n  public initA11y() {\n    const target = this.$a11yTarget;\n    if (!target) return;\n    if (target.hasAttribute('role')) return;\n    target.setAttribute('role', 'tab');\n  }\n\n  public updateA11y() {\n    const target = this.$a11yTarget;\n    if (!target) return;\n    target.setAttribute('aria-selected', String(this.active));\n    target.setAttribute('tabindex', this.active ? '0' : '-1');\n\n    // TODO: auto generate\n    if (this.$target.id) {\n      this.setAttribute('aria-controls', this.$target.id);\n    }\n  }\n}\n","import {ExportNs} from '../../esl-utils/environment/export-ns';\nimport {ESLBaseElement, attr} from '../../esl-base-element/core';\nimport {rafDecorator} from '../../esl-utils/async/raf';\nimport {bind} from '../../esl-utils/decorators/bind';\nimport {RTLUtils} from '../../esl-utils/dom/rtl';\nimport {debounce} from '../../esl-utils/async/debounce';\nimport {CSSClassUtils} from '../../esl-utils/dom/class';\nimport {ESLMediaRuleList} from '../../esl-media-query/core/esl-media-rule-list';\nimport {ESLTab} from './esl-tab';\n\n/**\n * ESlTabs component\n * @author Julia Murashko\n *\n * Tabs container component for Tabs trigger group.\n * Uses {@link ESLTab} as an item.\n * Each individual {@link ESLTab} can control {@link ESLToggleable} or, usually, {@link ESLPanel}\n */\n@ExportNs('Tabs')\nexport class ESLTabs extends ESLBaseElement {\n  public static is = 'esl-tabs';\n\n  /** List of supported scrollable types */\n  public static supportedScrollableTypes = ['disabled', 'side', 'center'];\n\n  static get observedAttributes() {\n    return ['scrollable'];\n  }\n\n  /** Scrollable mode.\n   * Supported types for different breakpoints ('disabled' by default):\n   * - 'disabled' or not defined -  scroll behavior is disabled;\n   * - 'center' - scroll behavior is enabled, tab is center-aligned;\n   * - 'side' - scroll behavior is enabled, tab is side-aligned;\n   * - empty or unsupported value - scroll behavior is enabled, tab is side-aligned;\n   */\n  @attr({defaultValue: 'disabled'}) public scrollable: string;\n\n  /** Inner element to contain {@link ESLTab} collection. Will be scrolled in a scrollable mode */\n  @attr({defaultValue: '.esl-tab-container'}) public scrollableTarget: string;\n\n  private _scrollableTypeRules: ESLMediaRuleList<string>;\n\n\n  protected attributeChangedCallback(attrName: string, oldVal: string, newVal: string) {\n    if (!this.connected || oldVal === newVal) return;\n    if (attrName === 'scrollable') {\n      this.scrollableTypeRules = ESLMediaRuleList.parse<string>(newVal, ESLMediaRuleList.STRING_PARSER);\n      this.updateScrollableType();\n    }\n  }\n\n  protected connectedCallback() {\n    super.connectedCallback();\n\n    this.updateScrollableType();\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.unbindScrollableEvents();\n  }\n\n  protected bindScrollableEvents() {\n    this.addEventListener('esl:change:active', this._onTriggerStateChange);\n    this.addEventListener('click', this._onClick, false);\n    this.addEventListener('focusin', this._onFocus);\n    this.$scrollableTarget?.addEventListener('scroll', this._onScroll, {passive: true});\n\n    window.addEventListener('resize', this._onResize);\n  }\n  protected unbindScrollableEvents() {\n    this.removeEventListener('esl:change:active', this._onTriggerStateChange);\n    this.removeEventListener('click', this._onClick, false);\n    this.removeEventListener('focusin', this._onFocus);\n    this.$scrollableTarget?.removeEventListener('scroll', this._onScroll);\n\n    window.removeEventListener('resize', this._onResize);\n  }\n\n  /** Collection of inner {@link ESLTab} items */\n  public get $tabs(): ESLTab[] {\n    const els = this.querySelectorAll(ESLTab.is);\n    return els ? Array.from(els) as ESLTab[] : [];\n  }\n\n  /** Active {@link ESLTab} item */\n  public get $current(): ESLTab | null {\n    return this.$tabs.find((el) => el.active) || null;\n  }\n\n  /** Container element to scroll */\n  public get $scrollableTarget(): HTMLElement | null {\n    return this.querySelector(this.scrollableTarget);\n  }\n\n  /** Is the scrollable mode enabled ? */\n  public get isScrollable(): boolean {\n    return this.currentScrollableType !== 'disabled';\n  }\n\n  /** Move scroll to the next/previous item */\n  public moveTo(direction: string, behavior: ScrollBehavior = 'smooth') {\n    const $scrollableTarget = this.$scrollableTarget;\n    if (!$scrollableTarget) return;\n    let left = $scrollableTarget.offsetWidth;\n    left = RTLUtils.isRtl(this) && RTLUtils.scrollType !== 'reverse' ? -left : left;\n    left = direction === 'left' ? -left : left;\n\n    $scrollableTarget.scrollBy({left, behavior});\n  }\n\n  /** Scroll tab to the view */\n  protected fitToViewport($trigger: ESLTab, behavior: ScrollBehavior = 'smooth'): void {\n    this.updateMarkers();\n\n    const $scrollableTarget = this.$scrollableTarget;\n    if (!$scrollableTarget || !$trigger) return;\n\n    const areaRect = $scrollableTarget.getBoundingClientRect();\n    const itemRect = $trigger.getBoundingClientRect();\n\n    $scrollableTarget.scrollBy({\n      left: this.calcScrollOffset(itemRect, areaRect),\n      behavior\n    });\n\n    this.updateArrows();\n  }\n\n  /** Get scroll offset position from the selected item rectangle */\n  protected calcScrollOffset(itemRect: DOMRect, areaRect: DOMRect) {\n    const isReversedRTL = RTLUtils.isRtl(this) && RTLUtils.scrollType === 'reverse';\n\n    if (this.currentScrollableType === 'center') {\n      const shift = itemRect.left + itemRect.width / 2 - (areaRect.left + areaRect.width / 2);\n      return isReversedRTL ? -shift : shift;\n    }\n\n    // item is out of area from the right side\n    // else item out is of area from the left side\n    if (itemRect.right > areaRect.right) {\n      return isReversedRTL ? Math.floor(areaRect.right - itemRect.right) : Math.ceil(itemRect.right - areaRect.right);\n    } else if (itemRect.left < areaRect.left) {\n      return isReversedRTL ? Math.ceil(areaRect.left - itemRect.left) : Math.floor(itemRect.left - areaRect.left);\n    }\n  }\n\n  protected updateArrows() {\n    const $scrollableTarget = this.$scrollableTarget;\n    if (!$scrollableTarget) return;\n\n    const swapSides = RTLUtils.isRtl(this) && RTLUtils.scrollType === 'default';\n    const scrollStart = Math.abs($scrollableTarget.scrollLeft) > 1;\n    const scrollEnd = Math.abs($scrollableTarget.scrollLeft) + $scrollableTarget.clientWidth + 1 < $scrollableTarget.scrollWidth;\n\n    const $rightArrow = this.querySelector('[data-tab-direction=\"right\"]');\n    const $leftArrow = this.querySelector('[data-tab-direction=\"left\"]');\n\n    $leftArrow && $leftArrow.toggleAttribute('disabled', !(swapSides ? scrollEnd : scrollStart));\n    $rightArrow && $rightArrow.toggleAttribute('disabled', !(swapSides ? scrollStart : scrollEnd));\n  }\n\n  protected updateMarkers() {\n    const $scrollableTarget = this.$scrollableTarget;\n    if (!$scrollableTarget) return;\n\n    const hasScroll = this.isScrollable && ($scrollableTarget.scrollWidth > this.clientWidth);\n    this.toggleAttribute('has-scroll', hasScroll);\n  }\n\n  protected _deferredUpdateArrows = debounce(this.updateArrows.bind(this), 100);\n  protected _deferredFitToViewport = debounce(this.fitToViewport.bind(this), 100);\n\n  @bind\n  protected _onTriggerStateChange() {\n    this._deferredFitToViewport(this.$current);\n  }\n\n  @bind\n  protected _onClick(event: Event) {\n    const eventTarget: HTMLElement = event.target as HTMLElement;\n    const target: HTMLElement | null = eventTarget.closest('[data-tab-direction]');\n    const direction = target && target.dataset.tabDirection;\n\n    if (!direction) return;\n    this.moveTo(direction);\n  }\n\n  @bind\n  protected _onFocus(e: FocusEvent) {\n    const target = e.target;\n    if (target instanceof ESLTab) this._deferredFitToViewport(target);\n  }\n\n  @bind\n  protected _onScroll() {\n    this._deferredUpdateArrows();\n  }\n\n  // TODO: is the raf decorator needed?\n  protected _onResize = rafDecorator(() => {\n    this._deferredFitToViewport(this.$current, 'auto');\n  });\n\n  /** ESLMediaRuleList instance of the scrollable type mapping */\n  public get scrollableTypeRules() {\n    if (!this._scrollableTypeRules) {\n      this.scrollableTypeRules = ESLMediaRuleList.parse<string>(this.scrollable, ESLMediaRuleList.STRING_PARSER);\n    }\n    return this._scrollableTypeRules;\n  }\n  public set scrollableTypeRules(rules: ESLMediaRuleList<string>) {\n    if (this._scrollableTypeRules) {\n      this._scrollableTypeRules.removeListener(this._onScrollableTypeChange);\n    }\n    this._scrollableTypeRules = rules;\n    this._scrollableTypeRules.addListener(this._onScrollableTypeChange);\n  }\n\n  /** @returns current scrollable type */\n  public get currentScrollableType(): string {\n    return this.scrollableTypeRules.activeValue || '';\n  }\n\n  /** Handles scrollable type change */\n  @bind\n  protected _onScrollableTypeChange() {\n    this.updateScrollableType();\n  }\n\n  /** Update element state according to scrollable type */\n  protected updateScrollableType() {\n    ESLTabs.supportedScrollableTypes.forEach((type) => {\n      CSSClassUtils.toggle(this, `${type}-alignment`, this.currentScrollableType === type);\n    });\n\n    this.$current && this._deferredFitToViewport(this.$current);\n\n    if (this.currentScrollableType === 'disabled') {\n      this.unbindScrollableEvents();\n    } else {\n      this.bindScrollableEvents();\n    }\n  }\n}\n","import {ESLBaseElement} from '../../esl-base-element/core';\nimport {bind} from '../../esl-utils/decorators/bind';\nimport {EventUtils} from '../../esl-utils/dom/events';\nimport {ExportNs} from '../../esl-utils/environment/export-ns';\nimport {ESLToggleable} from './esl-toggleable';\n\n/**\n * ESLToggleableDispatcher\n * @author Julia Murashko, Alexey Stsefanovich (ala'n)\n *\n * ESLToggleableDispatcher - plugin component, that prevents activation of multiple ESLToggleable instances in bounds of managed container.\n */\n@ExportNs('ToggleableGroupDispatcher')\nexport class ESLToggleableDispatcher extends ESLBaseElement {\n  public static readonly is = 'esl-toggleable-dispatcher';\n\n  /**\n   * Initialize ToggleableGroupDispatcher\n   * Uses esl-toggleable-dispatcher tag and document body root by default\n   */\n  public static init(root: HTMLElement = document.body, tagName: string = this.is) {\n    if (!root) throw new Error('Root element should be specified');\n    const instances = root.getElementsByTagName(tagName);\n    if (instances.length) return;\n    this.register(tagName);\n    root.insertAdjacentElement('afterbegin', document.createElement(tagName));\n  }\n\n  protected _root: HTMLElement | null;\n  protected _popups: Map<string, ESLToggleable> = new Map<string, ESLToggleable>();\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.root = this.parentElement;\n  }\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.root = null;\n  }\n\n  protected bindEvents() {\n    if (!this.root) return;\n    this.root.addEventListener('esl:before:show', this._onBeforeShow);\n    this.root.addEventListener('esl:show', this._onShow);\n    this.root.addEventListener('esl:hide', this._onHide);\n    this.root.addEventListener('esl:change:group', this._onChangeGroup);\n  }\n  protected unbindEvents() {\n    if (!this.root) return;\n    this.root.removeEventListener('esl:before:show', this._onBeforeShow);\n    this.root.removeEventListener('esl:show', this._onShow);\n    this.root.removeEventListener('esl:hide', this._onHide);\n    this.root.removeEventListener('esl:change:group', this._onChangeGroup);\n  }\n\n  /** Observed element */\n  public get root(): HTMLElement | null {\n    return this._root;\n  }\n  public set root(root: HTMLElement | null) {\n    this.unbindEvents();\n    this._root = root;\n    this.bindEvents();\n  }\n\n  /** Guard-condition for targets */\n  protected isAcceptable(target: any): target is ESLToggleable {\n    if (!(target instanceof ESLToggleable)) return false;\n    return !!target.groupName && target.groupName !== 'none';\n  }\n\n  /** Hide active element in group */\n  public hideActive(groupName: string, activator?: HTMLElement) {\n    const active = this.getActive(groupName);\n    if (!active || active === activator) return;\n    active.hide({\n      initiator: 'dispatcher',\n      dispatcher: this,\n      activator\n    });\n  }\n\n  /** Set active element in group */\n  public setActive(groupName: string, popup: ESLToggleable) {\n    if (!groupName) return;\n    this.hideActive(groupName, popup);\n    this._popups.set(groupName, popup);\n  }\n\n  /** Get active element in group or undefined if group doesn't exist */\n  public getActive(groupName: string): ESLToggleable | undefined {\n    return this._popups.get(groupName);\n  }\n\n  /** Delete element from the group if passed element is currently active */\n  public deleteActive(groupName: string, popup: ESLToggleable) {\n    if (this.getActive(groupName) !== popup) return;\n    this._popups.delete(groupName);\n  }\n\n  /** Hide active element before e.target will be shown */\n  @bind\n  protected _onBeforeShow(e: CustomEvent) {\n    const target = EventUtils.source(e);\n    if (!this.isAcceptable(target)) return;\n    this.hideActive(target.groupName, target);\n  }\n\n  /** Update active element after a new element is shown */\n  @bind\n  protected _onShow(e: CustomEvent) {\n    const target = EventUtils.source(e);\n    if (!this.isAcceptable(target)) return;\n\n    this.setActive(target.groupName, target);\n  }\n\n  /** Update group state after active element is hidden */\n  @bind\n  protected _onHide(e: CustomEvent) {\n    const target = EventUtils.source(e);\n    if (!this.isAcceptable(target)) return;\n\n    this.deleteActive(target.groupName, target);\n  }\n\n  /** Update active elements */\n  @bind\n  protected _onChangeGroup(e: CustomEvent) {\n    const target = EventUtils.source(e);\n    if (!this.isAcceptable(target)) return;\n\n    const {oldGroupName, newGroupName} = e.detail;\n    this.deleteActive(oldGroupName, target);\n    this.setActive(newGroupName, target);\n  }\n}\n","import {ExportNs} from '../../esl-utils/environment/export-ns';\nimport {ESC} from '../../esl-utils/dom/keys';\nimport {CSSClassUtils} from '../../esl-utils/dom/class';\nimport {bind} from '../../esl-utils/decorators/bind';\nimport {defined, copyDefinedKeys} from '../../esl-utils/misc/object';\nimport {DeviceDetector} from '../../esl-utils/environment/device-detector';\nimport {DelayedTask} from '../../esl-utils/async/delayed-task';\nimport {ESLBaseElement, attr, jsonAttr, boolAttr} from '../../esl-base-element/core';\n\n/** Default Toggleable action params type definition */\nexport interface ToggleableActionParams {\n  /** Initiator string identifier */\n  initiator?: string;\n  /** Delay timeout for both show and hide actions */\n  delay?: number;\n  /** Show delay timeout */\n  showDelay?: number;\n  /** Hide delay timeout */\n  hideDelay?: number;\n  /** Force action independently of current state of the Toggleable */\n  force?: boolean;\n  /** Do not throw events on action */\n  silent?: boolean;\n  /** Activate hover tracking to hide Toggleable */\n  trackHover?: boolean;\n  /** Element activator of the action */\n  activator?: HTMLElement;\n  /** Event that initiates the action */\n  event?: Event;\n\n  /** Custom user data */\n  [key: string]: any;\n}\n\nconst activators: WeakMap<ESLToggleable, HTMLElement | undefined> = new WeakMap();\n\n/**\n * ESLToggleable component\n * @author Julia Murashko, Alexey Stsefanovich (ala'n)\n *\n * ESLToggleable - a custom element, that is used as a base for \"Popup-like\" components creation\n */\n@ExportNs('Toggleable')\nexport class ESLToggleable extends ESLBaseElement {\n  static get observedAttributes() {\n    return ['open', 'group'];\n  }\n\n  /** CSS class to add on the body element */\n  @attr() public bodyClass: string;\n  /** CSS class to add when the Toggleable is active */\n  @attr() public activeClass: string;\n\n  /** Toggleable group meta information to organize groups */\n  @attr({name: 'group'}) public groupName: string;\n  /** Selector to mark inner close triggers */\n  @attr({name: 'close-on'}) public closeTrigger: string;\n\n  /** Close the Toggleable on ESC keyboard event */\n  @boolAttr() public closeOnEsc: boolean;\n  /** Close the Toggleable on a click/tap outside */\n  @boolAttr() public closeOnOutsideAction: boolean;\n\n  /** Initial params to pass to show/hide action on the start */\n  @jsonAttr<ToggleableActionParams>({defaultValue: {force: true, initiator: 'init'}})\n  public initialParams: ToggleableActionParams;\n  /** Default params to merge into passed action params */\n  @jsonAttr<ToggleableActionParams>({defaultValue: {}})\n  public defaultParams: ToggleableActionParams;\n\n  /** Marker of initially opened toggleable instance */\n  public initiallyOpened: boolean;\n\n  /** Inner state */\n  private _open: boolean = false;\n\n  /** Inner show/hide task manager instance */\n  protected _task: DelayedTask = new DelayedTask();\n  /** Marker for current hover listener state */\n  protected _trackHover: boolean = false;\n\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.initiallyOpened = this.hasAttribute('open');\n    this.bindEvents();\n    this.setInitialState();\n  }\n\n  protected disconnectedCallback() {\n    super.disconnectedCallback();\n    this.unbindEvents();\n    activators.delete(this);\n  }\n\n  protected attributeChangedCallback(attrName: string, oldVal: string, newVal: string) {\n    if (!this.connected || newVal === oldVal) return;\n    switch (attrName) {\n      case 'open':\n        if (this.open === this.hasAttribute('open')) return;\n        this.toggle(this.open, {initiator: 'attribute', showDelay: 0, hideDelay: 0});\n        break;\n      case 'group':\n        this.$$fire('change:group',  {\n          detail: {oldGroupName: oldVal, newGroupName: newVal}\n        });\n        break;\n    }\n  }\n\n  /** Set initial state of the Toggleable */\n  protected setInitialState() {\n    if (this.initialParams) {\n      this.toggle(this.initiallyOpened, this.initialParams);\n    }\n  }\n\n  protected bindEvents() {\n    this.addEventListener('click', this._onClick);\n    this.addEventListener('keydown', this._onKeyboardEvent);\n  }\n\n  protected unbindEvents() {\n    this.removeEventListener('click', this._onClick);\n    this.removeEventListener('keydown', this._onKeyboardEvent);\n    this.bindOutsideEventTracking(false);\n    this.bindHoverStateTracking(false);\n  }\n\n  /** Bind outside action event listeners */\n  protected bindOutsideEventTracking(track: boolean) {\n    document.body.removeEventListener('mouseup', this._onOutsideAction);\n    document.body.removeEventListener('touchend', this._onOutsideAction);\n    if (track) {\n      document.body.addEventListener('mouseup', this._onOutsideAction, true);\n      document.body.addEventListener('touchend', this._onOutsideAction, true);\n    }\n  }\n  /** Bind hover events listeners for the Toggleable itself */\n  protected bindHoverStateTracking(track: boolean) {\n    if (!DeviceDetector.hasHover) return;\n    if (this._trackHover === track) return;\n    this._trackHover = track;\n\n    this.removeEventListener('mouseenter', this._onMouseEnter);\n    this.removeEventListener('mouseleave', this._onMouseLeave);\n    if (this._trackHover) {\n      this.addEventListener('mouseenter', this._onMouseEnter);\n      this.addEventListener('mouseleave', this._onMouseLeave);\n    }\n  }\n\n  /** Function to merge the result action params */\n  protected mergeDefaultParams(params?: ToggleableActionParams): ToggleableActionParams {\n    return Object.assign({}, this.defaultParams, copyDefinedKeys(params));\n  }\n\n  /** Toggle the element state */\n  public toggle(state: boolean = !this.open, params?: ToggleableActionParams) {\n    return state ? this.show(params) : this.hide(params);\n  }\n\n  /** Change the element state to active */\n  public show(params?: ToggleableActionParams) {\n    params = this.mergeDefaultParams(params);\n    this._task.put(this.showTask.bind(this, params), defined(params.showDelay, params.delay));\n    this.bindOutsideEventTracking(this.closeOnOutsideAction);\n    this.bindHoverStateTracking(!!params.trackHover);\n    return this;\n  }\n  /** Change the element state to inactive */\n  public hide(params?: ToggleableActionParams) {\n    params = this.mergeDefaultParams(params);\n    this._task.put(this.hideTask.bind(this, params), defined(params.hideDelay, params.delay));\n    this.bindOutsideEventTracking(false);\n    this.bindHoverStateTracking(!!params.trackHover);\n    return this;\n  }\n\n  /** Actual show task to execute by toggleable task manger ({@link DelayedTask} out of the box) */\n  protected showTask(params: ToggleableActionParams) {\n    if (!params.force && this.open) return;\n    if (!params.silent && !this.$$fire('before:show', {detail: {params}})) return;\n    this.activator = params.activator;\n    this.open = true;\n    this.onShow(params);\n    if (!params.silent) this.$$fire('show', {detail: {params}, cancelable: false});\n  }\n  /** Actual hide task to execute by toggleable task manger ({@link DelayedTask} out of the box) */\n  protected hideTask(params: ToggleableActionParams) {\n    if (!params.force && !this.open) return;\n    if (!params.silent && !this.$$fire('before:hide',{detail: {params}})) return;\n    this.open = false;\n    this.onHide(params);\n    if (!params.silent) this.$$fire('hide', {detail: {params}, cancelable: false});\n  }\n\n  /**\n   * Actions to execute on show toggleable.\n   * Inner state and 'open' attribute are not affected and updated before `onShow` execution.\n   * Adds CSS classes, update a11y and fire esl:refresh event by default.\n   */\n  protected onShow(params: ToggleableActionParams) {\n    CSSClassUtils.add(this, this.activeClass);\n    CSSClassUtils.add(document.body, this.bodyClass, this);\n    this.updateA11y();\n    this.$$fire('esl:refresh'); // To notify other components about content change\n  }\n\n  /**\n   * Actions to execute on hide toggleable.\n   * Inner state and 'open' attribute are not affected and updated before `onShow` execution.\n   * Removes CSS classes and update a11y by default.\n   */\n  protected onHide(params: ToggleableActionParams) {\n    CSSClassUtils.remove(this, this.activeClass);\n    CSSClassUtils.remove(document.body, this.bodyClass, this);\n    this.updateA11y();\n  }\n\n  /** Active state marker */\n  public get open() {\n    return this._open;\n  }\n  public set open(value: boolean) {\n    this.toggleAttribute('open', this._open = value);\n  }\n\n  /** Last component that has activated the element. Uses {@link ToggleableActionParams.activator}*/\n  public get activator(): HTMLElement | null | undefined {\n    return activators.get(this);\n  }\n  public set activator(el: HTMLElement | null | undefined) {\n    el ? activators.set(this, el): activators.delete(this);\n  }\n\n  /** Returns the element to apply a11y attributes */\n  protected get $a11yTarget(): HTMLElement | undefined {\n    const target = this.getAttribute('a11y-target');\n    if (target === 'none') return;\n    return target ? this.querySelector(target) as HTMLElement : this;\n  }\n\n  /** Called on show and on hide actions to update a11y state accordingly */\n  protected updateA11y() {\n    const targetEl = this.$a11yTarget;\n    if (!targetEl) return;\n    targetEl.setAttribute('aria-hidden', String(!this._open));\n  }\n\n  // \"Private\" Handlers\n  @bind\n  protected _onClick(e: MouseEvent) {\n    const target = e.target as HTMLElement;\n    if (this.closeTrigger && target.closest(this.closeTrigger)) {\n      this.hide({initiator: 'close', activator: target, event: e});\n    }\n  }\n  @bind\n  protected _onOutsideAction(e: MouseEvent) {\n    const target = e.target as HTMLElement;\n    if (this.contains(target)) return;\n    if (this.activator && this.activator.contains(target)) return;\n    // Used 0 delay to decrease priority of the request\n    this.hide({initiator: 'outsideaction', activator: target, hideDelay: 0, event: e});\n  }\n\n  @bind\n  protected _onKeyboardEvent(e: KeyboardEvent) {\n    if (this.closeOnEsc && e.key === ESC) {\n      this.hide({initiator: 'keyboard', event: e});\n    }\n  }\n\n  @bind\n  protected _onMouseEnter(e: MouseEvent) {\n    this.show({initiator: 'mouseenter', trackHover: true, activator: this, event: e});\n  }\n  @bind\n  protected _onMouseLeave(e: MouseEvent) {\n    this.hide({initiator: 'mouseleave', trackHover: true, activator: this, event: e});\n  }\n}\n","import {ExportNs} from '../../esl-utils/environment/export-ns';\nimport {tuple, wrap, uniq} from '../../esl-utils/misc/array';\nimport {unwrapParenthesis} from '../../esl-utils/misc/format';\nimport {TraversingUtils} from '../../esl-utils/dom/traversing';\n\ntype ProcessorDescriptor = [string?, string?];\ntype ElementProcessor = (base: Element, sel: string) => Element | Element[] | null;\ntype CollectionProcessor = (els: Element[], sel: string) => Element[];\n\n/**\n * Traversing Query utility to find element via extended selector query\n * Extended query supports\n * - plain CSS selectors\n * - relative selectors (selectors that don't start from a plain selector will use passed base Element as a root)\n * - ::next and ::prev sibling pseudo-selectors\n * - ::parent and ::child pseudo-selectors\n * - ::find pseudo-selector\n * - ::first, ::last and :nth(#) limitation pseudo-selectors\n * - ::filter, ::not filtration pseudo-selectors\n *\n * @example \"#id .class [attr]\" - find by CSS selector in a current document\n * @example \"\" - get current base element\n * @example \"::next\" - get next sibling element\n * @example \"::prev\" - get previous sibling element\n * @example \"::parent\" - get base element parent\n * @example \"::parent(#id .class [attr])\" - find the closest parent matching passed selector\n * @example \"::child(#id .class [attr])\" - find direct child element(s) that match passed selector\n * @example \"::find(#id .class [attr])\" - find child element(s) that match passed selector\n * @example \"::find(buttons, a)::not([hidden])\" - find all buttons and anchors that are not have hidden attribute\n * @example \"::find(buttons, a)::filter(:first-child)\" - find all buttons and anchors that are first child in container\n * @example \"::parent::child(some-tag)\" - find direct child element(s) that match tag 'some-tag' in the parent\n * @example \"#id .class [attr]::parent\" - find parent of element matching selector '#id .class [attr]' in document\n * @example \"::find(.row)::last::parent\" - find parent of the last element matching selector '.row' from the base element subtree\n */\n@ExportNs('TraversingQuery')\nexport class TraversingQuery {\n  private static ELEMENT_PROCESSORS: Record<string, ElementProcessor> = {\n    '::find': TraversingUtils.findAll,\n    '::next': TraversingUtils.findNext,\n    '::prev': TraversingUtils.findPrev,\n    '::child': TraversingUtils.findChildren,\n    '::parent': TraversingUtils.findParent\n  };\n  private static COLLECTION_PROCESSORS: Record<string, CollectionProcessor> = {\n    '::first': (list: Element[]) => list.slice(0, 1),\n    '::last': (list: Element[]) => list.slice(-1),\n    '::nth': (list: Element[], sel?: string) => {\n      const index = sel ? +sel : NaN;\n      return wrap(list[index - 1]);\n    },\n    '::not': (list: Element[], sel?: string) => list.filter((el) => !el.matches(sel || '')),\n    '::filter': (list: Element[], sel?: string) => list.filter((el) => el.matches(sel || ''))\n  };\n\n  /**\n   * @return RegExp that selects all known processors in query string\n   * e.g. /(::parent|::child|::next|::prev)/\n   */\n  private static get PROCESSORS_REGEX() {\n    const keys = Object.keys(this.ELEMENT_PROCESSORS).concat(Object.keys(this.COLLECTION_PROCESSORS));\n    return new RegExp(`(${keys.join('|')})`, 'g');\n  }\n\n  private static isCollectionProcessor([name]: ProcessorDescriptor) {\n    return name && (name in this.COLLECTION_PROCESSORS);\n  }\n  private static processElement(el: Element, [name, selString]: ProcessorDescriptor): Element[] {\n    const sel = unwrapParenthesis(selString || '');\n    if (!name || !(name in this.ELEMENT_PROCESSORS)) return [];\n    return wrap(this.ELEMENT_PROCESSORS[name](el, sel));\n  }\n  private static processCollection(els: Element[], [name, selString]: ProcessorDescriptor): Element[] {\n    const sel = unwrapParenthesis(selString || '');\n    if (!name || !(name in this.COLLECTION_PROCESSORS)) return [];\n    return wrap(this.COLLECTION_PROCESSORS[name](els, sel));\n  }\n\n  private static traverseChain(collection: Element[], processors: ProcessorDescriptor[], findFirst: boolean): Element[] {\n    if (!processors.length || !collection.length) return collection;\n    const [processor, ...rest] = processors;\n    if (this.isCollectionProcessor(processor)) {\n      const processedItem = this.processCollection(collection, processor);\n      return this.traverseChain(processedItem, rest, findFirst);\n    }\n    const result: Element[] = [];\n    for (const target of collection) {\n      const processedItem = this.processElement(target, processor);\n      const resultCollection: Element[] = this.traverseChain(processedItem, rest, findFirst);\n      if (!resultCollection.length) continue;\n      if (findFirst) return resultCollection.slice(0, 1);\n      result.push(...resultCollection);\n    }\n    return uniq(result);\n  }\n\n  static traverse(query: string, findFirst: boolean, base?: Element) {\n    const parts = query.split(this.PROCESSORS_REGEX).map((term) => term.trim());\n    const rootSel = parts.shift();\n    const baseCollection = base ? [base] : [];\n    const initial: Element[] = rootSel ? Array.from(document.querySelectorAll(rootSel)) : baseCollection;\n    return this.traverseChain(initial, tuple(parts), findFirst);\n  }\n\n  /** @return first matching element reached via {@class TraversingQuery} rules */\n  static first(query: string, base?: Element): Element | null {\n    return TraversingQuery.traverse(query, true, base)[0] || null;\n  }\n  /** @return Array of all matching elements reached via {@class TraversingQuery} rules */\n  static all(query: string, base?: Element): Element[] {\n    return TraversingQuery.traverse(query, false, base);\n  }\n}\n","import {ExportNs} from '../../esl-utils/environment/export-ns';\nimport {attr, boolAttr, ESLBaseElement} from '../../esl-base-element/core';\nimport {bind} from '../../esl-utils/decorators/bind';\nimport {ready} from '../../esl-utils/decorators/ready';\nimport {CSSClassUtils} from '../../esl-utils/dom/class';\nimport {ENTER, SPACE} from '../../esl-utils/dom/keys';\nimport {TraversingQuery} from '../../esl-traversing-query/core';\nimport {DeviceDetector} from '../../esl-utils/environment/device-detector';\nimport {ESLMediaQuery, ESLMediaRuleList} from '../../esl-media-query/core';\n\nimport type {ESLToggleable, ToggleableActionParams} from '../../esl-toggleable/core/esl-toggleable';\n\n@ExportNs('Trigger')\nexport class ESLTrigger extends ESLBaseElement {\n  public static is = 'esl-trigger';\n\n  static get observedAttributes() {\n    return ['target'];\n  }\n\n  /** @readonly Observed Toggleable active state marker */\n  @boolAttr({readonly: true}) public active: boolean;\n\n  /** CSS classes to set on active state */\n  @attr({defaultValue: ''}) public activeClass: string;\n  /** Target element {@link TraversingQuery} selector to set `activeClass` */\n  @attr({defaultValue: ''}) public activeClassTarget: string;\n\n  /** Selector for ignore inner elements */\n  @attr({defaultValue: 'a[href]'}) public ignore: string;\n\n  /** Target Toggleable {@link TraversingQuery} selector. `next` by default */\n  @attr({defaultValue: 'next'}) public target: string;\n  /** Action to pass to the Toggleable. Supports `show`, `hide` and `toggle` values. `toggle` by default */\n  @attr({defaultValue: 'toggle'}) public mode: string;\n\n  /** Click event tracking media query. Default: `all` */\n  @attr({defaultValue: 'all'}) public trackClick: string;\n  /** Hover event tracking media query. Default: `none` */\n  @attr({defaultValue: 'not all'}) public trackHover: string;\n\n  /** Selector of inner target element to place aria attributes. Uses trigger itself if blank */\n  @attr({defaultValue: ''}) public a11yTarget: string;\n\n  /** Show delay value */\n  @attr({defaultValue: 'none'}) public showDelay: string;\n  /** Hide delay value */\n  @attr({defaultValue: 'none'}) public hideDelay: string;\n\n  protected _$target: ESLToggleable;\n\n  protected attributeChangedCallback(attrName: string) {\n    if (!this.connected) return;\n    if (attrName === 'target') return this.updateTargetFromSelector();\n  }\n\n  /** Target observable Toggleable */\n  public get $target() {\n    return this._$target;\n  }\n  public set $target(newPopupInstance) {\n    this.unbindEvents();\n    this._$target = newPopupInstance;\n    if (this._$target) {\n      this.bindEvents();\n      this._onTargetStateChange();\n    }\n  }\n\n  /** Element target to setup aria attributes */\n  public get $a11yTarget(): HTMLElement | null {\n    return this.a11yTarget ? this.querySelector(this.a11yTarget) : this;\n  }\n\n  /** Marker to allow track hover */\n  public get allowHover() {\n    return DeviceDetector.hasHover && ESLMediaQuery.for(this.trackHover).matches;\n  }\n  /** Marker to allow track clicks */\n  public get allowClick() {\n    return ESLMediaQuery.for(this.trackClick).matches;\n  }\n\n  private static parseDelayValue(delay: string): number | undefined {\n    return isNaN(+delay) ? undefined : +delay;\n  }\n  /** Show delay attribute processing */\n  public get showDelayValue(): number | undefined {\n    return ESLMediaRuleList.parse(this.showDelay, ESLTrigger.parseDelayValue).activeValue;\n  }\n  /** Hide delay attribute processing */\n  public get hideDelayValue(): number | undefined {\n    return ESLMediaRuleList.parse(this.hideDelay, ESLTrigger.parseDelayValue).activeValue;\n  }\n\n  @ready\n  protected connectedCallback() {\n    super.connectedCallback();\n    this.updateTargetFromSelector();\n    this.initA11y();\n  }\n  @ready\n  protected disconnectedCallback() {\n    this.unbindEvents();\n  }\n\n  protected bindEvents() {\n    if (!this.$target) return;\n    this.$target.addEventListener('esl:show', this._onTargetStateChange);\n    this.$target.addEventListener('esl:hide', this._onTargetStateChange);\n\n    this.addEventListener('click', this._onClick);\n    this.addEventListener('keydown', this._onKeydown);\n    this.addEventListener('mouseenter', this._onMouseEnter);\n    this.addEventListener('mouseleave', this._onMouseLeave);\n  }\n  protected unbindEvents() {\n    if (!this.$target) return;\n    this.$target.removeEventListener('esl:show', this._onTargetStateChange);\n    this.$target.removeEventListener('esl:hide', this._onTargetStateChange);\n\n    this.removeEventListener('click', this._onClick);\n    this.removeEventListener('keydown', this._onKeydown);\n    this.removeEventListener('mouseenter', this._onMouseEnter);\n    this.removeEventListener('mouseleave', this._onMouseLeave);\n  }\n\n  /** Update `$target` Toggleable  from `target` selector */\n  protected updateTargetFromSelector() {\n    if (!this.target) return;\n    this.$target = TraversingQuery.first(this.target, this) as ESLToggleable;\n  }\n\n  /** Check if the event target should be ignored */\n  protected isTargetIgnored(target: EventTarget | null) {\n    if (!target || !(target instanceof HTMLElement) || !this.ignore) return false;\n    const $ignore = target.closest(this.ignore);\n    // Ignore only inner elements (but do not ignore the trigger itself)\n    return !!$ignore && $ignore !== this && this.contains($ignore);\n  }\n\n  /** Merge params to pass to the toggleable */\n  protected mergeToggleableParams(...params: ToggleableActionParams[]) {\n    return Object.assign({\n      initiator: 'trigger',\n      activator: this\n    }, ...params);\n  }\n\n  /** Show target toggleable with passed params */\n  public showTarget(params: ToggleableActionParams = {}) {\n    const actionParams = this.mergeToggleableParams({\n      delay: this.showDelayValue\n    }, params);\n    this.$target && this.$target.show(actionParams);\n  }\n  /** Hide target toggleable with passed params */\n  public hideTarget(params: ToggleableActionParams = {}) {\n    const actionParams = this.mergeToggleableParams({\n      delay: this.hideDelayValue\n    }, params);\n    this.$target && this.$target.hide(actionParams);\n  }\n  /** Toggles target toggleable with passed params */\n  public toggleTarget(params: ToggleableActionParams = {}, state: boolean = !this.active) {\n    state ? this.showTarget(params) : this.hideTarget(params);\n  }\n\n  /** Handles ESLToggleable state change */\n  @bind\n  protected _onTargetStateChange() {\n    this.toggleAttribute('active', this.$target.open);\n\n    const clsTarget = TraversingQuery.first(this.activeClassTarget, this) as HTMLElement;\n    clsTarget && CSSClassUtils.toggle(clsTarget, this.activeClass, this.active);\n\n    this.updateA11y();\n\n    this.$$fire('change:active');\n  }\n\n  /** Handles `click` event */\n  @bind\n  protected _onClick(event: MouseEvent) {\n    if (!this.allowClick || this.isTargetIgnored(event.target)) return;\n    event.preventDefault();\n    switch (this.mode) {\n      case 'show': return this.showTarget({event});\n      case 'hide': return this.hideTarget({event});\n      default: return this.toggleTarget({event});\n    }\n  }\n\n  /** Handles `keydown` event */\n  @bind\n  protected _onKeydown(event: KeyboardEvent) {\n    if (![ENTER, SPACE].includes(event.key) || this.isTargetIgnored(event.target)) return;\n    event.preventDefault();\n    switch (this.mode) {\n      case 'show': return this.showTarget({event});\n      case 'hide': return this.hideTarget({event});\n      default: return this.toggleTarget({event});\n    }\n  }\n\n  /** Handles hover `mouseenter` event */\n  @bind\n  protected _onMouseEnter(event: MouseEvent) {\n    if (!this.allowHover) return;\n    this.toggleTarget({event}, this.mode !== 'hide');\n    event.preventDefault();\n  }\n\n  /** Handles hover `mouseleave` event */\n  @bind\n  protected _onMouseLeave(event: MouseEvent) {\n    if (!this.allowHover) return;\n    if (this.mode === 'show' || this.mode === 'hide') return;\n    this.hideTarget({event, trackHover: true});\n    event.preventDefault();\n  }\n\n  /** Set initial a11y attributes. Do nothing if trigger contains actionable element */\n  public initA11y() {\n    if (this.$a11yTarget !== this) return;\n    if (!this.hasAttribute('role')) this.setAttribute('role', 'button');\n    if (this.getAttribute('role') === 'button' && !this.hasAttribute('tabindex')) {\n      this.setAttribute('tabindex', '0');\n    }\n  }\n\n  /** Update aria attributes */\n  public updateA11y() {\n    const target = this.$a11yTarget;\n    if (!target) return;\n\n    target.setAttribute('aria-expanded', String(this.active));\n    if (this.$target.id) {\n      target.setAttribute('aria-controls', this.$target.id);\n    }\n  }\n}\n","/**\n * Abstract Observable implementation\n * @author Yuliya Adamskaya\n */\nexport type ObserverCallback = (...args: any) => void;\n\nexport abstract class Observable {\n  private _listeners = new Set<ObserverCallback>();\n\n  public addListener(listener: ObserverCallback) {\n    this._listeners.add(listener);\n  }\n  public removeListener(listener: ObserverCallback) {\n    this._listeners.delete(listener);\n  }\n\n  protected fire(...args: any) {\n    this._listeners.forEach((listener) => {\n      try {\n        listener.apply(this, args);\n      } catch (e) {\n        console.error(e);\n      }\n    });\n  }\n}\n","import {PromiseUtils} from './promise';\n\nimport type {AnyToAnyFnSignature} from '../misc/functions';\nimport type {Deferred, PromisifyResultFn} from './promise';\n\n/** Debounced<F> is a function wrapper type for a function decorated via debounce */\nexport interface Debounced<F extends AnyToAnyFnSignature> extends PromisifyResultFn<F> {\n  /** {Promise} of deferred function call */\n  promise: Promise<ReturnType<F> | void>;\n  /** Cancel debounced call */\n  cancel(): void;\n}\n\n/**\n * Creates a debounced function that implements {@link Debounced}.\n * Debounced function delays invoking func until after wait milliseconds have elapsed\n * since the last time the debounced function was invoked.\n * The func is invoked with the last arguments provided to the debounced function.\n * @param fn\n * @param [wait]\n * @returns {Function}\n */\nexport function debounce<F extends AnyToAnyFnSignature>(fn: F, wait = 10): Debounced<F> {\n  let timeout: number | null = null;\n  let deferred: Deferred<ReturnType<F>> | null = null;\n\n  function debouncedSubject(...args: any[]) {\n    deferred = deferred || PromiseUtils.deferred();\n    (typeof timeout === 'number') && clearTimeout(timeout);\n    timeout = window.setTimeout(() => {\n      timeout = null;\n      // fn.apply to save call context\n      deferred!.resolve(fn.apply(this, args));\n      deferred = null;\n    }, wait);\n    return deferred.promise;\n  }\n  function cancel() {\n    (typeof timeout === 'number') && clearTimeout(timeout);\n    timeout = null;\n    deferred?.reject();\n    deferred = null;\n  }\n\n  Object.defineProperty(debouncedSubject, 'promise', {\n    get: () => deferred ? deferred.promise : Promise.resolve()\n  });\n  Object.defineProperty(debouncedSubject, 'cancel', {\n    writable: false,\n    enumerable: false,\n    value: cancel\n  });\n\n  return debouncedSubject as Debounced<F>;\n}\n","import type {AnyToVoidFnSignature} from '../misc/functions';\n\n/**\n * Task placeholder with a single place for executing deferred task.\n * Only one task can be planed per DelayedTask instance.\n * @see put DelayedTask.put behaviour description.\n */\nexport class DelayedTask {\n  protected _fn: AnyToVoidFnSignature | null = null;\n  protected _timeout: number | null = null;\n\n  /** Execute deferred task immediately */\n  protected run = () => {\n    this._timeout = null;\n    this._fn && this._fn();\n  };\n\n  /** @return {Function} of currently deferred (planned) task */\n  public get fn() {\n    return this._fn;\n  }\n\n  /**\n   * Cancel deferred task and planning passed {@param task}\n   * @param delay - time to delay task execution\n   *  - pass negative or false to execute task immediately\n   *  - pass 0 to plan task to the macrotask\n   *  - pass positive number x to delay task on x ms.\n   * */\n  public put(task: AnyToVoidFnSignature, delay: number | boolean = false) {\n    const prev = this.cancel();\n    if (typeof task === 'function') {\n      if (typeof delay === 'number' && delay >= 0) {\n        this._fn = task;\n        this._timeout = window.setTimeout(this.run, delay);\n      } else {\n        task();\n      }\n    }\n    return prev;\n  }\n\n  /** Cancel deferred (planned) task */\n  public cancel() {\n    const prev = this._fn;\n    (typeof this._timeout === 'number') && clearTimeout(this._timeout);\n    this._fn = this._timeout = null;\n    return prev;\n  }\n}\n","import type {AnyToAnyFnSignature} from '../misc/functions';\n\n/** Interface to describe abstract listenable target */\nexport type ListenableTarget = {\n  addEventListener: (\n    event: string,\n    callback: (payload: any) => void,\n    options?: boolean | AddEventListenerOptions | undefined\n  ) => void;\n  removeEventListener: (\n    event: string,\n    callback: (payload: any) => void,\n    options?: boolean | AddEventListenerOptions | undefined\n  ) => void;\n};\n\n/** Deferred object represents promise with it's resolve/reject methods */\nexport type Deferred<T> = {\n  /** Wrapped promise */\n  promise: Promise<T>;\n  /** Function that resolves wrapped promise */\n  resolve: (arg: T) => void;\n  /** Function that rejects wrapped promise */\n  reject: (arg?: any) => void;\n};\n\n/** Return function type with the same signature but with the result type wrapped into promise */\nexport type PromisifyResultFn<F extends AnyToAnyFnSignature> =\n  ((...args: Parameters<F>) => Promise<ReturnType<F> | void>);\n\n/**\n * Promise utils helper class\n */\nexport abstract class PromiseUtils {\n  /**\n   * @return {Promise} that will be resolved in {@param timeout} with optional {@param payload}\n   */\n  static fromTimeout<T>(timeout: number, payload?: T): Promise<T> {\n    return new Promise<T>((resolve) =>\n      setTimeout(resolve.bind(null, payload), timeout)\n    );\n  }\n\n  /**\n   * @return {Promise} that will be resolved by dispatching {@param event} on {@param target}\n   * Or it will be rejected in {@param timeout} if it's specified\n   * Optional {@param options} for addEventListener can be also specified\n   */\n  static fromEvent(\n    target: ListenableTarget,\n    event: string,\n    timeout?: number | null | undefined,\n    options?: boolean | AddEventListenerOptions\n  ): Promise<Event> {\n    return new Promise((resolve, reject) => {\n      function eventCallback(e: Event) {\n        target.removeEventListener(event, eventCallback, options);\n        resolve(e);\n      }\n\n      target.addEventListener(event, eventCallback, options);\n      if (typeof timeout === 'number' && timeout >= 0) {\n        setTimeout(() => reject(new Error('Rejected by timeout')), timeout);\n      }\n    });\n  }\n\n  /**\n   * Short helper to make Promise from element state marker\n   * Marker should be accessible and listenable\n   * @example\n   * const imgReady = PromiseUtils.fromMarker(eslImage, 'ready');\n   */\n  static fromMarker(target: HTMLElement, marker: string, event?: string): Promise<HTMLElement> {\n    if ((target as any)[marker]) return Promise.resolve(target);\n    return PromiseUtils.fromEvent(target, event || marker).then(() => target);\n  }\n\n  /**\n   * Safe wrap for Promise.resolve to use in Promise chain\n   * @example\n   * const resolvedPromise = rejectedPromise.catch(PromiseUtils.resolve);\n   */\n  static resolve<T>(arg: T | PromiseLike<T>): Promise<T> {\n    return Promise.resolve(arg);\n  }\n\n  /**\n   * Safe wrap for Promise.reject to use in Promise chain\n   * @example\n   * const rejectedPromise = resolvedPromise.then(PromiseUtils.resolve);\n   */\n  static reject<T = never>(arg?: T | PromiseLike<T>): Promise<T> {\n    return Promise.reject(arg);\n  }\n\n  /**\n   * Call {@param callback} limited by {@param tryCount} amount of times with interval in {@param timeout} ms\n   * @return {Promise} that will be resolved as soon as callback returns truthy value, or reject it by limit.\n   */\n  static tryUntil<T>(callback: () => T, tryCount = 2, timeout = 100): Promise<T> {\n    return new Promise((resolve, reject) => {\n      const interval = setInterval(() => {\n        let result: T | undefined;\n        try {\n          result = callback();\n        } catch {\n          result = undefined;\n        }\n        if (result || --tryCount < 0) {\n          clearInterval(interval);\n          result ? resolve(result) : reject(new Error('Rejected by limit of tries'));\n        }\n      }, timeout);\n    });\n  }\n\n  /**\n   * Create Deferred Object that wraps promise and its resolve and reject callbacks\n   */\n  static deferred<T>(): Deferred<T> {\n    let reject: any;\n    let resolve: any;\n    // Both reject and resolve will be assigned anyway while the Promise constructing.\n    const promise = new Promise<T>((res, rej) => {\n      resolve = res;\n      reject = rej;\n    });\n    return {promise, resolve, reject};\n  }\n}\n","import type {AnyToVoidFnSignature} from '../misc/functions';\n\n/**\n * Postpone action after next render\n * @param {function} callback\n */\nexport const afterNextRender = (callback: () => void) => requestAnimationFrame(() => requestAnimationFrame(callback));\n\n/**\n * Decorate function to schedule execution after next render\n * @param {function} fn\n * @returns {function} - decorated function\n */\nexport const rafDecorator = <T extends AnyToVoidFnSignature>(fn: T): T => {\n  let lastArgs: any[] | null = null; // null if no calls requested\n  return function (...args: any[]) {\n    if (lastArgs === null) {\n      requestAnimationFrame(() => {\n        lastArgs && fn.call(this, ...lastArgs);\n        lastArgs = null;\n      });\n    }\n    lastArgs = args;\n  } as T;\n};\n","const BINDINGS_STORE_KEY = '__fnBindings__';\n/** Decorator \"bind\" allows to bind prototype method context to class instance */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function bind<T extends Function>(target: object,\n                                         propertyKey: string,\n                                         descriptor: TypedPropertyDescriptor<T>): TypedPropertyDescriptor<T> {\n  // Validation check\n  if (!descriptor || (typeof descriptor.value !== 'function')) {\n    throw new TypeError('Only class methods can be decorated via @bind');\n  }\n  // Original function\n  const fn = descriptor.value;\n\n  return {\n    enumerable: descriptor.enumerable,\n    configurable: descriptor.configurable,\n\n    get() {\n      // Accessing via prototype returns original function\n      // If the constructor property is in the context then it's not an instance\n      if (!this || this === target || Object.hasOwnProperty.call(this, 'constructor')) {\n        return fn;\n      }\n\n      // Bounded functions store\n      let bindings = this[BINDINGS_STORE_KEY];\n      if (!bindings) {\n        bindings = this[BINDINGS_STORE_KEY] = new WeakMap<T, T>();\n      }\n\n      // Store binding if it does not exist\n      if (!bindings.has(fn)) {\n        bindings.set(fn, fn.bind(this));\n      }\n\n      // Return binding\n      return bindings.get(fn);\n    },\n    set(value: T) {\n      Object.defineProperty(this, propertyKey, {\n        writable: true,\n        enumerable: false,\n        configurable: true,\n        value\n      });\n    }\n  };\n}\n","import {getPropertyDescriptor} from '../misc/object';\nimport {defaultArgsHashFn, memoizeFn} from '../misc/memoize';\nimport type {MemoHashFn} from '../misc/memoize';\nimport type {MethodTypedDecorator} from '../misc/functions';\n\n\nexport function memoize(): MethodDecorator;\nexport function memoize<H extends MemoHashFn>(hashFn: H): MethodTypedDecorator<(...args: Parameters<H>) => any>;\n/**\n * Memoization decorator helper.\n * @see memoizeFn Original memoizeFn function decorator.\n */\nexport function memoize(hashFn: MemoHashFn = defaultArgsHashFn) {\n  return function (target: any, prop: string, descriptor: TypedPropertyDescriptor<any>) {\n    const isPrototype = Object.hasOwnProperty.call(target, 'constructor');\n    if (descriptor && typeof descriptor.value === 'function') {\n      descriptor.value = isPrototype ?\n        memoizeMember(descriptor.value, prop, false, hashFn) :\n        memoizeFn(descriptor.value, hashFn);\n    } else if (descriptor && typeof descriptor.get === 'function') {\n      descriptor.get = isPrototype ?\n        memoizeMember(descriptor.get, prop, true, hashFn) :\n        memoizeFn(descriptor.get, hashFn);\n    } else {\n      throw new TypeError('Only get accessors or class methods can be decorated via @memoize');\n    }\n  };\n}\n\n// Lock storage to prevent cache logic for some key\nconst locks = new WeakMap();\n\n/** Cache memo function in the current context on call */\nfunction memoizeMember(originalMethod: any, prop: string, isGetter: boolean, hashFn: MemoHashFn) {\n  return function (this: any, ...args: any[]): any {\n    if (locks.get(this) === prop) return originalMethod;\n    const memo = memoizeFn(originalMethod, hashFn);\n    locks.set(this, prop); // IE try to get key with the prototype instance call, so we lock it\n    Object.defineProperty(this, prop, isGetter ? {get: memo} : {value: memo});\n    locks.delete(this); // Free property key\n    return memo.apply(this, args);\n  };\n}\n\n/**\n * Clear memoization cache for passed target and property.\n * Accepts not own properties.\n */\nmemoize.clear = function (target: any, property: string) {\n  let clearFn = null;\n  const desc = getPropertyDescriptor(target, property);\n  if (desc && typeof desc.value === 'function') clearFn = desc.value.clear;\n  if (desc && typeof desc.get === 'function') clearFn = (desc.get as any).clear;\n  (typeof clearFn === 'function') && clearFn();\n};\n","/** Property configuration */\nexport type OverrideDecoratorConfig = {\n  /** Value to set in the prototype */\n  value?: any;\n  /** To define mutable property */\n  readonly?: false;\n} | {\n  /** Value to set in the prototype */\n  value: any;\n  /** To define readonly property */\n  readonly: true;\n};\n\n/**\n * `@prop` is auxiliary decorator to define a field on the prototype level.\n *` @prop` can be used to override decorated property from the parent level\n *\n * You can also use an @override decorator in combination with ECMA Script class property definition:\n * `@prop() public field: any = initial value;`\n *\n * The class property initial value is a part of object creation, so it goes to the object itself,\n * while the @override value is defined on the prototype level.\n *\n *  @param [prototypeConfig] - prototype property configuration\n */\nexport function prop(prototypeConfig: OverrideDecoratorConfig = {}) {\n  return function (obj: any, name: string): void {\n    if (Object.hasOwnProperty.call(obj, name)) {\n      throw new TypeError('Can\\'t override own property');\n    }\n    Object.defineProperty(obj, name, {\n      value: prototypeConfig.value,\n      writable: !prototypeConfig.readonly,\n      enumerable: true,\n      configurable: true\n    });\n  };\n}\n","import {onDocumentReady} from '../dom/ready';\nimport type {AnyToVoidFnSignature} from '../misc/functions';\n\n/** Defer method execution to the next task with dom ready state precondition */\nexport function ready<T extends AnyToVoidFnSignature>(target: any,\n                                                      propertyKey: string,\n                                                      descriptor: TypedPropertyDescriptor<T>): void {\n  if (!descriptor || typeof descriptor.value !== 'function') {\n    throw new TypeError('Only class methods can be decorated via document ready decorator');\n  }\n  const fn = descriptor.value;\n  descriptor.value = function (...arg: any[]) {\n    onDocumentReady(() => fn.call(this, ...arg));\n  } as T;\n}\n","/** Describe locker elements collection per class name */\ntype Locks = Map<string, Set<HTMLElement>>;\n/** Store locks for key element classes*/\nconst lockStore = new WeakMap<HTMLElement, Locks>();\n\n/** Mange className lock for the element */\nconst lock = (el: HTMLElement, className: string, locker: HTMLElement) => {\n  const elLocks: Locks = lockStore.get(el) || new Map();\n  const classLocks: Set<HTMLElement> = elLocks.get(className) || new Set();\n  classLocks.add(locker);\n  elLocks.set(className, classLocks);\n  lockStore.set(el, elLocks);\n};\n/**\n * Manage className unlock for the element\n * @returns true if className have no lockes\n */\nconst unlock = (el: HTMLElement, className: string, locker: HTMLElement) => {\n  const elLocks = lockStore.get(el);\n  if (!elLocks) return true;\n  const classLocks = elLocks.get(className);\n  if (!classLocks) return true;\n  classLocks.delete(locker);\n  return !classLocks.size;\n};\n\n/**\n * Add single class to the element.\n * Supports inversion and locker management.\n */\nconst add = (el: HTMLElement, className: string, locker?: HTMLElement): void => {\n  if (className[0] === '!') return CSSClassUtils.remove(el, className.substr(1), locker);\n  if (locker) lock(el, className, locker);\n  el.classList.add(className);\n};\n\n/**\n * Remove single class from the element.\n * Supports inversion and locker management.\n */\nconst remove = (el: HTMLElement, className: string, locker?: HTMLElement): void => {\n  if (className[0] === '!') return CSSClassUtils.add(el, className.substr(1), locker);\n  if (locker && !unlock(el, className, locker)) return;\n  if (!locker) CSSClassUtils.unlock(el, className);\n  el.classList.remove(className);\n};\n\n/**\n * CSS class manipulation utilities.\n *\n * Allows to manipulate with CSS classes with the following set of sub-features:\n * - JQuery-like enumeration - you can pass multiple tokens separated by space\n * - safe checks - empty or falsy token sting will be ignored without throwing an error\n * - inversion syntax - tokens that start from '!' will be processed with inverted action\n * (e.g. addCls(el, '!class') - will remove 'class' from the element, while removeCls(el, '!class') adds 'class' to the element)\n * - class locks - you can manipulate with classes using `locker` option that takes into account the modification initiator.\n * That means the class added in 'locker' mode will not be removed until all initiators that requested add class have requested its removal.\n * */\nexport abstract class CSSClassUtils {\n  /** Splitting passed token string into CSS class names array. */\n  public static splitTokens(tokenString: string | null | undefined): string[] {\n    return (tokenString || '').split(' ').filter((str) => !!str);\n  }\n\n  /**\n   * Add all classes from the class token string to the element.\n   * @see CSSClassUtils\n   * */\n  public static add(el: HTMLElement, cls: string | null | undefined, locker?: HTMLElement) {\n    CSSClassUtils.splitTokens(cls).forEach((className) => add(el, className, locker));\n  }\n\n  /**\n   * Remove all classes from the class token string to the element.\n   * @see CSSClassUtils\n   * */\n  public static remove(el: HTMLElement, cls: string | null | undefined, locker?: HTMLElement) {\n    CSSClassUtils.splitTokens(cls).forEach((className) => remove(el, className, locker));\n  }\n\n  /**\n   * Toggle all classes from the class token string on the element to the passed state.\n   * @see CSSClassUtils\n   * */\n  public static toggle(el: HTMLElement, cls: string | null | undefined, state: boolean, locker?: HTMLElement) {\n    (state ? CSSClassUtils.add : CSSClassUtils.remove)(el, cls, locker);\n  }\n\n  /** Remove all lockers for the element or passed element className */\n  public static unlock(el: HTMLElement, className?: string) {\n    if (className) {\n      lockStore.get(el)?.delete(className);\n    } else {\n      lockStore.delete(el);\n    }\n  }\n}\n","export interface Point {\n  x: number;\n  y: number;\n}\n\nexport abstract class EventUtils {\n  /**\n   * Dispatch custom event.\n   * Event bubbles and is cancelable by default, use {@param eventInit} to override that.\n   * @param el - element target\n   * @param eventName - event name\n   * @param [eventInit] - custom event init. See {@link CustomEventInit}\n   */\n  public static dispatch(el: HTMLElement, eventName: string, eventInit?: CustomEventInit) {\n    const init = Object.assign({\n      bubbles: true,\n      composed: true,\n      cancelable: true\n    }, eventInit || {});\n    return el.dispatchEvent(new CustomEvent(eventName, init));\n  }\n\n  /** Get original CustomEvent source */\n  public static source(e: CustomEvent) {\n    const path = (e.composedPath && e.composedPath());\n    return path ? path[0] : e.target;\n  }\n\n  /** Normalize TouchEvent or PointerEvent */\n  public static normalizeTouchPoint(event: TouchEvent | PointerEvent): Point {\n    const source = (event instanceof TouchEvent) ? event.changedTouches[0] : event;\n    return {\n      x: source.pageX,\n      y: source.pageY\n    };\n  }\n\n  /** Normalize MouseEvent */\n  public static normalizeCoordinates(event: MouseEvent, elem: HTMLElement): Point {\n    const props = elem.getBoundingClientRect();\n    const top = props.top + window.pageYOffset;\n    const left = props.left + window.pageXOffset;\n    return {\n      x: event.pageX - left,\n      y: event.pageY - top\n    };\n  }\n}\n","export const TAB = 'Tab';\nexport const ENTER = 'Enter';\nexport const ESC = 'Escape';\nexport const SPACE = ' ';\n\nexport const ALT = 'Alt';\nexport const SHIFT = 'Shift';\nexport const CONTROL = 'Control';\n\nexport const PAUSE = 'Pause';\nexport const END = 'End';\nexport const HOME = 'Home';\n\nexport const PAGE_UP = 'PageUp';\nexport const PAGE_DOWN = 'PageDown';\n\nexport const ARROW_LEFT = 'ArrowLeft';\nexport const ARROW_UP = 'ArrowUp';\nexport const ARROW_RIGHT = 'ArrowRight';\nexport const ARROW_DOWN = 'ArrowDown';\n","/**\n * Execute callback in bounds of the next task with dom ready state precondition\n */\nexport function onDocumentReady(callback: () => void) {\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', function fn() {\n      document.removeEventListener('DOMContentLoaded', fn);\n      setTimeout(() => callback());\n    });\n  } else {\n    setTimeout(() => callback());\n  }\n}\n","import {ExportNs} from '../environment/export-ns';\nimport {memoize} from '../decorators/memoize';\n\nexport type ScrollType = 'default' | 'negative' | 'reverse';\n\n@ExportNs('RTLUtils')\nexport abstract class RTLUtils {\n  /** Check if the element in a RTL direction context */\n  static isRtl(el: HTMLElement = document.body) {\n    const parent = el.closest('[dir]') as HTMLElement;\n    return parent?.dir === 'rtl';\n  }\n\n  /**\n   * @returns {ScrollType} RTL scroll type\n   * Lazy, memoized.\n   */\n  @memoize()\n  static get scrollType(): ScrollType {\n    let scrollType: ScrollType = 'default';\n    const el = createDummyEl();\n    document.body.appendChild(el);\n    if (el.scrollLeft <= 0) {\n      el.scrollLeft = 2;\n      scrollType = el.scrollLeft < 2 ? 'negative' : 'reverse';\n    }\n    document.body.removeChild(el);\n    return scrollType;\n  }\n\n  // Potentially can be useful in future\n  // static normalizeScrollLeft(el: HTMLElement, value: number | null = null, isRtl: boolean = RTLUtils.isRtl(el)): number {\n  //   value = (value === null) ? el.scrollLeft: value;\n  //   switch (isRtl ? RTLUtils.scrollType : '') {\n  //     case 'negative':\n  //       return el.scrollWidth - el.clientWidth + value;\n  //     case 'reverse':\n  //       return el.scrollWidth - el.clientWidth - value;\n  //     default:\n  //       return value;\n  //   }\n  // }\n}\n\n/** Creates the dummy test element with a horizontal scroll presented */\nfunction createDummyEl() {\n  const el = document.createElement('div');\n  el.appendChild(document.createTextNode('ESL!'));\n  el.dir = 'rtl';\n  Object.assign(el.style, {\n    position: 'absolute',\n    top: '-1000px',\n    width: '4px',\n    height: '1px',\n    fontSize: '14px',\n    overflow: 'scroll'\n  });\n  return el;\n}\n","/**\n * Creates new async script tag by id and src\n */\nconst createAsyncScript = (id: string, src: string) => {\n  const script = document.createElement('script');\n  script.id = id;\n  script.async = true;\n  script.src = src;\n  return script;\n};\n\n/**\n * Common function that loads script async\n * @param {string} id - unique script id that is used as a marker to prevent future load\n * @param {string} src - script src (url) to load\n */\nexport function loadScript(id: string, src: string): Promise<Event> {\n  return new Promise((resolve, reject) => {\n    const script: HTMLScriptElement =\n      (document.getElementById(id) || createAsyncScript(id, src)) as HTMLScriptElement;\n    const state = script.getAttribute('state');\n\n    switch (state) {\n      case 'success': resolve(new Event('load')); break;\n      case 'error': reject(new Event('error')); break;\n      default:\n        script.addEventListener('load', (e: Event) => {\n          script.setAttribute('state', 'success');\n          resolve(e);\n        });\n        script.addEventListener('error', (e: Event) => {\n          script.setAttribute('state', 'error');\n          reject(e);\n        });\n    }\n    if (!script.parentNode) {\n      const firstScriptTag =\n        document.querySelector('script') || document.querySelector('head title');\n      if (firstScriptTag && firstScriptTag.parentNode) {\n        firstScriptTag.parentNode.insertBefore(script, firstScriptTag);\n      } else {\n        reject('Page document structure is incorrect');\n      }\n    }\n  });\n}\n","export type ScrollStrategy = 'none' | 'native' | 'pseudo';\n\nconst $html = document.documentElement;\nconst initiatorSet = new Set();\n\nexport abstract class ScrollUtils {\n  /**\n   * Check vertical scroll based on content height\n   * */\n  static hasVerticalScroll(target = $html) {\n    return target.scrollHeight > target.clientHeight;\n  }\n\n  /**\n   * Disable scroll on the page.\n   * @param [strategy] - to make scroll visually disabled\n   * */\n  public static lock(strategy?: ScrollStrategy) {\n    const hasScroll = ScrollUtils.hasVerticalScroll();\n    if (strategy && strategy !== 'none' && hasScroll) {\n      $html.classList.add(`esl-${strategy}-scroll`);\n    }\n    $html.classList.add('esl-disable-scroll');\n  }\n\n  /**\n   * Enable scroll on the page.\n   * */\n  public static unlock() {\n    $html.classList.remove('esl-disable-scroll', 'esl-pseudo-scroll', 'esl-native-scroll');\n  }\n\n  /**\n   * Disable scroll on the page.\n   * @param initiator - object to associate request with\n   * @param [strategy] - to make scroll visually disabled\n   *\n   * TODO: currently requests with different strategy is not taken into account\n   * */\n  public static requestLock(initiator: any, strategy?: ScrollStrategy) {\n    initiator && initiatorSet.add(initiator);\n    (initiatorSet.size > 0) && ScrollUtils.lock(strategy);\n  }\n\n  /**\n   * Enable scroll on the page in case it was requested with given initiator.\n   * @param initiator - object to associate request with\n   * @param [strategy] - to make scroll visually disabled\n   * */\n  public static requestUnlock(initiator: any, strategy?: ScrollStrategy) {\n    initiator && initiatorSet.delete(initiator);\n    (initiatorSet.size === 0) && ScrollUtils.unlock();\n  }\n}\n","export abstract class TraversingUtils {\n  /**\n   * Check that {@param nodeA} and {@param nodeB} is from the same tree path.\n   */\n  static isRelative(nodeA: Node | null, nodeB: Node | null) {\n    return nodeA && nodeB && (nodeA.contains(nodeB) || nodeB.contains(nodeA));\n  }\n\n  /**\n   * Find closest parent node of {@param node} by {@param predicate}.\n   * Optional {@param skipSelf} to skip initial node\n   */\n  static closestBy(node: Node | null, predicate: (node: Node) => boolean, skipSelf = false): Node | null {\n    let current = skipSelf && node ? node.parentNode : node;\n    while (current) {\n      if (predicate(current)) return current;\n      current = current.parentNode;\n    }\n    return null;\n  }\n\n  /**\n   * Create function that find next dom element, that matches selector, in the sequence declared by {@param next} function\n   */\n  static createSequenceFinder(next: (el: Element) => Element | null) {\n    return function (base: Element, sel: string): Element | null {\n      for (let target: Element | null = next(base); target; target = next(target)) {\n        if (!sel || target.matches(sel)) return target;\n      }\n      return null;\n    };\n  }\n\n  /** @return first matching next sibling or null*/\n  static findNext = TraversingUtils.createSequenceFinder((el) => el.nextElementSibling);\n  /** @return first matching previous sibling or null*/\n  static findPrev = TraversingUtils.createSequenceFinder((el) => el.previousElementSibling);\n  /** @return first matching parent or null*/\n  static findParent = TraversingUtils.createSequenceFinder((el) => el.parentElement);\n\n  /** @return Array of all matching elements in subtree or empty array*/\n  static findAll(base: Element, sel: string): Element[] {\n    return sel ? Array.from(base.querySelectorAll(sel)) : [base];\n  }\n  /** @return Array of all matching children or empty array*/\n  static findChildren(base: Element, sel: string): Element[] {\n    return Array.from(base.children).filter((el: Element) => !sel || el.matches(sel));\n  }\n}\n","import {ExportNs} from './export-ns';\n\nconst {userAgent, vendor, platform} = window.navigator;\n\n/**\n * Device detection utility\n * @readonly\n */\n@ExportNs('DeviceDetector')\nexport abstract class DeviceDetector {\n  // IE Detection\n  public static readonly isTrident = /trident/i.test(userAgent);\n  public static readonly isIE = DeviceDetector.isTrident;\n\n  // Edge Detection\n  public static readonly isEdgeHTML = /edg([ea]|ios)/i.test(userAgent);\n  public static readonly isBlinkEdge = /\\sedg\\//i.test(userAgent);\n  public static readonly isEdge = DeviceDetector.isEdgeHTML || DeviceDetector.isBlinkEdge;\n\n  // Gecko\n  public static readonly isGecko = /gecko/i.test(userAgent) && !/like gecko/i.test(userAgent);\n  public static readonly isFirefox = /firefox|iceweasel|fxios/i.test(userAgent);\n\n  // Opera / Chrome\n  public static readonly isOpera = /(?:^opera.+?version|opr)/.test(userAgent);\n  public static readonly isChrome = !DeviceDetector.isOpera && /google inc/.test(vendor);\n\n  // Webkit\n  public static readonly isWebkit = /(apple)?webkit/i.test(userAgent);\n\n  // Safari\n  public static readonly isSafari = DeviceDetector.isWebkit && /^((?!chrome|android).)*safari/i.test(userAgent);\n\n  // Blink\n  public static readonly isBlink = DeviceDetector.isWebkit && !DeviceDetector.isSafari;\n\n  // Bot detection\n  public static readonly isBot = /Chrome-Lighthouse|Google Page Speed Insights/i.test(userAgent);\n\n  // Mobile\n  public static readonly isAndroid = /Android/i.test(userAgent);\n  public static readonly isMobileIOS13 = /* iOS 13+ detection */ (platform === 'MacIntel' && window.navigator.maxTouchPoints > 1);\n  public static readonly isMobileIOS = /iPad|iPhone|iPod/.test(platform) || DeviceDetector.isMobileIOS13;\n  public static readonly isLegacyMobile = /webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n\n  public static readonly isMobile = DeviceDetector.isMobileIOS || DeviceDetector.isAndroid || DeviceDetector.isLegacyMobile;\n  public static readonly isMobileSafari = DeviceDetector.isMobileIOS && DeviceDetector.isWebkit && /CriOS/i.test(userAgent);\n\n  // Touch Detection\n  public static get isTouchDevice() {\n    if (window.navigator.maxTouchPoints || window.navigator.msMaxTouchPoints) return true;\n    return ('ontouchstart' in window) || ('DocumentTouch' in window && document instanceof Touch);\n  }\n\n  // Hover check\n  // Note: always true for IE\n  public static get hasHover() {\n    return !matchMedia('(hover: none)').matches;\n  }\n\n  static get TOUCH_EVENTS() {\n    const isTouch = DeviceDetector.isTouchDevice;\n    return {\n      START: isTouch ? 'touchstart' : 'pointerdown',\n      MOVE: isTouch ? 'touchmove' : 'pointermove',\n      END: isTouch ? 'touchend' : 'pointerup'\n    };\n  }\n}\n","const NS_NAME = 'ESL';\n\n/**\n * Nested declaration helper\n */\nfunction define(root: any, name: string, value: any) {\n  return name.split('.').reduce((obj: any, key, index, parts) => {\n    if (parts.length === index + 1) {\n      return (obj[key] = obj[key] || value);\n    }\n    const type = typeof obj[key];\n    if (type !== 'undefined' && type !== 'object' && type !== 'function') {\n      throw new Error(`Can not define ${value} on ${name}`);\n    }\n    return (obj[key] = obj[key] || {});\n  }, root);\n}\n\n/**\n * Method to manually declare key in library namespace\n * See {@link ExportNs} decorator for details\n */\nexport const exportNs = (name: string, module: any) => {\n  if (!(NS_NAME in window)) return;\n  define((window as any)[NS_NAME], name, module);\n};\n\n/**\n * Decorator to declare function or class in a global ns\n * @param {string} name - key path to declare in ESL global ns\n * NOTE: path parts should be separated by dots\n * @example @Export('Package.Component')\n * NOTE: in case declaration contains components-packages, their origins will be mixed with declaration in a Runtime\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function ExportNs<T extends Function>(name?: string) {\n  return (module: T) => exportNs(name || module.name, module);\n}\n","/** Fix IE browser to allow to display alert under iframe */\nexport function createZIndexIframe(): HTMLElement {\n  const iframe = document.createElement('iframe');\n  iframe.className = 'ie-zindex-fix';\n  iframe.src = 'about:blank';\n  return iframe;\n}\n","type Tuple<T> = [T?, T?];\n\n/** Split array into tuples */\nexport const tuple = <T>(arr: T[]): Tuple<T>[] => arr.reduce((acc: Tuple<T>[], el) => {\n  if (acc.length === 0 || acc[acc.length - 1].length >= 2) acc.push([]);\n  acc[acc.length - 1].push(el);\n  return acc;\n}, []);\n\n/** Flat array */\nexport const flat = <T>(arr: (null | T | T[])[]): T[] =>\n  arr.reduce((acc: T[], el) => el ? acc.concat(el) : acc, []) as T[];\n\n/** Wrap to array */\nexport const wrap = <T>(arr: undefined | null | T | T[]): T[] => {\n  if (arr === undefined || arr === null) return [];\n  if (Array.isArray(arr)) return arr;\n  return [arr];\n};\n\n/** Make array values unique */\nexport const uniq = <T> (arr: T[]): T[] => {\n  const result: T[] = [];\n  const set = new Set<T>();\n  arr.forEach((item) => set.add(item));\n  set.forEach((item) => result.push(item));\n  return result;\n};\n","import {get} from './object';\n\n/** Convert string to kebab-case notation */\nexport const toKebabCase = (str: string) => {\n  return str.replace(/([a-z])([A-Z])/g, '$1-$2').replace(/[\\s_]+/g, '-').toLowerCase();\n};\n\n/** Convert string to camelCase notation */\nexport const toCamelCase = (str: string) => {\n  return str.trim().replace(/[\\s-,_]+([a-zA-Z0-9]?)/g, (match: string, word: string) => word.toUpperCase());\n};\n\n/** Unwrap string from parenthesis */\nexport const unwrapParenthesis = (str: string) => {\n  return str.trim().replace(/^\\((.*)\\)$/, '$1').trim();\n};\n\n/**\n * Common function that returns coefficient aspect ratio\n * Supported formats: w:h, w/h, coefficient\n * @example '16:9', '16/9', '1.77'\n * @param str - string to parse\n * @return aspect ratio coefficient\n */\nexport function parseAspectRatio(str: string): number {\n  const [w, h] = str.split(/[:/]/);\n  if (typeof h !== 'undefined') return +w / +h;\n  return +w || 0;\n}\n\n/** Evaluate passed string or returns `defaultValue` */\nexport function evaluate(str: string, defaultValue?: any): any {\n  try {\n    return str ? (new Function(`return ${str}`))() : defaultValue;\n  } catch (e) {\n    console.warn('Cannot parse value ', str, e);\n    return defaultValue;\n  }\n}\n\n/** Replace '{key}' patterns in the string from the source object */\nexport function format(str: string, source: Record<string, any>) {\n  return str.replace(/{([\\w.]+)}/g, (match, key) => {\n    const val = get(source, key);\n    return val === undefined ? match : val;\n  });\n}\n","import type {AnyToAnyFnSignature} from './functions';\n\n/** Memoized function type */\nexport type MemoizedFn<T extends AnyToAnyFnSignature> = T & {\n  /** Cache instance */\n  cache: Map<null | string, ReturnType<T>>,\n  /** Clear memoization cache */\n  clear: () => void\n};\n\n/**\n * Memoization decorator function. Caches the original function result according to hash generated from arguments.\n * In case the hash function returns `undefined` value will not be memoized.\n * @see MemoHashFn Hash function signature.\n */\nexport function memoizeFn<F extends AnyToAnyFnSignature>(fn: F, hashFn: MemoHashFn<F> = defaultArgsHashFn): MemoizedFn<F> {\n  function memo(...args: Parameters<F>): any {\n    const key = hashFn(...args);\n    if (key !== null && typeof key !== 'string') {\n      console.warn(`Can't cache value for ${fn.name} call.`);\n      return fn.apply(this, args);\n    }\n    if (!memo.cache.has(key)) {\n      memo.cache.set(key, fn.apply(this, args));\n    }\n    return memo.cache.get(key);\n  }\n\n  memo.cache = new Map<null | string, ReturnType<F>>();\n  memo.clear = () => memo.cache.clear();\n  return memo as MemoizedFn<F>;\n}\n\n/**\n * Describe abstract memoization hash function. Memoization should have the same or compatible signature as the decorated function.\n * Hash function can return string or null as a hash result. Note: null is correct hash for arguments!\n * If the result is `undefined` - it means that the hash can not be generated.\n */\nexport type MemoHashFn<F extends AnyToAnyFnSignature = AnyToAnyFnSignature> = (...args: Parameters<F>) => undefined | null | string;\n\n/**\n * Default arguments hash function.\n * Supports only 0-1 arguments with a primitive type.\n */\nexport function defaultArgsHashFn(...args: any[]) {\n  if (args.length === 0) return null;\n  if (args.length > 1) return;\n  if (typeof args[0] !== 'string' && typeof args[0] !== 'number' && typeof args[0] !== 'boolean') return;\n  return String(args[0]);\n}\n","export const isObject = (obj: any): obj is Record<string, any> => obj && typeof obj === 'object';\nexport const isObjectLike = (obj: any) => isObject(obj) || typeof obj === 'function';\nexport const isPrimitive = (obj: any): obj is string | number | boolean =>\n  typeof obj === 'string' || typeof obj === 'number' || typeof obj === 'boolean';\n\nexport type CopyPredicate = (key: string, value: any) => boolean;\n\n/** Deep object compare */\nexport function deepCompare(obj1: any, obj2: any): boolean {\n  if (Object.is(obj1, obj2)) return true;\n  if (typeof obj1 !== typeof obj2) return false;\n  if (isObject(obj1) && isObject(obj2)) {\n    const keys1 = Object.keys(obj1);\n    const keys2 = Object.keys(obj2);\n    if (keys1.length !== keys2.length) return false;\n    return !keys1.some((key) => !deepCompare(obj1[key], obj2[key]));\n  }\n  return false;\n}\n\n/** Find the closest property descriptor */\nexport function getPropertyDescriptor(o: any, prop: PropertyKey) {\n  let proto = o;\n  while (proto) {\n    const desc = Object.getOwnPropertyDescriptor(proto, prop);\n    if (desc) return desc;\n    proto = Object.getPrototypeOf(proto);\n  }\n}\n\n/** @returns first defined param */\nexport function defined<T>(...params: T[]) {\n  for (const param of params) {\n    if (param !== undefined) return param;\n  }\n}\n\n/** Makes a plain copy of obj with properties satisfying the predicate\n * If no predicate provided copies all own properties */\nexport function copy<T>(obj: T, predicate: CopyPredicate = () => true): Partial<T> {\n  const result: any = Object.assign({}, obj || {});\n  Object.keys(result).forEach((key) => {\n    (!predicate(key, result[key])) && delete result[key];\n  });\n  return result;\n}\n\n/** Makes a flat copy without undefined keys */\nexport function copyDefinedKeys<T>(obj?: T): Partial<T> {\n  return copy(obj || {}, (key, value) => value !== void 0);\n}\n\n/** Omit copying provided properties from object */\nexport function omit<T>(obj: T, keys: string[]) {\n  return copy(obj, key => !keys.includes(key));\n}\n\n/**\n * Set object property using \"path\" key\n *\n * @param target - object\n * @param path - key path, use '.' as delimiter\n * @param value - value of property\n */\nexport const set = (target: any, path: string, value: any) => {\n  const parts = (path || '').split('.');\n  const depth = parts.length - 1;\n  parts.reduce((cur: any, key: string, index: number) => {\n    if (index === depth) return cur[key] = value;\n    return cur[key] = isObjectLike(cur[key]) ? cur[key] : {};\n  }, target);\n};\n\n/**\n * Gets object property using \"path\" key\n * Creates empty object if sub-key value is not presented.\n *\n * @param data - object\n * @param path - key path, use '.' as delimiter\n * @param defaultValue - default\n */\nexport const get = (data: any, path: string, defaultValue?: any): any => {\n  const parts = (path || '').split('.');\n  const result = parts.reduce((curr: any, key: string) => {\n    if (isObjectLike(curr)) return curr[key];\n    return undefined;\n  }, data);\n  return typeof result === 'undefined' ? defaultValue : result;\n};\n","const sequences = new Map<string, number>();\n\n/** Create and return sequential id */\nexport const sequentialUID = (name: string, prefix: string = name) => {\n  const uid = (sequences.get(name) || 0) + 1;\n  sequences.set(name, uid);\n  return prefix + uid;\n};\n\n/** Reset {@link sequentialUID} generator */\nexport const resetSequentialUID = (name?: string) => {\n  if (typeof name === 'string') {\n    sequences.delete(name);\n  } else {\n    sequences.clear();\n  }\n};\n\n/** Return random unique identifier */\nexport const randUID = (): string => {\n  const time = Date.now().toString(32);\n  const rand = Math.round(Math.random() * 1024 * 1024).toString(32);\n  return time + '-' + rand;\n};\n\n/**\n * Generate unique id\n * @deprecated Alias for {@link randUID}\n */\nexport const generateUId = randUID;\n","import type {DeviceDetector} from './esl-utils/environment/device-detector';\n\nimport type {ESLMediaBreakpoints} from './esl-media-query/core';\n\nimport type {ESLImage} from './esl-image/core/esl-image';\nimport type {ESLMedia} from './esl-media/core/esl-media';\n\nimport type {ESLScrollbar} from './esl-scrollbar/core/esl-scrollbar';\n\nimport type {ESLA11yGroup} from './esl-a11y-group/core/esl-a11y-group';\nimport type {ESLToggleableDispatcher} from './esl-toggleable/core/esl-toggleable-dispatcher';\nimport type {ESLToggleable} from './esl-toggleable/core/esl-toggleable';\nimport type {ESLPopup} from './esl-popup/core/esl-popup';\nimport type {ESLTrigger} from './esl-trigger/core/esl-trigger';\nimport type {ESLTab} from './esl-tab/core/esl-tab';\nimport type {ESLPanel} from './esl-panel/core/esl-panel';\nimport type {ESLPanelGroup} from './esl-panel/core/esl-panel-group';\nimport type {ESLTabs} from './esl-tab/core/esl-tabs';\n\nimport type {ESLSelect, ESLSelectList, ESLSelectItem} from './esl-forms/all';\n\nimport type {ESLCarousel} from './draft/esl-carousel/core/esl-carousel';\nimport type {ESLCarouselDotsPlugin} from './draft/esl-carousel/plugin/esl-carousel-dots.plugin';\nimport type {ESLCarouselLinkPlugin} from './draft/esl-carousel/plugin/esl-carousel-link.plugin';\nimport type {ESLCarouselTouchPlugin} from './draft/esl-carousel/plugin/esl-carousel-touch.plugin';\nimport type {ESLCarouselAutoplayPlugin} from './draft/esl-carousel/plugin/esl-carousel-autoplay.plugin';\n\n// Define global namespace\nif (!('ESL' in window)) {\n  Object.defineProperty(window, 'ESL', {value: {}});\n}\n\ndeclare global {\n  const ESL: ESLLibrary;\n\n  export interface ESLLibrary {\n    DeviceDetector?: typeof DeviceDetector;\n    MediaBreakpoints?: typeof ESLMediaBreakpoints;\n\n    Image?: typeof ESLImage;\n    Media?: typeof ESLMedia;\n    Scrollbar?: typeof ESLScrollbar;\n\n    A11yGroup?: typeof ESLA11yGroup;\n    ToggleableGroupDispatcher?: typeof ESLToggleableDispatcher;\n    Toggleable?: typeof ESLToggleable;\n    Popup?: typeof ESLPopup;\n    Trigger?: typeof ESLTrigger;\n    Tab?: typeof ESLTab;\n    Panel?: typeof ESLPanel;\n    PanelGroup?: typeof ESLPanelGroup;\n    TabsContainer?: typeof ESLTabs;\n\n    Select?: typeof ESLSelect;\n    SelectList?: typeof ESLSelectList;\n    SelectItem?: typeof ESLSelectItem;\n\n    Carousel?: typeof ESLCarousel;\n    CarouselPlugins: {\n      Dots?: typeof ESLCarouselDotsPlugin;\n      Link?: typeof ESLCarouselLinkPlugin;\n      Touch?: typeof ESLCarouselTouchPlugin;\n      Autoplay?: typeof ESLCarouselAutoplayPlugin;\n    };\n  }\n}\n","// Shim for modern browsers with ES6 class syntax support\n// Shim based on https://github.com/webcomponents/polyfills/blob/master/packages/custom-elements/ts_src/custom-elements.ts\nexport function shimES5ElementConstructor(BuiltInHTMLElement: typeof HTMLElement) {\n  if (\n    // No Reflect, no classes, no need for shim because native custom elements require ES2015 classes or Reflect.\n    window.Reflect === undefined || window.customElements === undefined ||\n    // The webcomponentsjs custom elements polyfill doesn't require ES2015-compatible construction (`super()` or `Reflect.construct`).\n    (window.customElements as any).polyfillWrapFlushCallback) {\n    return;\n  }\n\n  Object.defineProperty(window, BuiltInHTMLElement.name, {\n    value: function HTMLElement() {\n      return Reflect.construct(BuiltInHTMLElement, [], this.constructor);\n    }\n  });\n  const Element = (window as any)[BuiltInHTMLElement.name] as typeof HTMLElement;\n  Element.prototype = BuiltInHTMLElement.prototype;\n  Element.prototype.constructor = Element;\n  Object.setPrototypeOf(Element, BuiltInHTMLElement);\n}\n\nshimES5ElementConstructor(HTMLElement);\n","/**\n * Group: DOM API shims\n * Target Browsers: IE11, Edge < 18, Safari < 13\n * Element.toggleAttribute polyfill\n */\nif (!Element.prototype.toggleAttribute) {\n  Element.prototype.toggleAttribute = function (name: string, force: boolean | undefined): boolean {\n    const has = this.hasAttribute(name);\n    const state = force === void 0 ? !has : !!force;\n\n    if (has !== state) {\n      (state) ? this.setAttribute(name, '') : this.removeAttribute(name);\n    }\n    return state;\n  };\n}\n","/**\n * Group: DOM API shims\n * Target Browsers: IE11, Edge < 18\n * KeyboardEvent.prototype.key shim to normalize key values to W3C spec\n * Based on published shim https://www.npmjs.com/package/shim-keyboard-event-key\n */\n(function (KeyboardEventProto) {\n  const desc = Object.getOwnPropertyDescriptor(KeyboardEventProto, 'key');\n  if (!desc) return;\n\n  const keyMap: Record<string, string> = {\n    Win: 'Meta',\n    Scroll: 'ScrollLock',\n    Spacebar: ' ',\n\n    Down: 'ArrowDown',\n    Left: 'ArrowLeft',\n    Right: 'ArrowRight',\n    Up: 'ArrowUp',\n\n    Del: 'Delete',\n    Apps: 'ContextMenu',\n    Esc: 'Escape',\n\n    Multiply: '*',\n    Add: '+',\n    Subtract: '-',\n    Decimal: '.',\n    Divide: '/',\n  };\n\n  Object.defineProperty(KeyboardEventProto, 'key', {\n    get() {\n      const key = desc.get!.call(this);\n      return Object.prototype.hasOwnProperty.call(keyMap, key) ? keyMap[key] : key;\n    },\n  });\n})(KeyboardEvent.prototype);\n","/**\n * Group: DOM polyfills\n * Target browsers: IE11, Edge <= 18\n * Node.isConnected polyfill\n */\nif (!('isConnected' in Node.prototype)) {\n  Object.defineProperty(Node.prototype, 'isConnected', {\n    get() {\n      return !this.ownerDocument ||\n        // eslint-disable-next-line no-bitwise\n        !(this.ownerDocument.compareDocumentPosition(this) & this.DOCUMENT_POSITION_DISCONNECTED);\n    }\n  });\n}\n","import './list/dom.node.isConnected';\nimport './list/dom.keyboard.key';\nimport './list/dom.element.toggleAttribute';\n","if (!('customElements' in window)) {\n  throw new Error('Browser is not support customElements, load polyfills before');\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// Support for ES5 bundle target\nimport '../../src/polyfills/es5-target-shim';\n// Builtin polyfills\nimport '../../src/polyfills/polyfills.es6';\n// Validate environment\nimport '../../src/polyfills/polyfills.validate';\n\nimport './common/test-media';\nimport './common/test-media-source';\n\n// With Namespace\nimport '../../src/modules/lib';\n\nimport {\n  ESLImage,\n  ESLMedia,\n  ESLPopup,\n  ESLPanel,\n  ESLPanelGroup,\n  ESLTrigger,\n  ESLA11yGroup,\n  ESLTabs,\n  ESLTab,\n  ESLScrollbar,\n  ESLAlert,\n  ESLToggleableDispatcher,\n  ESLSelect,\n  ESLSelectList\n} from '../../src/modules/all';\n\nimport '../../src/modules/esl-media/providers/iframe-provider';\nimport '../../src/modules/esl-media/providers/html5/audio-provider';\nimport '../../src/modules/esl-media/providers/html5/video-provider';\nimport '../../src/modules/esl-media/providers/youtube-provider';\nimport '../../src/modules/esl-media/providers/brightcove-provider';\n\nimport {\n  ESLCarousel,\n  ESLCarouselPlugins\n} from '../../src/modules/draft/all';\n\nESLImage.register();\nESLMedia.register();\n\nESLToggleableDispatcher.init();\nESLPopup.register();\n\nESLPanelGroup.register();\nESLPanel.register();\n\nESLTrigger.register();\nESLTab.register();\n\nESLA11yGroup.register();\nESLTabs.register();\n\nESLScrollbar.register();\nESLAlert.register();\nESLAlert.init();\n\nESLSelectList.register();\nESLSelect.register();\n\nESLCarousel.register();\nESLCarouselPlugins.Dots.register();\nESLCarouselPlugins.Link.register();\nESLCarouselPlugins.Touch.register();\nESLCarouselPlugins.Autoplay.register();\n"],"sourceRoot":""}